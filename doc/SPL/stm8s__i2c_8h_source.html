<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>STM8S/A Standard Peripherals Firmware Library: stm8s_i2c.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body><script language="javascript">
if (window.name != "content")
    document.write("<center><a href='index.html?page=stm8s__i2c_8h_source.html'>show framing</a></center>")
</script>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">STM8S/A Standard Peripherals Firmware Library
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_99fee8dcdd0167cb7ca79288e08b10f1.html">STM8S_StdPeriph_Lib_V2.3.0</a>      </li>
      <li class="navelem"><a class="el" href="dir_f5da7e899866e3fe224c5708fd2dd723.html">Libraries</a>      </li>
      <li class="navelem"><a class="el" href="dir_c53ce1dacb9f624efb36b49d8509ea3b.html">STM8S_StdPeriph_Driver</a>      </li>
      <li class="navelem"><a class="el" href="dir_338cbeacb321cf9a50f1e40f97b7efbb.html">inc</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">stm8s_i2c.h</div>  </div>
</div>
<div class="contents">
<a href="stm8s__i2c_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**</span>
<a name="l00002"></a>00002 <span class="comment">  ******************************************************************************</span>
<a name="l00003"></a>00003 <span class="comment">  * @file    stm8s_i2c.h</span>
<a name="l00004"></a>00004 <span class="comment">  * @author  MCD Application Team</span>
<a name="l00005"></a>00005 <span class="comment">  * @version V2.3.0</span>
<a name="l00006"></a>00006 <span class="comment">  * @date    16-June-2017</span>
<a name="l00007"></a>00007 <span class="comment">  * @brief  This file contains all functions prototype and macros for the I2C peripheral.</span>
<a name="l00008"></a>00008 <span class="comment">   ******************************************************************************</span>
<a name="l00009"></a>00009 <span class="comment">  * @attention</span>
<a name="l00010"></a>00010 <span class="comment">  *</span>
<a name="l00011"></a>00011 <span class="comment">  * &lt;h2&gt;&lt;center&gt;&amp;copy; COPYRIGHT 2014 STMicroelectronics&lt;/center&gt;&lt;/h2&gt;</span>
<a name="l00012"></a>00012 <span class="comment">  *</span>
<a name="l00013"></a>00013 <span class="comment">  * Licensed under MCD-ST Liberty SW License Agreement V2, (the &quot;License&quot;);</span>
<a name="l00014"></a>00014 <span class="comment">  * You may not use this file except in compliance with the License.</span>
<a name="l00015"></a>00015 <span class="comment">  * You may obtain a copy of the License at:</span>
<a name="l00016"></a>00016 <span class="comment">  *</span>
<a name="l00017"></a>00017 <span class="comment">  *        http://www.st.com/software_license_agreement_liberty_v2</span>
<a name="l00018"></a>00018 <span class="comment">  *</span>
<a name="l00019"></a>00019 <span class="comment">  * Unless required by applicable law or agreed to in writing, software </span>
<a name="l00020"></a>00020 <span class="comment">  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, </span>
<a name="l00021"></a>00021 <span class="comment">  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00022"></a>00022 <span class="comment">  * See the License for the specific language governing permissions and</span>
<a name="l00023"></a>00023 <span class="comment">  * limitations under the License.</span>
<a name="l00024"></a>00024 <span class="comment">  *</span>
<a name="l00025"></a>00025 <span class="comment">  ******************************************************************************</span>
<a name="l00026"></a>00026 <span class="comment">  */</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">/* Define to prevent recursive inclusion -------------------------------------*/</span>
<a name="l00029"></a>00029 <span class="preprocessor">#ifndef __STM8S_I2C_H</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#define __STM8S_I2C_H</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="comment">/* Includes ------------------------------------------------------------------*/</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="stm8s_8h.html" title="This file contains all HW registers definitions and memory mapping.">stm8s.h</a>&quot;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment">/* Exported types ------------------------------------------------------------*/</span>
<a name="l00036"></a>00036 <span class="comment"></span>
<a name="l00037"></a>00037 <span class="comment">/** @addtogroup I2C_Exported_Types</span>
<a name="l00038"></a>00038 <span class="comment">  * @{</span>
<a name="l00039"></a>00039 <span class="comment">  */</span>
<a name="l00040"></a>00040 <span class="comment"></span>
<a name="l00041"></a>00041 <span class="comment">/**</span>
<a name="l00042"></a>00042 <span class="comment">  * @brief  I2C duty cycle (fast mode only)</span>
<a name="l00043"></a>00043 <span class="comment">  */</span>
<a name="l00044"></a><a class="code" href="group__i2c__exported__types.html#gac0fae3e51f48b185d7413e529ef5dd1d">00044</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00045"></a>00045 {
<a name="l00046"></a><a class="code" href="group__i2c__exported__types.html#ggac0fae3e51f48b185d7413e529ef5dd1da7863251159588f24be3dc095ad768d7a">00046</a>   <a class="code" href="group__i2c__exported__types.html#ggac0fae3e51f48b185d7413e529ef5dd1da7863251159588f24be3dc095ad768d7a">I2C_DUTYCYCLE_2</a>    = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x00,  <span class="comment">/*!&lt; Fast mode Tlow/THigh = 2 */</span>
<a name="l00047"></a><a class="code" href="group__i2c__exported__types.html#ggac0fae3e51f48b185d7413e529ef5dd1da3624931a02accb739dc09a55481ba07a">00047</a>   <a class="code" href="group__i2c__exported__types.html#ggac0fae3e51f48b185d7413e529ef5dd1da3624931a02accb739dc09a55481ba07a">I2C_DUTYCYCLE_16_9</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x40   <span class="comment">/*!&lt; Fast mode Tlow/Thigh = 16/9 */</span>
<a name="l00048"></a>00048 } <a class="code" href="group__i2c__exported__types.html#gac0fae3e51f48b185d7413e529ef5dd1d" title="I2C duty cycle (fast mode only)">I2C_DutyCycle_TypeDef</a>;
<a name="l00049"></a>00049 <span class="comment"></span>
<a name="l00050"></a>00050 <span class="comment">/**</span>
<a name="l00051"></a>00051 <span class="comment">  * @brief  I2C Acknowledgement configuration</span>
<a name="l00052"></a>00052 <span class="comment">  */</span>
<a name="l00053"></a><a class="code" href="group__i2c__exported__types.html#gaa4e039897cc642ec3abd95a1fa1cc1b3">00053</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00054"></a>00054 {
<a name="l00055"></a><a class="code" href="group__i2c__exported__types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8">00055</a>   <a class="code" href="group__i2c__exported__types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8">I2C_ACK_NONE</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x00,  <span class="comment">/*!&lt; No acknowledge */</span>
<a name="l00056"></a><a class="code" href="group__i2c__exported__types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a336be6f5676342e3bf059cba6321ab91">00056</a>   <a class="code" href="group__i2c__exported__types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a336be6f5676342e3bf059cba6321ab91">I2C_ACK_CURR</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x01,  <span class="comment">/*!&lt; Acknowledge on the current byte */</span>
<a name="l00057"></a><a class="code" href="group__i2c__exported__types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a0d8699c5364b97fd60b5eeb8d960d5ad">00057</a>   <a class="code" href="group__i2c__exported__types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a0d8699c5364b97fd60b5eeb8d960d5ad">I2C_ACK_NEXT</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x02   <span class="comment">/*!&lt; Acknowledge on the next byte */</span>
<a name="l00058"></a>00058 } <a class="code" href="group__i2c__exported__types.html#gaa4e039897cc642ec3abd95a1fa1cc1b3" title="I2C Acknowledgement configuration.">I2C_Ack_TypeDef</a>;
<a name="l00059"></a>00059 <span class="comment"></span>
<a name="l00060"></a>00060 <span class="comment">/**</span>
<a name="l00061"></a>00061 <span class="comment">  * @brief  I2C Addressing Mode (slave mode only)</span>
<a name="l00062"></a>00062 <span class="comment">  */</span>
<a name="l00063"></a><a class="code" href="group__i2c__exported__types.html#ga183d9b2cf41469e7f6b7c00750e5a7ea">00063</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00064"></a>00064 {
<a name="l00065"></a><a class="code" href="group__i2c__exported__types.html#gga183d9b2cf41469e7f6b7c00750e5a7eaa025fb1ad8637e49129bef567f087e4e6">00065</a>   <a class="code" href="group__i2c__exported__types.html#gga183d9b2cf41469e7f6b7c00750e5a7eaa025fb1ad8637e49129bef567f087e4e6">I2C_ADDMODE_7BIT</a>  = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x00,  <span class="comment">/*!&lt; 7-bit slave address (10-bit address not acknowledged) */</span>
<a name="l00066"></a><a class="code" href="group__i2c__exported__types.html#gga183d9b2cf41469e7f6b7c00750e5a7eaa40a5d951dc09c36ed7000c2f88df517a">00066</a>   <a class="code" href="group__i2c__exported__types.html#gga183d9b2cf41469e7f6b7c00750e5a7eaa40a5d951dc09c36ed7000c2f88df517a">I2C_ADDMODE_10BIT</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x80   <span class="comment">/*!&lt; 10-bit slave address (7-bit address not acknowledged) */</span>
<a name="l00067"></a>00067 } <a class="code" href="group__i2c__exported__types.html#ga183d9b2cf41469e7f6b7c00750e5a7ea" title="I2C Addressing Mode (slave mode only)">I2C_AddMode_TypeDef</a>;
<a name="l00068"></a>00068 <span class="comment"></span>
<a name="l00069"></a>00069 <span class="comment">/**</span>
<a name="l00070"></a>00070 <span class="comment">  * @brief  I2C Interrupt sources</span>
<a name="l00071"></a>00071 <span class="comment">  * Warning: the values correspond to the bit position in the ITR register</span>
<a name="l00072"></a>00072 <span class="comment">  */</span>
<a name="l00073"></a><a class="code" href="group__i2c__exported__types.html#gaed6510c550547134afb30f717f17da88">00073</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00074"></a>00074 {
<a name="l00075"></a><a class="code" href="group__i2c__exported__types.html#ggaed6510c550547134afb30f717f17da88a91e37cab1ef1220a681b5525fd083dfc">00075</a>     <a class="code" href="group__i2c__exported__types.html#ggaed6510c550547134afb30f717f17da88a91e37cab1ef1220a681b5525fd083dfc">I2C_IT_ERR</a>     = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x01,     <span class="comment">/*!&lt; Error Interruption */</span>
<a name="l00076"></a><a class="code" href="group__i2c__exported__types.html#ggaed6510c550547134afb30f717f17da88a33c31ff1b04045bc40ffd4c7c9d95592">00076</a>     <a class="code" href="group__i2c__exported__types.html#ggaed6510c550547134afb30f717f17da88a33c31ff1b04045bc40ffd4c7c9d95592">I2C_IT_EVT</a>     = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x02,     <span class="comment">/*!&lt; Event Interruption */</span>
<a name="l00077"></a><a class="code" href="group__i2c__exported__types.html#ggaed6510c550547134afb30f717f17da88ab91030d53b1414d2c0413fd68ab01698">00077</a>     <a class="code" href="group__i2c__exported__types.html#ggaed6510c550547134afb30f717f17da88ab91030d53b1414d2c0413fd68ab01698">I2C_IT_BUF</a>     = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x04      <span class="comment">/*!&lt; Buffer Interruption */</span>
<a name="l00078"></a>00078 } <a class="code" href="group__i2c__exported__types.html#gaed6510c550547134afb30f717f17da88" title="I2C Interrupt sources Warning: the values correspond to the bit position in the ITR register...">I2C_IT_TypeDef</a>;
<a name="l00079"></a>00079 <span class="comment"></span>
<a name="l00080"></a>00080 <span class="comment">/**</span>
<a name="l00081"></a>00081 <span class="comment">  * @brief  I2C transfer direction</span>
<a name="l00082"></a>00082 <span class="comment">  * Warning: the values correspond to the ADD0 bit position in the OARL register</span>
<a name="l00083"></a>00083 <span class="comment">  */</span>
<a name="l00084"></a><a class="code" href="group__i2c__exported__types.html#gac5294e7f2dfbf66c835de2f81f9edc72">00084</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00085"></a>00085 {
<a name="l00086"></a><a class="code" href="group__i2c__exported__types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c">00086</a>   <a class="code" href="group__i2c__exported__types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c">I2C_DIRECTION_TX</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x00,  <span class="comment">/*!&lt; Transmission direction */</span>
<a name="l00087"></a><a class="code" href="group__i2c__exported__types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a6d8f33266f7e31199553d2ff352e0345">00087</a>   <a class="code" href="group__i2c__exported__types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a6d8f33266f7e31199553d2ff352e0345">I2C_DIRECTION_RX</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x01   <span class="comment">/*!&lt; Reception direction */</span>
<a name="l00088"></a>00088 } <a class="code" href="group__i2c__exported__types.html#gac5294e7f2dfbf66c835de2f81f9edc72" title="I2C transfer direction Warning: the values correspond to the ADD0 bit position in the OARL register...">I2C_Direction_TypeDef</a>;
<a name="l00089"></a>00089 <span class="comment"></span>
<a name="l00090"></a>00090 <span class="comment">/**</span>
<a name="l00091"></a>00091 <span class="comment">  * @brief  I2C Flags</span>
<a name="l00092"></a>00092 <span class="comment">  * @brief Elements values convention: 0xXXYY</span>
<a name="l00093"></a>00093 <span class="comment">  *  X = SRx registers index</span>
<a name="l00094"></a>00094 <span class="comment">  *      X = 1 : SR1</span>
<a name="l00095"></a>00095 <span class="comment">  *      X = 2 : SR2</span>
<a name="l00096"></a>00096 <span class="comment">  *      X = 3 : SR3</span>
<a name="l00097"></a>00097 <span class="comment">  *  Y = Flag mask in the register</span>
<a name="l00098"></a>00098 <span class="comment">  */</span>
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="group__i2c__exported__types.html#gaa5ff1a9e0dffb49301663ae1ebeea40a">00100</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102   <span class="comment">/* SR1 register flags */</span>
<a name="l00103"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa925174fcadfc1024ab3c3d6d301e14b5">00103</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa925174fcadfc1024ab3c3d6d301e14b5">I2C_FLAG_TXEMPTY</a>             = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0180,  <span class="comment">/*!&lt; Transmit Data Register Empty flag */</span>
<a name="l00104"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aacfb7c4058b6077ccacc53adfed35e97c">00104</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aacfb7c4058b6077ccacc53adfed35e97c">I2C_FLAG_RXNOTEMPTY</a>          = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0140,  <span class="comment">/*!&lt; Read Data Register Not Empty flag */</span>
<a name="l00105"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aae2cc981f01d69a071cd437ff22cca0b2">00105</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aae2cc981f01d69a071cd437ff22cca0b2">I2C_FLAG_STOPDETECTION</a>       = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0110,  <span class="comment">/*!&lt; Stop detected flag */</span>
<a name="l00106"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aab66e6eaf98afcd14439086376c739cb0">00106</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aab66e6eaf98afcd14439086376c739cb0">I2C_FLAG_HEADERSENT</a>          = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0108,  <span class="comment">/*!&lt; 10-bit Header sent flag */</span>
<a name="l00107"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">00107</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a>    = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0104,  <span class="comment">/*!&lt; Data Byte Transfer Finished flag */</span>
<a name="l00108"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b">00108</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b">I2C_FLAG_ADDRESSSENTMATCHED</a>  = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0102,  <span class="comment">/*!&lt; Address Sent/Matched (master/slave) flag */</span>
<a name="l00109"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa44edb9589b04652d8351516b833fbebc">00109</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa44edb9589b04652d8351516b833fbebc">I2C_FLAG_STARTDETECTION</a>      = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0101,  <span class="comment">/*!&lt; Start bit sent flag */</span>
<a name="l00110"></a>00110 
<a name="l00111"></a>00111   <span class="comment">/* SR2 register flags */</span>
<a name="l00112"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa9a35fdf5ac08c03fcc484638c6e49c8f">00112</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa9a35fdf5ac08c03fcc484638c6e49c8f">I2C_FLAG_WAKEUPFROMHALT</a>      = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0220,  <span class="comment">/*!&lt; Wake Up From Halt Flag */</span>
<a name="l00113"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aae82b69c1c98907c5a42f7f5abb14662a">00113</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aae82b69c1c98907c5a42f7f5abb14662a">I2C_FLAG_OVERRUNUNDERRUN</a>     = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0208,  <span class="comment">/*!&lt; Overrun/Underrun flag */</span>
<a name="l00114"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aaeead3c199206f20f3a57ad1191f45c38">00114</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aaeead3c199206f20f3a57ad1191f45c38">I2C_FLAG_ACKNOWLEDGEFAILURE</a>  = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0204,  <span class="comment">/*!&lt; Acknowledge Failure Flag */</span>
<a name="l00115"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aad468e7f4eb60b5100d6db7b011b231b3">00115</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aad468e7f4eb60b5100d6db7b011b231b3">I2C_FLAG_ARBITRATIONLOSS</a>     = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0202,  <span class="comment">/*!&lt; Arbitration Loss Flag */</span>
<a name="l00116"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aab668f7d13b832e3f81153db97c60b8f2">00116</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aab668f7d13b832e3f81153db97c60b8f2">I2C_FLAG_BUSERROR</a>            = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0201,  <span class="comment">/*!&lt; Misplaced Start or Stop condition */</span>
<a name="l00117"></a>00117 
<a name="l00118"></a>00118   <span class="comment">/* SR3 register flags */</span>
<a name="l00119"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa8b800d8e9f5f5d460a51efb8b3ef31b5">00119</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa8b800d8e9f5f5d460a51efb8b3ef31b5">I2C_FLAG_GENERALCALL</a>         = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0310,  <span class="comment">/*!&lt; General Call header received Flag */</span>
<a name="l00120"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aadf74dfb80a269792a46d1c8447edf549">00120</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aadf74dfb80a269792a46d1c8447edf549">I2C_FLAG_TRANSMITTERRECEIVER</a> = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0304,  <span class="comment">/*!&lt; Transmitter Receiver Flag */</span>
<a name="l00121"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce">00121</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce">I2C_FLAG_BUSBUSY</a>             = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0302,  <span class="comment">/*!&lt; Bus Busy Flag */</span>
<a name="l00122"></a><a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aab60584266165005d992839d99d6dc603">00122</a>   <a class="code" href="group__i2c__exported__types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aab60584266165005d992839d99d6dc603">I2C_FLAG_MASTERSLAVE</a>         = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0301   <span class="comment">/*!&lt; Master Slave Flag */</span>
<a name="l00123"></a>00123 } <a class="code" href="group__i2c__exported__types.html#gaa5ff1a9e0dffb49301663ae1ebeea40a" title="I2C Flags.">I2C_Flag_TypeDef</a>;
<a name="l00124"></a>00124 <span class="comment"></span>
<a name="l00125"></a>00125 <span class="comment">/**</span>
<a name="l00126"></a>00126 <span class="comment">  * @brief I2C Pending bits</span>
<a name="l00127"></a>00127 <span class="comment">  * Elements values convention: 0xXYZZ</span>
<a name="l00128"></a>00128 <span class="comment">  *  X = SRx registers index</span>
<a name="l00129"></a>00129 <span class="comment">  *      X = 1 : SR1</span>
<a name="l00130"></a>00130 <span class="comment">  *      X = 2 : SR2</span>
<a name="l00131"></a>00131 <span class="comment">  *  Y = Position of the corresponding Interrupt</span>
<a name="l00132"></a>00132 <span class="comment">  *  ZZ = flag mask in the dedicated register(X register)</span>
<a name="l00133"></a>00133 <span class="comment">  */</span>
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="group__i2c__exported__types.html#ga073a1d724d4d4804dc509795a7c06329">00135</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <span class="comment">/* SR1 register flags */</span>
<a name="l00138"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329acf900b1821a9c8391699dadd8d2802a2">00138</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329acf900b1821a9c8391699dadd8d2802a2">I2C_ITPENDINGBIT_TXEMPTY</a>             = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1680,    <span class="comment">/*!&lt; Transmit Data Register Empty  */</span>
<a name="l00139"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a4920fb9b7e0a315f2243eca4dea8858e">00139</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a4920fb9b7e0a315f2243eca4dea8858e">I2C_ITPENDINGBIT_RXNOTEMPTY</a>          = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1640,    <span class="comment">/*!&lt; Read Data Register Not Empty  */</span>
<a name="l00140"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a84509b3e3eb44b3b344e1fcda6c9d6a5">00140</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a84509b3e3eb44b3b344e1fcda6c9d6a5">I2C_ITPENDINGBIT_STOPDETECTION</a>       = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1210,    <span class="comment">/*!&lt; Stop detected  */</span>
<a name="l00141"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a61b00eb0d02015defa34bb1d5163850c">00141</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a61b00eb0d02015defa34bb1d5163850c">I2C_ITPENDINGBIT_HEADERSENT</a>          = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1208,    <span class="comment">/*!&lt; 10-bit Header sent */</span>
<a name="l00142"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a73bfa9ba5f7307f76f102af6e1efe88a">00142</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a73bfa9ba5f7307f76f102af6e1efe88a">I2C_ITPENDINGBIT_TRANSFERFINISHED</a>    = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1204,    <span class="comment">/*!&lt; Data Byte Transfer Finished  */</span>
<a name="l00143"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a2ab9d354c1196056d75cb3975b44493d">00143</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a2ab9d354c1196056d75cb3975b44493d">I2C_ITPENDINGBIT_ADDRESSSENTMATCHED</a>  = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1202,    <span class="comment">/*!&lt; Address Sent/Matched (master/slave)  */</span>
<a name="l00144"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329abdd6cf9f02ac4cb726de25883a823305">00144</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329abdd6cf9f02ac4cb726de25883a823305">I2C_ITPENDINGBIT_STARTDETECTION</a>      = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1201,    <span class="comment">/*!&lt; Start bit sent  */</span>
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <span class="comment">/* SR2 register flags */</span>
<a name="l00147"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329ab4c0e55798dcb59328bf8a816b625a32">00147</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329ab4c0e55798dcb59328bf8a816b625a32">I2C_ITPENDINGBIT_WAKEUPFROMHALT</a>      = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x2220,    <span class="comment">/*!&lt; Wake Up From Halt  */</span>
<a name="l00148"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a81286bddfdaa0b9ba12b29fe9f22adf9">00148</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a81286bddfdaa0b9ba12b29fe9f22adf9">I2C_ITPENDINGBIT_OVERRUNUNDERRUN</a>     = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x2108,    <span class="comment">/*!&lt; Overrun/Underrun  */</span>
<a name="l00149"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a5db220c827a23529eeb5a4ce12820799">00149</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a5db220c827a23529eeb5a4ce12820799">I2C_ITPENDINGBIT_ACKNOWLEDGEFAILURE</a>  = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x2104,    <span class="comment">/*!&lt; Acknowledge Failure  */</span>
<a name="l00150"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329aa17dcb237347102cc2866a3caa69ef70">00150</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329aa17dcb237347102cc2866a3caa69ef70">I2C_ITPENDINGBIT_ARBITRATIONLOSS</a>     = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x2102,    <span class="comment">/*!&lt; Arbitration Loss  */</span>
<a name="l00151"></a><a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a4390b0208bebb6bded56070d6793092f">00151</a>     <a class="code" href="group__i2c__exported__types.html#gga073a1d724d4d4804dc509795a7c06329a4390b0208bebb6bded56070d6793092f">I2C_ITPENDINGBIT_BUSERROR</a>            = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x2101     <span class="comment">/*!&lt; Misplaced Start or Stop condition */</span>
<a name="l00152"></a>00152 } <a class="code" href="group__i2c__exported__types.html#ga073a1d724d4d4804dc509795a7c06329" title="I2C Pending bits Elements values convention: 0xXYZZ X = SRx registers index X = 1 : SR1 X = 2 : SR2 Y...">I2C_ITPendingBit_TypeDef</a>;
<a name="l00153"></a>00153 <span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">/**</span>
<a name="l00155"></a>00155 <span class="comment">  * @brief I2C possible events</span>
<a name="l00156"></a>00156 <span class="comment">  * Values convention: 0xXXYY</span>
<a name="l00157"></a>00157 <span class="comment">  * XX = Event SR3 corresponding value</span>
<a name="l00158"></a>00158 <span class="comment">  * YY = Event SR1 corresponding value</span>
<a name="l00159"></a>00159 <span class="comment">  * @note if Event = EV3_2 the rule above does not apply</span>
<a name="l00160"></a>00160 <span class="comment">  * YY = Event SR2 corresponding value</span>
<a name="l00161"></a>00161 <span class="comment">  */</span>
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="group__i2c__exported__types.html#gadc952f191791c5a48a1b03dd0c0c6940">00163</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165   <span class="comment">/*========================================</span>
<a name="l00166"></a>00166 <span class="comment"></span>
<a name="l00167"></a>00167 <span class="comment">                       I2C Master Events (Events grouped in order of communication)</span>
<a name="l00168"></a>00168 <span class="comment">                                                          ==========================================*/</span><span class="comment"></span>
<a name="l00169"></a>00169 <span class="comment">  /**</span>
<a name="l00170"></a>00170 <span class="comment">    * @brief  Communication start</span>
<a name="l00171"></a>00171 <span class="comment">    *</span>
<a name="l00172"></a>00172 <span class="comment">    * After sending the START condition (I2C_GenerateSTART() function) the master</span>
<a name="l00173"></a>00173 <span class="comment">    * has to wait for this event. It means that the Start condition has been correctly</span>
<a name="l00174"></a>00174 <span class="comment">    * released on the I2C bus (the bus is free, no other devices is communicating).</span>
<a name="l00175"></a>00175 <span class="comment">    *</span>
<a name="l00176"></a>00176 <span class="comment">    */</span>
<a name="l00177"></a>00177   <span class="comment">/* --EV5 */</span>
<a name="l00178"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12">00178</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12" title="Communication start.">I2C_EVENT_MASTER_MODE_SELECT</a>               = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0301,  <span class="comment">/*!&lt; BUSY, MSL and SB flag */</span>
<a name="l00179"></a>00179 <span class="comment"></span>
<a name="l00180"></a>00180 <span class="comment">  /**</span>
<a name="l00181"></a>00181 <span class="comment">    * @brief  Address Acknowledge</span>
<a name="l00182"></a>00182 <span class="comment">    *</span>
<a name="l00183"></a>00183 <span class="comment">    * After checking on EV5 (start condition correctly released on the bus), the</span>
<a name="l00184"></a>00184 <span class="comment">    * master sends the address of the slave(s) with which it will communicate</span>
<a name="l00185"></a>00185 <span class="comment">    * (I2C_Send7bitAddress() function, it also determines the direction of the communication:</span>
<a name="l00186"></a>00186 <span class="comment">    * Master transmitter or Receiver).</span>
<a name="l00187"></a>00187 <span class="comment">    * Then the master has to wait that a slave acknowledges his address.</span>
<a name="l00188"></a>00188 <span class="comment">    * If an acknowledge is sent on the bus, one of the following events will</span>
<a name="l00189"></a>00189 <span class="comment">    * be set:</span>
<a name="l00190"></a>00190 <span class="comment">    *</span>
<a name="l00191"></a>00191 <span class="comment">    *  1) In case of Master Receiver (7-bit addressing):</span>
<a name="l00192"></a>00192 <span class="comment">    *  the I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED event is set.</span>
<a name="l00193"></a>00193 <span class="comment">    *</span>
<a name="l00194"></a>00194 <span class="comment">    *  2) In case of Master Transmitter (7-bit addressing):</span>
<a name="l00195"></a>00195 <span class="comment">    *  the I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED is set</span>
<a name="l00196"></a>00196 <span class="comment">    *</span>
<a name="l00197"></a>00197 <span class="comment">    *  3) In case of 10-Bit addressing mode, the master (just after generating the START</span>
<a name="l00198"></a>00198 <span class="comment">    *  and checking on EV5) has to send the header of 10-bit addressing mode (I2C_SendData()</span>
<a name="l00199"></a>00199 <span class="comment">    *  function).</span>
<a name="l00200"></a>00200 <span class="comment">    *  Then master should wait on EV9. It means that the 10-bit addressing</span>
<a name="l00201"></a>00201 <span class="comment">    *  header has been correctly sent on the bus.</span>
<a name="l00202"></a>00202 <span class="comment">    *  Then master should send the second part of the 10-bit address (LSB) using</span>
<a name="l00203"></a>00203 <span class="comment">    *  the function I2C_Send7bitAddress(). Then master should wait for event EV6.</span>
<a name="l00204"></a>00204 <span class="comment">    *</span>
<a name="l00205"></a>00205 <span class="comment">    */</span>
<a name="l00206"></a>00206   <span class="comment">/* --EV6 */</span>
<a name="l00207"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a0dd62d5fe8139fc59833ed0d22078c5a">00207</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a0dd62d5fe8139fc59833ed0d22078c5a" title="Address Acknowledge.">I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</a> = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0782,  <span class="comment">/*!&lt; BUSY, MSL, ADDR, TXE and TRA flags */</span>
<a name="l00208"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940aa2190471d61b72baa80a3fd8b1670452">00208</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940aa2190471d61b72baa80a3fd8b1670452">I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED</a>    = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0302,  <span class="comment">/*!&lt; BUSY, MSL and ADDR flags */</span>
<a name="l00209"></a>00209   <span class="comment">/* --EV9 */</span>
<a name="l00210"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3b93540549a0ff643d24a94df45f5554">00210</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3b93540549a0ff643d24a94df45f5554">I2C_EVENT_MASTER_MODE_ADDRESS10</a>            = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0308,  <span class="comment">/*!&lt; BUSY, MSL and ADD10 flags */</span>
<a name="l00211"></a>00211 <span class="comment"></span>
<a name="l00212"></a>00212 <span class="comment">  /**</span>
<a name="l00213"></a>00213 <span class="comment">    * @brief Communication events</span>
<a name="l00214"></a>00214 <span class="comment">    *</span>
<a name="l00215"></a>00215 <span class="comment">    * If a communication is established (START condition generated and slave address</span>
<a name="l00216"></a>00216 <span class="comment">    * acknowledged) then the master has to check on one of the following events for</span>
<a name="l00217"></a>00217 <span class="comment">    * communication procedures:</span>
<a name="l00218"></a>00218 <span class="comment">    *</span>
<a name="l00219"></a>00219 <span class="comment">    * 1) Master Receiver mode: The master has to wait on the event EV7 then to read</span>
<a name="l00220"></a>00220 <span class="comment">    *    the data received from the slave (I2C_ReceiveData() function).</span>
<a name="l00221"></a>00221 <span class="comment">    *</span>
<a name="l00222"></a>00222 <span class="comment">    * 2) Master Transmitter mode: The master has to send data (I2C_SendData()</span>
<a name="l00223"></a>00223 <span class="comment">    *    function) then to wait on event EV8 or EV8_2.</span>
<a name="l00224"></a>00224 <span class="comment">    *    These two events are similar:</span>
<a name="l00225"></a>00225 <span class="comment">    *     - EV8 means that the data has been written in the data register and is</span>
<a name="l00226"></a>00226 <span class="comment">    *       being shifted out.</span>
<a name="l00227"></a>00227 <span class="comment">    *     - EV8_2 means that the data has been physically shifted out and output</span>
<a name="l00228"></a>00228 <span class="comment">    *       on the bus.</span>
<a name="l00229"></a>00229 <span class="comment">    *     In most cases, using EV8 is sufficient for the application.</span>
<a name="l00230"></a>00230 <span class="comment">    *     Using EV8_2 leads to a slower communication but ensures more reliable test.</span>
<a name="l00231"></a>00231 <span class="comment">    *     EV8_2 is also more suitable than EV8 for testing on the last data transmission</span>
<a name="l00232"></a>00232 <span class="comment">    *     (before Stop condition generation).</span>
<a name="l00233"></a>00233 <span class="comment">    *</span>
<a name="l00234"></a>00234 <span class="comment">    *  @note In case the user software does not guarantee that this event EV7 is</span>
<a name="l00235"></a>00235 <span class="comment">    *  managed before the current byte end of transfer, then user may check on EV7</span>
<a name="l00236"></a>00236 <span class="comment">    *  and BTF flag at the same time (ie. (I2C_EVENT_MASTER_BYTE_RECEIVED | I2C_FLAG_BTF)).</span>
<a name="l00237"></a>00237 <span class="comment">    *  In this case the communication may be slower.</span>
<a name="l00238"></a>00238 <span class="comment">    *</span>
<a name="l00239"></a>00239 <span class="comment">    */</span>
<a name="l00240"></a>00240   <span class="comment">/* Master RECEIVER mode -----------------------------*/</span>
<a name="l00241"></a>00241   <span class="comment">/* --EV7 */</span>
<a name="l00242"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae38623dd35f4ace875efbab96e004e75">00242</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae38623dd35f4ace875efbab96e004e75" title="Communication events.">I2C_EVENT_MASTER_BYTE_RECEIVED</a>             = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0340,  <span class="comment">/*!&lt; BUSY, MSL and RXNE flags */</span>
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   <span class="comment">/* Master TRANSMITTER mode --------------------------*/</span>
<a name="l00245"></a>00245   <span class="comment">/* --EV8 */</span>
<a name="l00246"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940af1cbe909a7d6d3061e56208fee0f7a54">00246</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940af1cbe909a7d6d3061e56208fee0f7a54">I2C_EVENT_MASTER_BYTE_TRANSMITTING</a>         = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0780,  <span class="comment">/*!&lt; TRA, BUSY, MSL, TXE flags */</span>
<a name="l00247"></a>00247   <span class="comment">/* --EV8_2 */</span>
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59">00249</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59">I2C_EVENT_MASTER_BYTE_TRANSMITTED</a>          = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0784,  <span class="comment">/*!&lt; EV8_2: TRA, BUSY, MSL, TXE and BTF flags */</span>
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   <span class="comment">/*========================================</span>
<a name="l00253"></a>00253 <span class="comment"></span>
<a name="l00254"></a>00254 <span class="comment">                       I2C Slave Events (Events grouped in order of communication)</span>
<a name="l00255"></a>00255 <span class="comment">                                                          ==========================================*/</span>
<a name="l00256"></a>00256 <span class="comment"></span>
<a name="l00257"></a>00257 <span class="comment">  /**</span>
<a name="l00258"></a>00258 <span class="comment">    * @brief  Communication start events</span>
<a name="l00259"></a>00259 <span class="comment">    *</span>
<a name="l00260"></a>00260 <span class="comment">    * Wait on one of these events at the start of the communication. It means that</span>
<a name="l00261"></a>00261 <span class="comment">    * the I2C peripheral detected a Start condition on the bus (generated by master</span>
<a name="l00262"></a>00262 <span class="comment">    * device) followed by the peripheral address.</span>
<a name="l00263"></a>00263 <span class="comment">    * The peripheral generates an ACK condition on the bus (if the acknowledge</span>
<a name="l00264"></a>00264 <span class="comment">    * feature is enabled through function I2C_AcknowledgeConfig()) and the events</span>
<a name="l00265"></a>00265 <span class="comment">    * listed above are set :</span>
<a name="l00266"></a>00266 <span class="comment">    *</span>
<a name="l00267"></a>00267 <span class="comment">    * 1) In normal case (only one address managed by the slave), when the address</span>
<a name="l00268"></a>00268 <span class="comment">    *   sent by the master matches the own address of the peripheral (configured by</span>
<a name="l00269"></a>00269 <span class="comment">    *   I2C_OwnAddress1 field) the I2C_EVENT_SLAVE_XXX_ADDRESS_MATCHED event is set</span>
<a name="l00270"></a>00270 <span class="comment">    *   (where XXX could be TRANSMITTER or RECEIVER).</span>
<a name="l00271"></a>00271 <span class="comment">    *</span>
<a name="l00272"></a>00272 <span class="comment">    * 2) In case the address sent by the master is General Call (address 0x00) and </span>
<a name="l00273"></a>00273 <span class="comment">    *   if the General Call is enabled for the peripheral (using function I2C_GeneralCallCmd()) </span>
<a name="l00274"></a>00274 <span class="comment">    *   the following event is set I2C_EVENT_SLAVE_GENERALCALLADDRESS_MATCHED.  </span>
<a name="l00275"></a>00275 <span class="comment">    * </span>
<a name="l00276"></a>00276 <span class="comment">    */</span>
<a name="l00277"></a>00277 
<a name="l00278"></a>00278   <span class="comment">/* --EV1  (all the events below are variants of EV1) */</span>
<a name="l00279"></a>00279   <span class="comment">/* 1) Case of One Single Address managed by the slave */</span>
<a name="l00280"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a414d6e34a1a8a9c5bd6cee6177fd18c2">00280</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a414d6e34a1a8a9c5bd6cee6177fd18c2" title="Communication start events.">I2C_EVENT_SLAVE_RECEIVER_ADDRESS_MATCHED</a>    = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0202,  <span class="comment">/*!&lt; BUSY and ADDR flags */</span>
<a name="l00281"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a238708b3ecc4171ce057a9de5725a173">00281</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a238708b3ecc4171ce057a9de5725a173">I2C_EVENT_SLAVE_TRANSMITTER_ADDRESS_MATCHED</a> = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0682,  <span class="comment">/*!&lt; TRA, BUSY, TXE and ADDR flags */</span>
<a name="l00282"></a>00282 
<a name="l00283"></a>00283   <span class="comment">/* 2) Case of General Call enabled for the slave */</span>
<a name="l00284"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940aec2253b167e38fa5f705ca49b54e4d1e">00284</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940aec2253b167e38fa5f705ca49b54e4d1e">I2C_EVENT_SLAVE_GENERALCALLADDRESS_MATCHED</a>  = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x1200,  <span class="comment">/*!&lt; EV2: GENCALL and BUSY flags */</span>
<a name="l00285"></a>00285 <span class="comment"></span>
<a name="l00286"></a>00286 <span class="comment">  /**</span>
<a name="l00287"></a>00287 <span class="comment">    * @brief  Communication events</span>
<a name="l00288"></a>00288 <span class="comment">    *</span>
<a name="l00289"></a>00289 <span class="comment">    * Wait on one of these events when EV1 has already been checked :</span>
<a name="l00290"></a>00290 <span class="comment">    *</span>
<a name="l00291"></a>00291 <span class="comment">    * - Slave RECEIVER mode:</span>
<a name="l00292"></a>00292 <span class="comment">    *     - EV2: When the application is expecting a data byte to be received.</span>
<a name="l00293"></a>00293 <span class="comment">    *     - EV4: When the application is expecting the end of the communication:</span>
<a name="l00294"></a>00294 <span class="comment">    *       master sends a stop condition and data transmission is stopped.</span>
<a name="l00295"></a>00295 <span class="comment">    *</span>
<a name="l00296"></a>00296 <span class="comment">    * - Slave Transmitter mode:</span>
<a name="l00297"></a>00297 <span class="comment">    *    - EV3: When a byte has been transmitted by the slave and the application</span>
<a name="l00298"></a>00298 <span class="comment">    *      is expecting the end of the byte transmission.</span>
<a name="l00299"></a>00299 <span class="comment">    *      The two events I2C_EVENT_SLAVE_BYTE_TRANSMITTED and I2C_EVENT_SLAVE_BYTE_TRANSMITTING</span>
<a name="l00300"></a>00300 <span class="comment">    *      are similar. The second one can optionally be used when the user software</span>
<a name="l00301"></a>00301 <span class="comment">    *      doesn&#39;t guarantee the EV3 is managed before the current byte end of transfer.</span>
<a name="l00302"></a>00302 <span class="comment">    *    - EV3_2: When the master sends a NACK in order to tell slave that data transmission</span>
<a name="l00303"></a>00303 <span class="comment">    *      shall end (before sending the STOP condition).</span>
<a name="l00304"></a>00304 <span class="comment">    *      In this case slave has to stop sending data bytes and expect a Stop</span>
<a name="l00305"></a>00305 <span class="comment">    *      condition on the bus.</span>
<a name="l00306"></a>00306 <span class="comment">    *</span>
<a name="l00307"></a>00307 <span class="comment">    *  @note In case the  user software does not guarantee that the event EV2 is</span>
<a name="l00308"></a>00308 <span class="comment">    *  managed before the current byte end of transfer, then user may check on EV2</span>
<a name="l00309"></a>00309 <span class="comment">    *  and BTF flag at the same time (ie. (I2C_EVENT_SLAVE_BYTE_RECEIVED | I2C_FLAG_BTF)).</span>
<a name="l00310"></a>00310 <span class="comment">    *  In this case the communication may be slower.</span>
<a name="l00311"></a>00311 <span class="comment">    *</span>
<a name="l00312"></a>00312 <span class="comment">    */</span>
<a name="l00313"></a>00313   <span class="comment">/* Slave RECEIVER mode --------------------------*/</span>
<a name="l00314"></a>00314   <span class="comment">/* --EV2 */</span>
<a name="l00315"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a6c19b142f8f4af7dc992d98ee5676bab">00315</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a6c19b142f8f4af7dc992d98ee5676bab" title="Communication events.">I2C_EVENT_SLAVE_BYTE_RECEIVED</a>              = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0240,  <span class="comment">/*!&lt; BUSY and RXNE flags */</span>
<a name="l00316"></a>00316   <span class="comment">/* --EV4  */</span>
<a name="l00317"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a45130245afbc751377ef3dd7fec0757f">00317</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a45130245afbc751377ef3dd7fec0757f">I2C_EVENT_SLAVE_STOP_DETECTED</a>              = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0010,  <span class="comment">/*!&lt; STOPF flag */</span>
<a name="l00318"></a>00318 
<a name="l00319"></a>00319   <span class="comment">/* Slave TRANSMITTER mode -----------------------*/</span>
<a name="l00320"></a>00320   <span class="comment">/* --EV3 */</span>
<a name="l00321"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a5ce6a49f619d16f106554359c3b8224e">00321</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a5ce6a49f619d16f106554359c3b8224e">I2C_EVENT_SLAVE_BYTE_TRANSMITTED</a>           = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0684,  <span class="comment">/*!&lt; TRA, BUSY, TXE and BTF flags */</span>
<a name="l00322"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a2855d1b9017678a4d4c945a9c6b94e7b">00322</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a2855d1b9017678a4d4c945a9c6b94e7b">I2C_EVENT_SLAVE_BYTE_TRANSMITTING</a>          = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0680,  <span class="comment">/*!&lt; TRA, BUSY and TXE flags */</span>
<a name="l00323"></a>00323   <span class="comment">/* --EV3_2 */</span>
<a name="l00324"></a><a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a8219a1ed637f4b83d356a96bf8fb0537">00324</a>   <a class="code" href="group__i2c__exported__types.html#ggadc952f191791c5a48a1b03dd0c0c6940a8219a1ed637f4b83d356a96bf8fb0537">I2C_EVENT_SLAVE_ACK_FAILURE</a>                = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)0x0004  <span class="comment">/*!&lt; AF flag */</span>
<a name="l00325"></a>00325 } <a class="code" href="group__i2c__exported__types.html#gadc952f191791c5a48a1b03dd0c0c6940" title="I2C possible events Values convention: 0xXXYY XX = Event SR3 corresponding value YY = Event SR1 corre...">I2C_Event_TypeDef</a>;
<a name="l00326"></a>00326 <span class="comment"></span>
<a name="l00327"></a>00327 <span class="comment">/**</span>
<a name="l00328"></a>00328 <span class="comment">  * @}</span>
<a name="l00329"></a>00329 <span class="comment">  */</span>
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 <span class="comment">/* Exported constants --------------------------------------------------------*/</span><span class="comment"></span>
<a name="l00332"></a>00332 <span class="comment">/** @addtogroup I2C_Exported_Constants</span>
<a name="l00333"></a>00333 <span class="comment">  * @{</span>
<a name="l00334"></a>00334 <span class="comment">  */</span>
<a name="l00335"></a><a class="code" href="group__i2c__exported__constants.html#gab7bc718356f2b3a2ebd8963d0d83903b">00335</a> <span class="preprocessor">#define I2C_MAX_STANDARD_FREQ ((uint32_t)100000)</span>
<a name="l00336"></a><a class="code" href="group__i2c__exported__constants.html#gaae6d3ef3ef7cd3cfc7695b8fc47865bf">00336</a> <span class="preprocessor"></span><span class="preprocessor">#define I2C_MAX_FAST_FREQ     ((uint32_t)400000)</span>
<a name="l00337"></a>00337 <span class="preprocessor"></span><span class="preprocessor">#if defined(STM8S208) || defined(STM8S207) || defined(STM8S007) </span>
<a name="l00338"></a>00338 <span class="preprocessor"></span><span class="preprocessor"> #define I2C_MAX_INPUT_FREQ     ((uint8_t)24)</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00340"></a><a class="code" href="group__i2c__exported__constants.html#gad3bd1ab1ed201a196e9ec9f24488a26d">00340</a> <span class="preprocessor"></span><span class="preprocessor"> #define I2C_MAX_INPUT_FREQ     ((uint8_t)16)</span>
<a name="l00341"></a>00341 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00342"></a>00342 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00343"></a>00343 <span class="comment">/**</span>
<a name="l00344"></a>00344 <span class="comment">  *@}</span>
<a name="l00345"></a>00345 <span class="comment">  */</span>
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 <span class="comment">/* Exported macros -----------------------------------------------------------*/</span>
<a name="l00348"></a>00348 <span class="comment">/* Private macros ------------------------------------------------------------*/</span>
<a name="l00349"></a>00349 <span class="comment"></span>
<a name="l00350"></a>00350 <span class="comment">/** @addtogroup I2C_Private_Macros</span>
<a name="l00351"></a>00351 <span class="comment">  * @{</span>
<a name="l00352"></a>00352 <span class="comment">  */</span>
<a name="l00353"></a>00353 <span class="comment"></span>
<a name="l00354"></a>00354 <span class="comment">/**</span>
<a name="l00355"></a>00355 <span class="comment">  * @brief  Macro used by the assert function to check the different functions parameters.</span>
<a name="l00356"></a>00356 <span class="comment">  */</span>
<a name="l00357"></a>00357 <span class="comment"></span>
<a name="l00358"></a>00358 <span class="comment">/**</span>
<a name="l00359"></a>00359 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C duty cycles.</span>
<a name="l00360"></a>00360 <span class="comment">  */</span>
<a name="l00361"></a><a class="code" href="group__i2c__private__macros.html#ga7fb242f468edf62877d98c5ff3ed0745">00361</a> <span class="preprocessor">#define IS_I2C_DUTYCYCLE_OK(DUTY) \</span>
<a name="l00362"></a>00362 <span class="preprocessor">  (((DUTY) == I2C_DUTYCYCLE_2) || \</span>
<a name="l00363"></a>00363 <span class="preprocessor">   ((DUTY) == I2C_DUTYCYCLE_16_9))</span>
<a name="l00364"></a>00364 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00365"></a>00365 <span class="comment">/**</span>
<a name="l00366"></a>00366 <span class="comment">  * @brief   Macro used by the assert function to check the different acknowledgement configuration</span>
<a name="l00367"></a>00367 <span class="comment">  */</span>
<a name="l00368"></a><a class="code" href="group__i2c__private__macros.html#ga6dbc91bfba7009086b65f6ae21bbeeff">00368</a> <span class="preprocessor">#define IS_I2C_ACK_OK(ACK) \</span>
<a name="l00369"></a>00369 <span class="preprocessor">  (((ACK) == I2C_ACK_NONE) || \</span>
<a name="l00370"></a>00370 <span class="preprocessor">   ((ACK) == I2C_ACK_CURR) || \</span>
<a name="l00371"></a>00371 <span class="preprocessor">   ((ACK) == I2C_ACK_NEXT))</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00373"></a>00373 <span class="comment">/**</span>
<a name="l00374"></a>00374 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C addressing modes.</span>
<a name="l00375"></a>00375 <span class="comment">  */</span>
<a name="l00376"></a><a class="code" href="group__i2c__private__macros.html#ga5e4db3aaf4339bd77e2321a853a4c88a">00376</a> <span class="preprocessor">#define IS_I2C_ADDMODE_OK(ADDMODE) \</span>
<a name="l00377"></a>00377 <span class="preprocessor">  (((ADDMODE) == I2C_ADDMODE_7BIT) || \</span>
<a name="l00378"></a>00378 <span class="preprocessor">   ((ADDMODE) == I2C_ADDMODE_10BIT))</span>
<a name="l00379"></a>00379 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00380"></a>00380 <span class="comment">/**</span>
<a name="l00381"></a>00381 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C interrupt types.</span>
<a name="l00382"></a>00382 <span class="comment">  */</span>
<a name="l00383"></a><a class="code" href="group__i2c__private__macros.html#ga6f6de160104265e8e0284d7dddcf0f1f">00383</a> <span class="preprocessor">#define IS_I2C_INTERRUPT_OK(IT) \</span>
<a name="l00384"></a>00384 <span class="preprocessor">  (((IT) == I2C_IT_ERR)     || \</span>
<a name="l00385"></a>00385 <span class="preprocessor">   ((IT) == I2C_IT_EVT)     || \</span>
<a name="l00386"></a>00386 <span class="preprocessor">   ((IT) == I2C_IT_BUF)     || \</span>
<a name="l00387"></a>00387 <span class="preprocessor">   ((IT) == (I2C_IT_ERR | I2C_IT_EVT)) || \</span>
<a name="l00388"></a>00388 <span class="preprocessor">   ((IT) == (I2C_IT_ERR | I2C_IT_BUF)) || \</span>
<a name="l00389"></a>00389 <span class="preprocessor">   ((IT) == (I2C_IT_EVT | I2C_IT_BUF)) || \</span>
<a name="l00390"></a>00390 <span class="preprocessor">   ((IT) == (I2C_IT_EVT | I2C_IT_BUF | I2C_IT_ERR)))</span>
<a name="l00391"></a>00391 <span class="preprocessor"></span><span class="comment">/**</span>
<a name="l00392"></a>00392 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C communcation direction.</span>
<a name="l00393"></a>00393 <span class="comment">  */</span>
<a name="l00394"></a><a class="code" href="group__i2c__private__macros.html#ga87a1c8e8468a9439a19ad1b05730bcbe">00394</a> <span class="preprocessor">#define IS_I2C_DIRECTION_OK(DIR) \</span>
<a name="l00395"></a>00395 <span class="preprocessor">  (((DIR) == I2C_DIRECTION_TX) || \</span>
<a name="l00396"></a>00396 <span class="preprocessor">   ((DIR) == I2C_DIRECTION_RX))</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00398"></a>00398 <span class="comment">/**</span>
<a name="l00399"></a>00399 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C flags.</span>
<a name="l00400"></a>00400 <span class="comment">  */</span>
<a name="l00401"></a><a class="code" href="group__i2c__private__macros.html#ga82bad60b5c9929415d6ede2d6b1b148c">00401</a> <span class="preprocessor">#define IS_I2C_FLAG_OK(FLAG) \</span>
<a name="l00402"></a>00402 <span class="preprocessor">  (((FLAG) == I2C_FLAG_TXEMPTY)         || \</span>
<a name="l00403"></a>00403 <span class="preprocessor">   ((FLAG) == I2C_FLAG_RXNOTEMPTY)       || \</span>
<a name="l00404"></a>00404 <span class="preprocessor">   ((FLAG) == I2C_FLAG_STOPDETECTION)      || \</span>
<a name="l00405"></a>00405 <span class="preprocessor">   ((FLAG) == I2C_FLAG_HEADERSENT)       || \</span>
<a name="l00406"></a>00406 <span class="preprocessor">   ((FLAG) == I2C_FLAG_TRANSFERFINISHED)   || \</span>
<a name="l00407"></a>00407 <span class="preprocessor">   ((FLAG) == I2C_FLAG_ADDRESSSENTMATCHED)  || \</span>
<a name="l00408"></a>00408 <span class="preprocessor">   ((FLAG) == I2C_FLAG_STARTDETECTION)    || \</span>
<a name="l00409"></a>00409 <span class="preprocessor">   ((FLAG) == I2C_FLAG_WAKEUPFROMHALT)    || \</span>
<a name="l00410"></a>00410 <span class="preprocessor">   ((FLAG) == I2C_FLAG_OVERRUNUNDERRUN)    || \</span>
<a name="l00411"></a>00411 <span class="preprocessor">   ((FLAG) == I2C_FLAG_ACKNOWLEDGEFAILURE)  || \</span>
<a name="l00412"></a>00412 <span class="preprocessor">   ((FLAG) == I2C_FLAG_ARBITRATIONLOSS)    || \</span>
<a name="l00413"></a>00413 <span class="preprocessor">   ((FLAG) == I2C_FLAG_BUSERROR)       || \</span>
<a name="l00414"></a>00414 <span class="preprocessor">   ((FLAG) == I2C_FLAG_GENERALCALL)      || \</span>
<a name="l00415"></a>00415 <span class="preprocessor">   ((FLAG) == I2C_FLAG_TRANSMITTERRECEIVER) || \</span>
<a name="l00416"></a>00416 <span class="preprocessor">   ((FLAG) == I2C_FLAG_BUSBUSY) || \</span>
<a name="l00417"></a>00417 <span class="preprocessor">   ((FLAG) == I2C_FLAG_MASTERSLAVE))</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span><span class="comment">/**</span>
<a name="l00419"></a>00419 <span class="comment">  * @brief   Macro used by the assert function to check the I2C flags to clear.</span>
<a name="l00420"></a>00420 <span class="comment">  */</span>
<a name="l00421"></a>00421 
<a name="l00422"></a><a class="code" href="group__i2c__private__macros.html#ga446fe3953d7dfa28c77f083ada212e40">00422</a> <span class="preprocessor">#define IS_I2C_CLEAR_FLAG_OK(FLAG) ((((uint16_t)(FLAG) &amp; (uint16_t)0xFD00) == 0x00) \</span>
<a name="l00423"></a>00423 <span class="preprocessor">                                     &amp;&amp; ((uint16_t)(FLAG) != 0x00))</span>
<a name="l00424"></a>00424 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00425"></a>00425 <span class="comment">/**</span>
<a name="l00426"></a>00426 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C possible pending bits.</span>
<a name="l00427"></a>00427 <span class="comment">  */</span>
<a name="l00428"></a><a class="code" href="group__i2c__private__macros.html#gacd541ed3eeb8e3224cf31808e6afc7d3">00428</a> <span class="preprocessor">#define IS_I2C_ITPENDINGBIT_OK(ITPENDINGBIT) \</span>
<a name="l00429"></a>00429 <span class="preprocessor">   (((ITPENDINGBIT) == I2C_ITPENDINGBIT_TXEMPTY)                                        || \</span>
<a name="l00430"></a>00430 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_RXNOTEMPTY)                             || \</span>
<a name="l00431"></a>00431 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_STOPDETECTION)                  || \</span>
<a name="l00432"></a>00432 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_HEADERSENT)                             || \</span>
<a name="l00433"></a>00433 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_TRANSFERFINISHED)       || \</span>
<a name="l00434"></a>00434 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_ADDRESSSENTMATCHED) || \</span>
<a name="l00435"></a>00435 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_STARTDETECTION)                 || \</span>
<a name="l00436"></a>00436 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_WAKEUPFROMHALT)                 || \</span>
<a name="l00437"></a>00437 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_OVERRUNUNDERRUN)                || \</span>
<a name="l00438"></a>00438 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_ACKNOWLEDGEFAILURE) || \</span>
<a name="l00439"></a>00439 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_ARBITRATIONLOSS)                || \</span>
<a name="l00440"></a>00440 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_BUSERROR))</span>
<a name="l00441"></a>00441 <span class="preprocessor"></span>    <span class="comment"></span>
<a name="l00442"></a>00442 <span class="comment">/**</span>
<a name="l00443"></a>00443 <span class="comment">  * @brief  Macro used by the assert function to check the different I2C possible</span>
<a name="l00444"></a>00444 <span class="comment">  *   pending bits to clear by writing 0.</span>
<a name="l00445"></a>00445 <span class="comment">  */</span>
<a name="l00446"></a><a class="code" href="group__i2c__private__macros.html#gadc034d46f457a6b8e1513dad2bf3853c">00446</a> <span class="preprocessor">#define IS_I2C_CLEAR_ITPENDINGBIT_OK(ITPENDINGBIT) \</span>
<a name="l00447"></a>00447 <span class="preprocessor">   (((ITPENDINGBIT) == I2C_ITPENDINGBIT_WAKEUPFROMHALT)     || \</span>
<a name="l00448"></a>00448 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_OVERRUNUNDERRUN)    || \</span>
<a name="l00449"></a>00449 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_ACKNOWLEDGEFAILURE) || \</span>
<a name="l00450"></a>00450 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_ARBITRATIONLOSS)    || \</span>
<a name="l00451"></a>00451 <span class="preprocessor">    ((ITPENDINGBIT) == I2C_ITPENDINGBIT_BUSERROR))</span>
<a name="l00452"></a>00452 <span class="preprocessor"></span>   <span class="comment"></span>
<a name="l00453"></a>00453 <span class="comment">/**</span>
<a name="l00454"></a>00454 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C possible events.</span>
<a name="l00455"></a>00455 <span class="comment">  */</span>
<a name="l00456"></a><a class="code" href="group__i2c__private__macros.html#gac3852d50976e6b2ffec7d740d098f8d5">00456</a> <span class="preprocessor">#define IS_I2C_EVENT_OK(EVENT) (((EVENT) == I2C_EVENT_SLAVE_TRANSMITTER_ADDRESS_MATCHED) || \</span>
<a name="l00457"></a>00457 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_SLAVE_RECEIVER_ADDRESS_MATCHED) || \</span>
<a name="l00458"></a>00458 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_SLAVE_GENERALCALLADDRESS_MATCHED) || \</span>
<a name="l00459"></a>00459 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_SLAVE_BYTE_RECEIVED) || \</span>
<a name="l00460"></a>00460 <span class="preprocessor">                             ((EVENT) == (I2C_EVENT_SLAVE_BYTE_RECEIVED | (uint16_t)I2C_FLAG_GENERALCALL)) || \</span>
<a name="l00461"></a>00461 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_SLAVE_BYTE_TRANSMITTED) || \</span>
<a name="l00462"></a>00462 <span class="preprocessor">                             ((EVENT) == (I2C_EVENT_SLAVE_BYTE_TRANSMITTED | (uint16_t)I2C_FLAG_GENERALCALL)) || \</span>
<a name="l00463"></a>00463 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_SLAVE_ACK_FAILURE) || \</span>
<a name="l00464"></a>00464 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_SLAVE_STOP_DETECTED) || \</span>
<a name="l00465"></a>00465 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_MODE_SELECT) || \</span>
<a name="l00466"></a>00466 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED) || \</span>
<a name="l00467"></a>00467 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED) || \</span>
<a name="l00468"></a>00468 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_BYTE_RECEIVED) || \</span>
<a name="l00469"></a>00469 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_BYTE_TRANSMITTED) || \</span>
<a name="l00470"></a>00470 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_BYTE_TRANSMITTING) || \</span>
<a name="l00471"></a>00471 <span class="preprocessor">                             ((EVENT) == I2C_EVENT_MASTER_MODE_ADDRESS10))</span>
<a name="l00472"></a>00472 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00473"></a>00473 <span class="comment">/**</span>
<a name="l00474"></a>00474 <span class="comment">  * @brief   Macro used by the assert function to check the different I2C possible own address.</span>
<a name="l00475"></a>00475 <span class="comment">  */</span>
<a name="l00476"></a><a class="code" href="group__i2c__private__macros.html#gab480ff99f97b0d20e28a3cc985bcf715">00476</a> <span class="preprocessor">#define IS_I2C_OWN_ADDRESS_OK(ADDRESS) \</span>
<a name="l00477"></a>00477 <span class="preprocessor">  ((ADDRESS) &lt;= (uint16_t)0x03FF)</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span>
<a name="l00479"></a>00479 <span class="comment">/* The address must be even */</span>
<a name="l00480"></a><a class="code" href="group__i2c__private__macros.html#gae0812a8faca675360a8f475d9ff77bb7">00480</a> <span class="preprocessor">#define IS_I2C_ADDRESS_OK(ADD) \</span>
<a name="l00481"></a>00481 <span class="preprocessor">  (((ADD) &amp; (uint8_t)0x01) == (uint8_t)0x00)</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00483"></a>00483 <span class="comment">/**</span>
<a name="l00484"></a>00484 <span class="comment">  * @brief   Macro used by the assert function to check that I2C Input clock frequency must be between 1MHz and 50MHz.</span>
<a name="l00485"></a>00485 <span class="comment">  */</span>
<a name="l00486"></a><a class="code" href="group__i2c__private__macros.html#ga9924e634fc251f361ab1b4be88fd0989">00486</a> <span class="preprocessor">#define IS_I2C_INPUT_CLOCK_FREQ_OK(FREQ) \</span>
<a name="l00487"></a>00487 <span class="preprocessor">  (((FREQ) &gt;= (uint8_t)1) &amp;&amp; ((FREQ) &lt;= I2C_MAX_INPUT_FREQ))</span>
<a name="l00488"></a>00488 <span class="preprocessor"></span>
<a name="l00489"></a>00489 <span class="comment"></span>
<a name="l00490"></a>00490 <span class="comment">/**</span>
<a name="l00491"></a>00491 <span class="comment">  * @brief   Macro used by the assert function to check that I2C Output clock frequency must be between 1Hz and 400kHz.</span>
<a name="l00492"></a>00492 <span class="comment">  */</span>
<a name="l00493"></a><a class="code" href="group__i2c__private__macros.html#ga373cc47709aceea8515b539e1c70cf95">00493</a> <span class="preprocessor">#define IS_I2C_OUTPUT_CLOCK_FREQ_OK(FREQ) \</span>
<a name="l00494"></a>00494 <span class="preprocessor">  (((FREQ) &gt;= (uint8_t)1) &amp;&amp; ((FREQ) &lt;= I2C_MAX_FAST_FREQ))</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00496"></a>00496 <span class="comment">/**</span>
<a name="l00497"></a>00497 <span class="comment">  * @}</span>
<a name="l00498"></a>00498 <span class="comment">  */</span>
<a name="l00499"></a>00499 
<a name="l00500"></a>00500 <span class="comment">/* Exported functions ------------------------------------------------------- */</span><span class="comment"></span>
<a name="l00501"></a>00501 <span class="comment">/** @addtogroup I2C_Exported_Functions</span>
<a name="l00502"></a>00502 <span class="comment">  * @{</span>
<a name="l00503"></a>00503 <span class="comment">  */</span>
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga475ebf7c2c0f64e9631fb1ed82d6bb32" title="Deinitializes the I2C peripheral registers to their default reset values.">I2C_DeInit</a>(<span class="keywordtype">void</span>);
<a name="l00506"></a>00506 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga1b854d035a3bb4b30350c57022d94f4d" title="Initializes the I2C according to the specified parameters in standard or fast mode.">I2C_Init</a>(<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> OutputClockFrequencyHz, <a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="code" href="tags_8txt.html#a86325fba0d78dc041798f8b9b781a14b">OwnAddress</a>, 
<a name="l00507"></a>00507               <a class="code" href="group__i2c__exported__types.html#gac0fae3e51f48b185d7413e529ef5dd1d" title="I2C duty cycle (fast mode only)">I2C_DutyCycle_TypeDef</a> <a class="code" href="tags_8txt.html#a1b07863949a6a577618fe9ed389600ac">I2C_DutyCycle</a>, <a class="code" href="group__i2c__exported__types.html#gaa4e039897cc642ec3abd95a1fa1cc1b3" title="I2C Acknowledgement configuration.">I2C_Ack_TypeDef</a> <a class="code" href="tags_8txt.html#a1bec387141a7bd3a0f6abcde5043bc5d">Ack</a>, 
<a name="l00508"></a>00508               <a class="code" href="group__i2c__exported__types.html#ga183d9b2cf41469e7f6b7c00750e5a7ea" title="I2C Addressing Mode (slave mode only)">I2C_AddMode_TypeDef</a> <a class="code" href="tags_8txt.html#a98076709d77e1e81d157875e34e9fb16">AddMode</a>, <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> InputClockFrequencyMHz );
<a name="l00509"></a>00509 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#gae696416c6624783e6f3240742a1a474f" title="Enables or disables the I2C peripheral.">I2C_Cmd</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00510"></a>00510 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga11fc3ef503340e7c395419cf0f04e3e6" title="Enables or disables the I2C General Call feature.">I2C_GeneralCallCmd</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00511"></a>00511 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga176b1151ef1f0735fcf2df35fe3c93f1" title="Generates I2C communication START condition.">I2C_GenerateSTART</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00512"></a>00512 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68" title="Generates I2C communication STOP condition.">I2C_GenerateSTOP</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00513"></a>00513 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga214d2beb6f03f51a0b5e8405e6dd4884" title="Enables or disables I2C software reset.">I2C_SoftwareResetCmd</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00514"></a>00514 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga0f1d010931085ffefcab387579b87557" title="Enables or disables the I2C clock stretching.">I2C_StretchClockCmd</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00515"></a>00515 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga002310a2fd258c4cb013a7e8417f153b" title="Enable or Disable the I2C acknowledge and position acknowledge feature.">I2C_AcknowledgeConfig</a>(<a class="code" href="group__i2c__exported__types.html#gaa4e039897cc642ec3abd95a1fa1cc1b3" title="I2C Acknowledgement configuration.">I2C_Ack_TypeDef</a> <a class="code" href="tags_8txt.html#a1bec387141a7bd3a0f6abcde5043bc5d">Ack</a>);
<a name="l00516"></a>00516 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#gaad5fc0ce0378ec0e9616523ecf271a95" title="Selects the specified I2C fast mode duty cycle.">I2C_FastModeDutyCycleConfig</a>(<a class="code" href="group__i2c__exported__types.html#gac0fae3e51f48b185d7413e529ef5dd1d" title="I2C duty cycle (fast mode only)">I2C_DutyCycle_TypeDef</a> <a class="code" href="tags_8txt.html#a1b07863949a6a577618fe9ed389600ac">I2C_DutyCycle</a>);
<a name="l00517"></a>00517 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga2ef0a21551d54216f84bd2077fe8bd6b" title="Enables or disables the specified I2C interrupt.">I2C_ITConfig</a>(<a class="code" href="group__i2c__exported__types.html#gaed6510c550547134afb30f717f17da88" title="I2C Interrupt sources Warning: the values correspond to the bit position in the ITR register...">I2C_IT_TypeDef</a> I2C_IT, <a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState);
<a name="l00518"></a>00518 <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__i2c__exported__functions.html#ga73e8870450debd272f1bb0cea9e77d52" title="Returns the most recent received data.">I2C_ReceiveData</a>(<span class="keywordtype">void</span>);
<a name="l00519"></a>00519 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#ga865f03e165537185ccb1e5493bfb62ae" title="Transmits the 7-bit address (to select the) slave device.">I2C_Send7bitAddress</a>(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> Address, <a class="code" href="group__i2c__exported__types.html#gac5294e7f2dfbf66c835de2f81f9edc72" title="I2C transfer direction Warning: the values correspond to the ADD0 bit position in the OARL register...">I2C_Direction_TypeDef</a> Direction);
<a name="l00520"></a>00520 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#gad9f80b2c416bdf1ac578859a11e68a40" title="Send a byte by writing in the DR register.">I2C_SendData</a>(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> Data);<span class="comment"></span>
<a name="l00521"></a>00521 <span class="comment">/**</span>
<a name="l00522"></a>00522 <span class="comment"> * @brief</span>
<a name="l00523"></a>00523 <span class="comment"> ****************************************************************************************</span>
<a name="l00524"></a>00524 <span class="comment"> *</span>
<a name="l00525"></a>00525 <span class="comment"> *                         I2C State Monitoring Functions</span>
<a name="l00526"></a>00526 <span class="comment"> *</span>
<a name="l00527"></a>00527 <span class="comment"> ****************************************************************************************</span>
<a name="l00528"></a>00528 <span class="comment"> * This I2C driver provides three different ways for I2C state monitoring</span>
<a name="l00529"></a>00529 <span class="comment"> *  depending on the application requirements and constraints:</span>
<a name="l00530"></a>00530 <span class="comment"> *</span>
<a name="l00531"></a>00531 <span class="comment"> *</span>
<a name="l00532"></a>00532 <span class="comment"> * 1) Basic state monitoring:</span>
<a name="l00533"></a>00533 <span class="comment"> *    Using I2C_CheckEvent() function:</span>
<a name="l00534"></a>00534 <span class="comment"> *    It compares the status registers (SR1, SR2 and SR3) content to a given event</span>
<a name="l00535"></a>00535 <span class="comment"> *    (can be the combination of one or more flags).</span>
<a name="l00536"></a>00536 <span class="comment"> *    It returns SUCCESS if the current status includes the given flags</span>
<a name="l00537"></a>00537 <span class="comment"> *    and returns ERROR if one or more flags are missing in the current status.</span>
<a name="l00538"></a>00538 <span class="comment"> *    - When to use:</span>
<a name="l00539"></a>00539 <span class="comment"> *      - This function is suitable for most applications as well as for startup</span>
<a name="l00540"></a>00540 <span class="comment"> *      activity since the events are fully described in the product reference manual</span>
<a name="l00541"></a>00541 <span class="comment"> *      (RM0016).</span>
<a name="l00542"></a>00542 <span class="comment"> *      - It is also suitable for users who need to define their own events.</span>
<a name="l00543"></a>00543 <span class="comment"> *    - Limitations:</span>
<a name="l00544"></a>00544 <span class="comment"> *      - If an error occurs (ie. error flags are set besides to the monitored flags),</span>
<a name="l00545"></a>00545 <span class="comment"> *        the I2C_CheckEvent() function may return SUCCESS despite the communication</span>
<a name="l00546"></a>00546 <span class="comment"> *        hold or corrupted real state.</span>
<a name="l00547"></a>00547 <span class="comment"> *        In this case, it is advised to use error interrupts to monitor the error</span>
<a name="l00548"></a>00548 <span class="comment"> *        events and handle them in the interrupt IRQ handler.</span>
<a name="l00549"></a>00549 <span class="comment"> *</span>
<a name="l00550"></a>00550 <span class="comment"> *        @note</span>
<a name="l00551"></a>00551 <span class="comment"> *        For error management, it is advised to use the following functions:</span>
<a name="l00552"></a>00552 <span class="comment"> *          - I2C_ITConfig() to configure and enable the error interrupts (I2C_IT_ERR).</span>
<a name="l00553"></a>00553 <span class="comment"> *          - I2C_IRQHandler() which is called when the I2C interrupts occur.</span>
<a name="l00554"></a>00554 <span class="comment"> *          - I2C_GetFlagStatus() or I2C_GetITStatus() to be called into the</span>
<a name="l00555"></a>00555 <span class="comment"> *           I2Cx_IRQHandler() function in order to determine which error occurred.</span>
<a name="l00556"></a>00556 <span class="comment"> *          - I2C_ClearFlag() or I2C_ClearITPendingBit() and/or I2C_SoftwareResetCmd()</span>
<a name="l00557"></a>00557 <span class="comment"> *            and/or I2C_GenerateStop() in order to clear the error flag and</span>
<a name="l00558"></a>00558 <span class="comment"> *            source and return to correct communication status.</span>
<a name="l00559"></a>00559 <span class="comment"> *</span>
<a name="l00560"></a>00560 <span class="comment"> *</span>
<a name="l00561"></a>00561 <span class="comment"> *  2) Advanced state monitoring:</span>
<a name="l00562"></a>00562 <span class="comment"> *     Using the function I2C_GetLastEvent() which returns the image of both SR1</span>
<a name="l00563"></a>00563 <span class="comment"> *     &amp; SR3 status registers in a single word (uint16_t) (Status Register 3 value</span>
<a name="l00564"></a>00564 <span class="comment"> *     is shifted left by 8 bits and concatenated to Status Register 1).</span>
<a name="l00565"></a>00565 <span class="comment"> *     - When to use:</span>
<a name="l00566"></a>00566 <span class="comment"> *       - This function is suitable for the same applications above but it allows to</span>
<a name="l00567"></a>00567 <span class="comment"> *         overcome the limitations of I2C_GetFlagStatus() function (see below).</span>
<a name="l00568"></a>00568 <span class="comment"> *         The returned value could be compared to events already defined in the</span>
<a name="l00569"></a>00569 <span class="comment"> *         library (stm8s_i2c.h) or to custom values defined by user.</span>
<a name="l00570"></a>00570 <span class="comment"> *       - This function is suitable when multiple flags are monitored at the same time.</span>
<a name="l00571"></a>00571 <span class="comment"> *       - At the opposite of I2C_CheckEvent() function, this function allows user to</span>
<a name="l00572"></a>00572 <span class="comment"> *         choose when an event is accepted (when all events flags are set and no</span>
<a name="l00573"></a>00573 <span class="comment"> *         other flags are set or just when the needed flags are set like</span>
<a name="l00574"></a>00574 <span class="comment"> *         I2C_CheckEvent() function).</span>
<a name="l00575"></a>00575 <span class="comment"> *     - Limitations:</span>
<a name="l00576"></a>00576 <span class="comment"> *       - User may need to define his own events.</span>
<a name="l00577"></a>00577 <span class="comment"> *       - Same remark concerning the error management is applicable for this</span>
<a name="l00578"></a>00578 <span class="comment"> *         function if user decides to check only regular communication flags (and</span>
<a name="l00579"></a>00579 <span class="comment"> *         ignores error flags).</span>
<a name="l00580"></a>00580 <span class="comment"> *</span>
<a name="l00581"></a>00581 <span class="comment"> *</span>
<a name="l00582"></a>00582 <span class="comment"> *  3) Flag-based state monitoring:</span>
<a name="l00583"></a>00583 <span class="comment"> *     Using the function I2C_GetFlagStatus() which simply returns the status of</span>
<a name="l00584"></a>00584 <span class="comment"> *     one single flag (ie. I2C_FLAG_RXNE ...).</span>
<a name="l00585"></a>00585 <span class="comment"> *     - When to use:</span>
<a name="l00586"></a>00586 <span class="comment"> *        - This function could be used for specific applications or in debug phase.</span>
<a name="l00587"></a>00587 <span class="comment"> *        - It is suitable when only one flag checking is needed (most I2C events</span>
<a name="l00588"></a>00588 <span class="comment"> *          are monitored through multiple flags).</span>
<a name="l00589"></a>00589 <span class="comment"> *     - Limitations:</span>
<a name="l00590"></a>00590 <span class="comment"> *        - When calling this function, the Status register is accessed. Some flags are</span>
<a name="l00591"></a>00591 <span class="comment"> *          cleared when the status register is accessed. So checking the status</span>
<a name="l00592"></a>00592 <span class="comment"> *          of one Flag, may clear other ones.</span>
<a name="l00593"></a>00593 <span class="comment"> *        - Function may need to be called twice or more in order to monitor one</span>
<a name="l00594"></a>00594 <span class="comment"> *          single event.</span>
<a name="l00595"></a>00595 <span class="comment"> *</span>
<a name="l00596"></a>00596 <span class="comment"> */</span>
<a name="l00597"></a>00597 <span class="comment"></span>
<a name="l00598"></a>00598 <span class="comment">/**</span>
<a name="l00599"></a>00599 <span class="comment"> *</span>
<a name="l00600"></a>00600 <span class="comment"> *  1) Basic state monitoring</span>
<a name="l00601"></a>00601 <span class="comment"> *******************************************************************************</span>
<a name="l00602"></a>00602 <span class="comment"> */</span>
<a name="l00603"></a>00603 <a class="code" href="group__exported__types.html#ga8333b96c67f83cba354b3407fcbb6ee8">ErrorStatus</a> <a class="code" href="group__i2c__exported__functions.html#ga7932c7b6a5da690a32632a6f9a23d641" title="I2C State Monitoring Functions.">I2C_CheckEvent</a>(<a class="code" href="group__i2c__exported__types.html#gadc952f191791c5a48a1b03dd0c0c6940" title="I2C possible events Values convention: 0xXXYY XX = Event SR3 corresponding value YY = Event SR1 corre...">I2C_Event_TypeDef</a> I2C_Event);<span class="comment"></span>
<a name="l00604"></a>00604 <span class="comment">/**</span>
<a name="l00605"></a>00605 <span class="comment"> *</span>
<a name="l00606"></a>00606 <span class="comment"> *  2) Advanced state monitoring</span>
<a name="l00607"></a>00607 <span class="comment"> *******************************************************************************</span>
<a name="l00608"></a>00608 <span class="comment"> */</span>
<a name="l00609"></a>00609 <a class="code" href="group__i2c__exported__types.html#gadc952f191791c5a48a1b03dd0c0c6940" title="I2C possible events Values convention: 0xXXYY XX = Event SR3 corresponding value YY = Event SR1 corre...">I2C_Event_TypeDef</a> <a class="code" href="group__i2c__exported__functions.html#ga4a4027acb7ff9817eefbdf6cf6ca217d" title="2) Advanced state monitoring">I2C_GetLastEvent</a>(<span class="keywordtype">void</span>);<span class="comment"></span>
<a name="l00610"></a>00610 <span class="comment">/**</span>
<a name="l00611"></a>00611 <span class="comment"> *</span>
<a name="l00612"></a>00612 <span class="comment"> *  3) Flag-based state monitoring</span>
<a name="l00613"></a>00613 <span class="comment"> *******************************************************************************</span>
<a name="l00614"></a>00614 <span class="comment"> */</span>
<a name="l00615"></a>00615 <a class="code" href="group__exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a> <a class="code" href="group__i2c__exported__functions.html#ga39f1313722666a647f4246adfbb713cd" title="3) Flag-based state monitoring">I2C_GetFlagStatus</a>(<a class="code" href="group__i2c__exported__types.html#gaa5ff1a9e0dffb49301663ae1ebeea40a" title="I2C Flags.">I2C_Flag_TypeDef</a> I2C_Flag);<span class="comment"></span>
<a name="l00616"></a>00616 <span class="comment">/**</span>
<a name="l00617"></a>00617 <span class="comment"> *</span>
<a name="l00618"></a>00618 <span class="comment"> *******************************************************************************</span>
<a name="l00619"></a>00619 <span class="comment"> */</span>
<a name="l00620"></a>00620 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#gab68d22553dbe25b1e6a7f4ed003c7279" title="Clear flags.">I2C_ClearFlag</a>(<a class="code" href="group__i2c__exported__types.html#gaa5ff1a9e0dffb49301663ae1ebeea40a" title="I2C Flags.">I2C_Flag_TypeDef</a> I2C_FLAG);
<a name="l00621"></a>00621 <a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> <a class="code" href="group__i2c__exported__functions.html#ga2854c7eb7f8b23ccdf7df7e69beebe92" title="Checks whether the specified I2C interrupt has occurred or not.">I2C_GetITStatus</a>(<a class="code" href="group__i2c__exported__types.html#ga073a1d724d4d4804dc509795a7c06329" title="I2C Pending bits Elements values convention: 0xXYZZ X = SRx registers index X = 1 : SR1 X = 2 : SR2 Y...">I2C_ITPendingBit_TypeDef</a> I2C_ITPendingBit);
<a name="l00622"></a>00622 <span class="keywordtype">void</span> <a class="code" href="group__i2c__exported__functions.html#gaadda9efbdbfc3651dbe735f25d2e529d" title="Clear IT pending bit.">I2C_ClearITPendingBit</a>(<a class="code" href="group__i2c__exported__types.html#ga073a1d724d4d4804dc509795a7c06329" title="I2C Pending bits Elements values convention: 0xXYZZ X = SRx registers index X = 1 : SR1 X = 2 : SR2 Y...">I2C_ITPendingBit_TypeDef</a> I2C_ITPendingBit);
<a name="l00623"></a>00623 
<a name="l00624"></a>00624 <span class="comment"></span>
<a name="l00625"></a>00625 <span class="comment">/**</span>
<a name="l00626"></a>00626 <span class="comment">  * @}</span>
<a name="l00627"></a>00627 <span class="comment">  */</span>
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 <span class="preprocessor">#endif </span><span class="comment">/* __STM8S_I2C_H */</span>
<a name="l00630"></a>00630 
<a name="l00631"></a>00631 
<a name="l00632"></a>00632 <span class="comment">/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/</span>
</pre></div></div>
</div>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="File-List" href="footer_files/filelist.xml"><title>STM8 Standard Peripherals Library: Footer</title><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>STMicroelectronics</o:Author>
  <o:LastAuthor>STMicroelectronics</o:LastAuthor>
  <o:Revision>96</o:Revision>
  <o:TotalTime>61</o:TotalTime>
  <o:Created>2009-02-27T18:59:00Z</o:Created>
  <o:LastSaved>2009-03-01T17:58:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>25</o:Words>
  <o:Characters>149</o:Characters>
  <o:Company>STMicroelectronics</o:Company>
  <o:Lines>1</o:Lines>
  <o:Paragraphs>1</o:Paragraphs>
  <o:CharactersWithSpaces>173</o:CharactersWithSpaces>
  <o:Version>11.6568</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>110</w:Zoom>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->


<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-weight:bold;
	font-style:italic;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{mso-style-noshow:yes;
	mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:#606420;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.StyleHeading1Arial135ptItalicBlack, li.StyleHeading1Arial135ptItalicBlack, div.StyleHeading1Arial135ptItalicBlack
	{mso-style-name:"Style Heading 1 + Arial 13\.5 pt Italic Black";
	mso-style-parent:"Heading 1";
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:16.0pt;
	mso-bidi-font-size:24.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-font-kerning:18.0pt;
	font-weight:bold;
	font-style:italic;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="23554"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]--></head>
<body style="" link="blue" vlink="#606420">

<div class="Section1">

<p style="margin-top: 13px; height: 7px;" class="MsoNormal"><o:p>&nbsp;</o:p></p>

<div align="center">

<table class="MsoNormalTable" style="width: 903px; height: 120px;" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr style="">
  <td style="padding: 0in;" valign="top">
  <p style="height: 13px;" class="MsoNormal"><span style="display: none;"><o:p>&nbsp;</o:p></span></p>
  <table class="MsoNormalTable" style="width: 675pt;" border="0" cellpadding="0" width="900">
   <tbody><tr style="">
    <td style="padding: 0in;" valign="top">
    <table class="MsoNormalTable" style="width: 864px; height: 53px;" border="0" cellpadding="0" cellspacing="5">
     <tbody><tr style="">
      <td style="border-style: solid none none; border-color: windowtext -moz-use-text-color -moz-use-text-color; border-width: 1pt medium medium; padding: 0in; width: 98.86%; height: 61px;" width="98%">
      
      <p class="MsoNormal" style="text-align: center; height: 10px;" align="center"><span style="font-size: 10pt; font-family: Arial;"><o:p>&nbsp;</o:p></span></p>
<span style="font-size: 10pt; font-family: Arial;">&nbsp; &nbsp; &nbsp; For complete
documentation on STM8 8-bit Microcontrollers platform visit&nbsp;<span style="color: blue;"><a href="http://www.st.com/internet/mcu/family/141.jsp" target="_blank">www.st.com</a></span></span><p class="MsoNormal" style="text-align: center; margin-top: 0px; height: 5px;" align="center"></p>
      </td>
     </tr>
    </tbody></table>
    <p style="height: 12px;" class="MsoNormal"><span style="font-size: 10pt;"><o:p></o:p></span></p>
    </td>
   </tr>
  </tbody></table>
  <p class="MsoNormal"><span style="font-size: 10pt;"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

</div>

</body></html>
