<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>STM8S/A Standard Peripherals Firmware Library: stm8s_can.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body><script language="javascript">
if (window.name != "content")
    document.write("<center><a href='index.html?page=stm8s__can_8c_source.html'>show framing</a></center>")
</script>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">STM8S/A Standard Peripherals Firmware Library
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_99fee8dcdd0167cb7ca79288e08b10f1.html">STM8S_StdPeriph_Lib_V2.3.0</a>      </li>
      <li class="navelem"><a class="el" href="dir_f5da7e899866e3fe224c5708fd2dd723.html">Libraries</a>      </li>
      <li class="navelem"><a class="el" href="dir_c53ce1dacb9f624efb36b49d8509ea3b.html">STM8S_StdPeriph_Driver</a>      </li>
      <li class="navelem"><a class="el" href="dir_52950623546e9b39c79b5c109bbbfc22.html">src</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">stm8s_can.c</div>  </div>
</div>
<div class="contents">
<a href="stm8s__can_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**</span>
<a name="l00002"></a>00002 <span class="comment">  ******************************************************************************</span>
<a name="l00003"></a>00003 <span class="comment">  * @file    stm8s_can.c</span>
<a name="l00004"></a>00004 <span class="comment">  * @author  MCD Application Team</span>
<a name="l00005"></a>00005 <span class="comment">  * @version V2.3.0</span>
<a name="l00006"></a>00006 <span class="comment">  * @date    16-June-2017</span>
<a name="l00007"></a>00007 <span class="comment">  * @brief   This file contains all the functions for the CAN peripheral.</span>
<a name="l00008"></a>00008 <span class="comment">   ******************************************************************************</span>
<a name="l00009"></a>00009 <span class="comment">  * @attention</span>
<a name="l00010"></a>00010 <span class="comment">  *</span>
<a name="l00011"></a>00011 <span class="comment">  * &lt;h2&gt;&lt;center&gt;&amp;copy; COPYRIGHT 2014 STMicroelectronics&lt;/center&gt;&lt;/h2&gt;</span>
<a name="l00012"></a>00012 <span class="comment">  *</span>
<a name="l00013"></a>00013 <span class="comment">  * Licensed under MCD-ST Liberty SW License Agreement V2, (the &quot;License&quot;);</span>
<a name="l00014"></a>00014 <span class="comment">  * You may not use this file except in compliance with the License.</span>
<a name="l00015"></a>00015 <span class="comment">  * You may obtain a copy of the License at:</span>
<a name="l00016"></a>00016 <span class="comment">  *</span>
<a name="l00017"></a>00017 <span class="comment">  *        http://www.st.com/software_license_agreement_liberty_v2</span>
<a name="l00018"></a>00018 <span class="comment">  *</span>
<a name="l00019"></a>00019 <span class="comment">  * Unless required by applicable law or agreed to in writing, software </span>
<a name="l00020"></a>00020 <span class="comment">  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, </span>
<a name="l00021"></a>00021 <span class="comment">  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00022"></a>00022 <span class="comment">  * See the License for the specific language governing permissions and</span>
<a name="l00023"></a>00023 <span class="comment">  * limitations under the License.</span>
<a name="l00024"></a>00024 <span class="comment">  *</span>
<a name="l00025"></a>00025 <span class="comment">  ******************************************************************************</span>
<a name="l00026"></a>00026 <span class="comment">  */</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">/* Includes ------------------------------------------------------------------*/</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="stm8s__can_8h.html" title="This file contains all the functions for the CAN peripheral.">stm8s_can.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="comment"></span>
<a name="l00031"></a>00031 <span class="comment">/** @addtogroup STM8S_StdPeriph_Driver</span>
<a name="l00032"></a>00032 <span class="comment">  * @{</span>
<a name="l00033"></a>00033 <span class="comment">  */</span>
<a name="l00034"></a>00034 <span class="comment">/* Private typedef -----------------------------------------------------------*/</span>
<a name="l00035"></a>00035 <span class="comment">/* Private define ------------------------------------------------------------*/</span>
<a name="l00036"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga90491137dce0f238cb8da31155bec48f">00036</a> <span class="preprocessor">#define CAN_IDLIST_IDMASK_MASK ((uint8_t) 0x55)</span>
<a name="l00037"></a><a class="code" href="group__stm8s__stdperiph__driver.html#gae1db739637ef34f63c30e866151def0e">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define CAN_IDMASK_IDLIST_MASK ((uint8_t) 0xAA)</span>
<a name="l00038"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define CAN_MODE_MASK ((uint8_t) 0x03)</span>
<a name="l00039"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga3cd75aafae9c820856f43a33838cee8d">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define CAN_ACKNOWLEDGE_TIMEOUT ((uint16_t)0xFFFF)</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="comment">/* Private macro -------------------------------------------------------------*/</span>
<a name="l00041"></a>00041 <span class="comment">/* Private variables ---------------------------------------------------------*/</span>
<a name="l00042"></a><a class="code" href="group__stm8s__stdperiph__driver.html#gaa6522d6f17d349c579954e43d7320cfd">00042</a> <a class="code" href="group__exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> <a class="code" href="group__stm8s__stdperiph__driver.html#gaa6522d6f17d349c579954e43d7320cfd">_Id</a> = 0;
<a name="l00043"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga2d67c20de104a009b9b376c6eba7717d">00043</a> <a class="code" href="group__exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__stm8s__stdperiph__driver.html#ga2d67c20de104a009b9b376c6eba7717d">_IDE</a> = 0;
<a name="l00044"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga19a64cb4d9b1dd7e7c98dfc64354aefb">00044</a> <a class="code" href="group__exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__stm8s__stdperiph__driver.html#ga19a64cb4d9b1dd7e7c98dfc64354aefb">_RTR</a> = 0;
<a name="l00045"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga18191580405b03f1ce5cf5e0654134c8">00045</a> <a class="code" href="group__exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__stm8s__stdperiph__driver.html#ga18191580405b03f1ce5cf5e0654134c8">_DLC</a> = 0;
<a name="l00046"></a><a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">00046</a> <a class="code" href="group__exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[8] = {0};
<a name="l00047"></a><a class="code" href="group__stm8s__stdperiph__driver.html#gae12766577cd9e9d6fb7244d12e77eaa8">00047</a> <a class="code" href="group__exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__stm8s__stdperiph__driver.html#gae12766577cd9e9d6fb7244d12e77eaa8">_FMI</a> = 0;
<a name="l00048"></a>00048 <span class="comment">/* Private function prototypes -----------------------------------------------*/</span>
<a name="l00049"></a>00049 <span class="keyword">static</span> <a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_Reg, <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> It_Bit);
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">/* Private functions ---------------------------------------------------------*/</span><span class="comment"></span>
<a name="l00052"></a>00052 <span class="comment">/**</span>
<a name="l00053"></a>00053 <span class="comment">  * @addtogroup CAN_Public_Functions</span>
<a name="l00054"></a>00054 <span class="comment">  * @{</span>
<a name="l00055"></a>00055 <span class="comment">  */</span>
<a name="l00056"></a>00056 <span class="comment"></span>
<a name="l00057"></a>00057 <span class="comment">/**</span>
<a name="l00058"></a>00058 <span class="comment">  * @brief  Deinitializes the CAN peripheral registers to their default reset values.</span>
<a name="l00059"></a>00059 <span class="comment">  * @param  None</span>
<a name="l00060"></a>00060 <span class="comment">  * @retval None</span>
<a name="l00061"></a>00061 <span class="comment">  */</span>
<a name="l00062"></a><a class="code" href="group__can__public__functions.html#gabae1dfcfe7f9549c37d03a5834d64e39">00062</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#gabae1dfcfe7f9549c37d03a5834d64e39" title="Deinitializes the CAN peripheral registers to their default reset values.">CAN_DeInit</a>(<span class="keywordtype">void</span>)
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064   <span class="comment">/* Request initialisation */</span>
<a name="l00065"></a>00065   CAN-&gt;MCR = <a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>;
<a name="l00066"></a>00066   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l00067"></a>00067   <a class="code" href="group__can__exported__functions.html#gad7427e016eb442c7e0928beea3c51e75" title="Select the CAN Operation mode.">CAN_OperatingModeRequest</a>(<a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a8d927b965a6e91789c6f47e09a691a3f">CAN_OperatingMode_Initialization</a>);
<a name="l00068"></a>00068   CAN-&gt;Page.Config.ESR = <a class="code" href="group__can__registers__reset__value.html#ga5da62d42802e1ad35eb8ae4e950dc91e">CAN_ESR_RESET_VALUE</a>;
<a name="l00069"></a>00069   CAN-&gt;Page.Config.EIER = <a class="code" href="group__can__registers__reset__value.html#ga778f6c7be011488e0b8c48205a31bcc6">CAN_EIER_RESET_VALUE</a>;
<a name="l00070"></a>00070   CAN-&gt;Page.Config.BTR1 = <a class="code" href="group__can__registers__reset__value.html#gaf3323e7b8d1251f2336888b126c44489">CAN_BTR1_RESET_VALUE</a>;
<a name="l00071"></a>00071   CAN-&gt;Page.Config.BTR2 = <a class="code" href="group__can__registers__reset__value.html#gafc7cc0a71b5bb959df04cb672f1ecc27">CAN_BTR2_RESET_VALUE</a>;
<a name="l00072"></a>00072   CAN-&gt;Page.Config.FMR1 = <a class="code" href="group__can__registers__reset__value.html#ga78a76f55034b8824fc66f95fe7dfa175">CAN_FMR1_RESET_VALUE</a>;
<a name="l00073"></a>00073   CAN-&gt;Page.Config.FMR2 = <a class="code" href="group__can__registers__reset__value.html#ga7f5621272ed175a837f1117e4de843be">CAN_FMR2_RESET_VALUE</a>;
<a name="l00074"></a>00074   CAN-&gt;Page.Config.FCR1 = <a class="code" href="group__can__registers__reset__value.html#ga75790a729c1a5688a7997b737376bfba">CAN_FCR_RESET_VALUE</a>;
<a name="l00075"></a>00075   CAN-&gt;Page.Config.FCR2 = <a class="code" href="group__can__registers__reset__value.html#ga75790a729c1a5688a7997b737376bfba">CAN_FCR_RESET_VALUE</a>;
<a name="l00076"></a>00076   CAN-&gt;Page.Config.FCR3 = <a class="code" href="group__can__registers__reset__value.html#ga75790a729c1a5688a7997b737376bfba">CAN_FCR_RESET_VALUE</a>;
<a name="l00077"></a>00077   <a class="code" href="group__can__exported__functions.html#gad7427e016eb442c7e0928beea3c51e75" title="Select the CAN Operation mode.">CAN_OperatingModeRequest</a>(<a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a7f31500b42d688709d322111bb8fc9e8">CAN_OperatingMode_Normal</a>);
<a name="l00078"></a>00078   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a219943e70408a8829e5c17ec8b56a2b5">CAN_Page_RxFifo</a>;
<a name="l00079"></a>00079   CAN-&gt;Page.RxFIFO.MDLCR = <a class="code" href="group__can__registers__reset__value.html#gad9584b0bb9b35047dfa398da45ca8b14">CAN_MDLC_RESET_VALUE</a>;
<a name="l00080"></a>00080   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0ac672f22c9d420d6dc31c790820884eeb">CAN_Page_TxMailBox0</a>;
<a name="l00081"></a>00081   CAN-&gt;Page.TxMailbox.MDLCR = <a class="code" href="group__can__registers__reset__value.html#gad9584b0bb9b35047dfa398da45ca8b14">CAN_MDLC_RESET_VALUE</a>;
<a name="l00082"></a>00082   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a5eec4aaf58ce44db52977a18d3b11c3d">CAN_Page_TxMailBox1</a>;
<a name="l00083"></a>00083   CAN-&gt;Page.TxMailbox.MDLCR = <a class="code" href="group__can__registers__reset__value.html#gad9584b0bb9b35047dfa398da45ca8b14">CAN_MDLC_RESET_VALUE</a>;
<a name="l00084"></a>00084   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0ac7424fe12037e3c9b30c5f46be9c6979">CAN_Page_TxMailBox2</a>;
<a name="l00085"></a>00085   CAN-&gt;Page.TxMailbox.MDLCR = <a class="code" href="group__can__registers__reset__value.html#gad9584b0bb9b35047dfa398da45ca8b14">CAN_MDLC_RESET_VALUE</a>;
<a name="l00086"></a>00086   
<a name="l00087"></a>00087   CAN-&gt;MCR = <a class="code" href="group__can__registers__reset__value.html#ga5ee1721e5ce47944bacee7de11d34ea5">CAN_MCR_RESET_VALUE</a>;
<a name="l00088"></a>00088   CAN-&gt;MSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__reset__value.html#gab7c83245dc7119e5a6113a730db6133d">CAN_MSR_RESET_VALUE</a>);<span class="comment">/* rc_w1 */</span>
<a name="l00089"></a>00089   CAN-&gt;TSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__reset__value.html#ga7d02a747d93e2e7d43b122b272ba8c9f">CAN_TSR_RESET_VALUE</a>);<span class="comment">/* rc_w1 */</span>
<a name="l00090"></a>00090   CAN-&gt;RFR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__reset__value.html#ga8d5631354514f291c4151e7093602a35">CAN_RFR_RESET_VALUE</a>);<span class="comment">/* rc_w1 */</span>
<a name="l00091"></a>00091   CAN-&gt;IER = <a class="code" href="group__can__registers__reset__value.html#gab4c8fd3955d0e3aa7ae3b6cf047828c2">CAN_IER_RESET_VALUE</a>;
<a name="l00092"></a>00092   CAN-&gt;DGR = <a class="code" href="group__can__registers__reset__value.html#ga538649a3dfeb9dab72f103750ff8079d">CAN_DGR_RESET_VALUE</a>;
<a name="l00093"></a>00093   CAN-&gt;PSR = <a class="code" href="group__can__registers__reset__value.html#ga4d5442fbc77672f20a4787d25631b2ee">CAN_PSR_RESET_VALUE</a>;
<a name="l00094"></a>00094 }
<a name="l00095"></a>00095 <span class="comment"></span>
<a name="l00096"></a>00096 <span class="comment">/**</span>
<a name="l00097"></a>00097 <span class="comment">  * @brief  Initializes the CAN peripheral according to the specified parameters.</span>
<a name="l00098"></a>00098 <span class="comment">  * @param   CAN_MasterCtrl : Master control option, can be one or a combination of @ref CAN_MasterCtrl_TypeDef.</span>
<a name="l00099"></a>00099 <span class="comment">  * @param   CAN_Mode : CAN mode , can be one of @ref CAN_Mode_TypeDef.</span>
<a name="l00100"></a>00100 <span class="comment">  * @param   CAN_SynJumpWidth : CAN Synchronisation Jump Width , can be one of @ref CAN_SynJumpWidth_TypeDef.</span>
<a name="l00101"></a>00101 <span class="comment">  * @param   CAN_BitSeg1 : CAN bit segment 1 , can be one of @ref CAN_BitSeg1_TypeDef.</span>
<a name="l00102"></a>00102 <span class="comment">  * @param   CAN_BitSeg2 : CAN bit segment 2 , can be one of @ref CAN_BitSeg2_TypeDef.</span>
<a name="l00103"></a>00103 <span class="comment">  * @param   CAN_Prescaler : CAN Baud Rate Prescaler , can be a value from 0x01 to 0xFF.</span>
<a name="l00104"></a>00104 <span class="comment">  * @retval Indicates if initialization is succeed. it can be one of @ref CAN_InitStatus_TypeDef enumeration.</span>
<a name="l00105"></a>00105 <span class="comment">  */</span>
<a name="l00106"></a><a class="code" href="group__can__public__functions.html#gaa06a08f1185d41297201fc0bab81c3e4">00106</a> <a class="code" href="group__can__exported__types.html#gaf310421ebae4b73aa43cd771b9e06e76" title="CAN sleep constants.">CAN_InitStatus_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gaa06a08f1185d41297201fc0bab81c3e4" title="Initializes the CAN peripheral according to the specified parameters.">CAN_Init</a>(<a class="code" href="group__can__exported__types.html#ga5b0a737c7aab8f13ba1daef0b17dc5b3" title="CAN Time Triggered Communication mode.">CAN_MasterCtrl_TypeDef</a> CAN_MasterCtrl,
<a name="l00107"></a>00107                                 <a class="code" href="group__can__exported__types.html#gaa434d224c0d199585be17d80b9c8ce9c" title="CAN mode options.">CAN_Mode_TypeDef</a> CAN_Mode,
<a name="l00108"></a>00108                                 <a class="code" href="group__can__exported__types.html#gadfd880d9a5a9eb8636b70400dd048189" title="CAN synchronisation jump width (SJW)">CAN_SynJumpWidth_TypeDef</a> CAN_SynJumpWidth,
<a name="l00109"></a>00109                                 <a class="code" href="group__can__exported__types.html#gaafc61d68589f27481ce3ce26e0f1f0bd" title="time quantum in bit segment 1">CAN_BitSeg1_TypeDef</a> CAN_BitSeg1,
<a name="l00110"></a>00110                                 <a class="code" href="group__can__exported__types.html#gae045ad7e3675c1fdd51a5bfe3fc5d398" title="time quantum in bit segment 2">CAN_BitSeg2_TypeDef</a> CAN_BitSeg2,
<a name="l00111"></a>00111                                 <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_Prescaler)
<a name="l00112"></a>00112 {
<a name="l00113"></a>00113   <a class="code" href="group__can__exported__types.html#gaf310421ebae4b73aa43cd771b9e06e76" title="CAN sleep constants.">CAN_InitStatus_TypeDef</a> InitStatus =  <a class="code" href="group__can__exported__types.html#ggaf310421ebae4b73aa43cd771b9e06e76a8324f6f2d4e6c585deca3d35692d14ca">CAN_InitStatus_Failed</a>;
<a name="l00114"></a>00114   <a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a> timeout = <a class="code" href="group__stm8s__stdperiph__driver.html#ga3cd75aafae9c820856f43a33838cee8d">CAN_ACKNOWLEDGE_TIMEOUT</a>;
<a name="l00115"></a>00115   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00116"></a>00116   
<a name="l00117"></a>00117   
<a name="l00118"></a>00118   <span class="comment">/* Check the parameters */</span>
<a name="l00119"></a>00119   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga50bc52e7b410c3ad6de33f6d47542d79" title="Macro used by the assert function in order to check CAN Time Triggered Communication mode...">IS_CAN_MASTERCTRL_OK</a>(CAN_MasterCtrl));
<a name="l00120"></a>00120   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga666a4b38ad9dbaf5908ba4994a47b889" title="Macro used by the assert function in order to check CAN mode options .">IS_CAN_MODE_OK</a>(CAN_Mode));
<a name="l00121"></a>00121   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gafd2f5b53feda321c2c45fd3e03e9569b" title="Macro used by the assert function in order to check the CAN synchronisation jump width (SJW)...">IS_CAN_SYNJUMPWIDTH_OK</a>(CAN_SynJumpWidth));
<a name="l00122"></a>00122   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga3c0fcdf949b613f4365514164a798922" title="Macro used by the assert function in order to check time quantum in bit segment 1 ...">IS_CAN_BITSEG1_OK</a>(CAN_BitSeg1));
<a name="l00123"></a>00123   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga25084b067b7f52c3112572b37af2e207" title="Macro used by the assert function in order to check time quantum in bit segment 2.">IS_CAN_BITSEG2_OK</a>(CAN_BitSeg2));
<a name="l00124"></a>00124   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga4cfe01663900f2587ea654632915f446" title="Macro used by the assert function in order to check CAN clock prescaler.">IS_CAN_PRESCALER_OK</a>(CAN_Prescaler));
<a name="l00125"></a>00125   
<a name="l00126"></a>00126   <span class="comment">/* Request initialisation */</span>
<a name="l00127"></a>00127   CAN-&gt;MCR = <a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>;
<a name="l00128"></a>00128   <span class="comment">/* Wait the acknowledge */</span>
<a name="l00129"></a>00129   <span class="keywordflow">while</span> (((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;MSR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>) != 0x01) &amp;&amp; ((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)timeout != 0))
<a name="l00130"></a>00130   {
<a name="l00131"></a>00131     timeout--;
<a name="l00132"></a>00132   }
<a name="l00133"></a>00133   
<a name="l00134"></a>00134   <span class="comment">/* Check acknowledged */</span>
<a name="l00135"></a>00135   <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>) != <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>)
<a name="l00136"></a>00136   {
<a name="l00137"></a>00137     
<a name="l00138"></a>00138     InitStatus =  <a class="code" href="group__can__exported__types.html#ggaf310421ebae4b73aa43cd771b9e06e76a8324f6f2d4e6c585deca3d35692d14ca">CAN_InitStatus_Failed</a>;
<a name="l00139"></a>00139     
<a name="l00140"></a>00140   }
<a name="l00141"></a>00141   <span class="keywordflow">else</span>
<a name="l00142"></a>00142   {
<a name="l00143"></a>00143     <span class="comment">/* Set the time triggered communication mode  &amp;  Set the automatic bus-off management  &amp;   Set the automatic wake-up mode</span>
<a name="l00144"></a>00144 <span class="comment">    &amp;     Set the no automatic retransmission &amp; Set the receive FIFO locked mode &amp; Set the transmit FIFO priority */</span>
<a name="l00145"></a>00145     CAN-&gt;MCR |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_MasterCtrl;
<a name="l00146"></a>00146     
<a name="l00147"></a>00147     <span class="comment">/* Set the bit timing register */</span>
<a name="l00148"></a>00148     CAN-&gt;DGR |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_Mode ;
<a name="l00149"></a>00149     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l00150"></a>00150     CAN-&gt;Page.Config.BTR1 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Prescaler - (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)1) | CAN_SynJumpWidth);
<a name="l00151"></a>00151     CAN-&gt;Page.Config.BTR2 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_BitSeg1 | (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_BitSeg2);
<a name="l00152"></a>00152     
<a name="l00153"></a>00153     <span class="comment">/* Request leave initialisation */</span>
<a name="l00154"></a>00154     CAN-&gt;MCR &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>);
<a name="l00155"></a>00155     <span class="comment">/* Wait the acknowledge */</span>
<a name="l00156"></a>00156     timeout = 0xFFFF;
<a name="l00157"></a>00157     <span class="keywordflow">while</span> ((((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;MSR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>) == 0x01))&amp;&amp;(timeout != 0))
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159       timeout--;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161     <span class="comment">/* Check acknowledged */</span>
<a name="l00162"></a>00162     <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>) == <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>)
<a name="l00163"></a>00163     {
<a name="l00164"></a>00164       InitStatus = <a class="code" href="group__can__exported__types.html#ggaf310421ebae4b73aa43cd771b9e06e76a8324f6f2d4e6c585deca3d35692d14ca">CAN_InitStatus_Failed</a>;
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166     <span class="keywordflow">else</span>
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168       InitStatus = <a class="code" href="group__can__exported__types.html#ggaf310421ebae4b73aa43cd771b9e06e76aa2cbe9e32f4cff66d5d9a7b290274424">CAN_InitStatus_Success</a>;
<a name="l00169"></a>00169     }
<a name="l00170"></a>00170   }
<a name="l00171"></a>00171   <span class="comment">/*Restore Last Page*/</span>
<a name="l00172"></a>00172   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00173"></a>00173   
<a name="l00174"></a>00174   <span class="comment">/* Return the status of initialization */</span>
<a name="l00175"></a>00175   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#gaf310421ebae4b73aa43cd771b9e06e76" title="CAN sleep constants.">CAN_InitStatus_TypeDef</a>)InitStatus;
<a name="l00176"></a>00176 }
<a name="l00177"></a>00177 <span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">/**</span>
<a name="l00179"></a>00179 <span class="comment">  * @brief  Initializes the CAN peripheral Filter according to the specified parameters.</span>
<a name="l00180"></a>00180 <span class="comment">  * @param   CAN_FilterNumber : CAN Filter number , can be one of @ref CAN_FilterNumber_TypeDef</span>
<a name="l00181"></a>00181 <span class="comment">  * @param   CAN_FilterActivation : CAN Filter Activation state , can be one of @ref FunctionalState</span>
<a name="l00182"></a>00182 <span class="comment">  * @param   CAN_FilterMode : CAN Filter Mode , can be one of @ref CAN_FilterMode_TypeDef</span>
<a name="l00183"></a>00183 <span class="comment">  * @param   CAN_FilterScale : CAN Filter Scale , can be one of @ref CAN_FilterScale_TypeDef</span>
<a name="l00184"></a>00184 <span class="comment">  * @param   CAN_FilterID1 : CAN Filter ID 1 , can be a value from 0x00 to 0xFF</span>
<a name="l00185"></a>00185 <span class="comment">  * @param   CAN_FilterID2 : CAN Filter ID 2 , can be a value from 0x00 to 0xFF</span>
<a name="l00186"></a>00186 <span class="comment">  * @param   CAN_FilterID3 : CAN Filter ID 3 , can be a value from 0x00 to 0xFF</span>
<a name="l00187"></a>00187 <span class="comment">  * @param   CAN_FilterID4 : CAN Filter ID 4 , can be a value from 0x00 to 0xFF</span>
<a name="l00188"></a>00188 <span class="comment">  * @param   CAN_FilterIDMask1 : CAN Filter ID 1/ Mask 1  , can be a value from 0x00 to 0xFF depending of CAN_FilterMode parameter</span>
<a name="l00189"></a>00189 <span class="comment">  * @param   CAN_FilterIDMask2 : CAN Filter ID 2/ Mask 2 , can be a value from 0x00 to 0xFF depending of CAN_FilterMode parameter</span>
<a name="l00190"></a>00190 <span class="comment">  * @param   CAN_FilterIDMask3 : CAN Filter ID 3/ Mask 3 , can be a value from 0x00 to 0xFF depending of CAN_FilterMode parameter</span>
<a name="l00191"></a>00191 <span class="comment">  * @param   CAN_FilterIDMask4 : CAN Filter ID 4/ Mask 4 , can be a value from 0x00 to 0xFF depending of CAN_FilterMode parameter</span>
<a name="l00192"></a>00192 <span class="comment">  * @retval None</span>
<a name="l00193"></a>00193 <span class="comment">  */</span>
<a name="l00194"></a><a class="code" href="group__can__public__functions.html#ga19aa6f9a793c0451101a7b58a1b2ced2">00194</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga19aa6f9a793c0451101a7b58a1b2ced2" title="Initializes the CAN peripheral Filter according to the specified parameters.">CAN_FilterInit</a>(<a class="code" href="group__can__exported__types.html#gad3f6284ca30f9ba34f508219760776cd" title="CAN filter number.">CAN_FilterNumber_TypeDef</a> CAN_FilterNumber,
<a name="l00195"></a>00195                     <a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> CAN_FilterActivation,
<a name="l00196"></a>00196                     <a class="code" href="group__can__exported__types.html#gae39595ebaa5b1db3d0822add537192c1" title="CAN filter mode.">CAN_FilterMode_TypeDef</a> CAN_FilterMode,
<a name="l00197"></a>00197                     <a class="code" href="group__can__exported__types.html#ga0517d929bbd43d97675d0941936a5a54" title="CAN filter scale.">CAN_FilterScale_TypeDef</a> CAN_FilterScale,
<a name="l00198"></a>00198                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterID1,
<a name="l00199"></a>00199                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterID2,
<a name="l00200"></a>00200                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterID3,
<a name="l00201"></a>00201                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterID4,
<a name="l00202"></a>00202                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterIDMask1,
<a name="l00203"></a>00203                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterIDMask2,
<a name="l00204"></a>00204                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterIDMask3,
<a name="l00205"></a>00205                     <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_FilterIDMask4)
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> fact = 0;
<a name="l00208"></a>00208   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> fsc  = 0;
<a name="l00209"></a>00209   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> fmhl = 0;
<a name="l00210"></a>00210   
<a name="l00211"></a>00211   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0aa2aba18d3c5cada22dde401a7576dec4">CAN_Page_Filter01</a>;
<a name="l00212"></a>00212   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00213"></a>00213   
<a name="l00214"></a>00214   <span class="comment">/* Check the parameters */</span>
<a name="l00215"></a>00215   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gafdd4fce551af3f65b0afdb69a93dbd56" title="Macro used by the assert function in order to check CAN filter number.">IS_CAN_FILTER_NUMBER_OK</a>(CAN_FilterNumber));
<a name="l00216"></a>00216   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__exported__types.html#gafda1b4aabfd993b1e9e0945008fe00a8">IS_FUNCTIONALSTATE_OK</a>(CAN_FilterActivation));
<a name="l00217"></a>00217   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gaa478dc4d6f690f4ba9c3e531fc6683ee" title="Macro used by the assert function in order to check CAN filter mode.">IS_CAN_FILTER_MODE_OK</a>(CAN_FilterMode));
<a name="l00218"></a>00218   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga38f8c3ba03674addd586124790938ed1" title="Macro used by the assert function in order to check CAN filter scale.">IS_CAN_FILTER_SCALE_OK</a>(CAN_FilterScale));
<a name="l00219"></a>00219   
<a name="l00220"></a>00220   
<a name="l00221"></a>00221   <span class="keywordflow">if</span> (CAN_FilterNumber == <a class="code" href="group__can__exported__types.html#ggad3f6284ca30f9ba34f508219760776cda1b170fff768f644ddb8a8b43500f0931">CAN_FilterNumber_0</a>)
<a name="l00222"></a>00222   {
<a name="l00223"></a>00223     fact = 0x01;
<a name="l00224"></a>00224     fsc  = 0x00;
<a name="l00225"></a>00225     fmhl = 0x03;
<a name="l00226"></a>00226     
<a name="l00227"></a>00227     can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0aa2aba18d3c5cada22dde401a7576dec4">CAN_Page_Filter01</a>;
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterNumber == <a class="code" href="group__can__exported__types.html#ggad3f6284ca30f9ba34f508219760776cda53d869f89d39a8c59b0bc262eb86b5b0">CAN_FilterNumber_1</a>)
<a name="l00230"></a>00230   {
<a name="l00231"></a>00231     fact = 0x10;
<a name="l00232"></a>00232     fsc  = 0x04;
<a name="l00233"></a>00233     fmhl = 0x0C;
<a name="l00234"></a>00234     
<a name="l00235"></a>00235     can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0aa2aba18d3c5cada22dde401a7576dec4">CAN_Page_Filter01</a>;
<a name="l00236"></a>00236   }
<a name="l00237"></a>00237   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterNumber == <a class="code" href="group__can__exported__types.html#ggad3f6284ca30f9ba34f508219760776cdabd840067c371475edb385c21f90fcec9">CAN_FilterNumber_2</a>)
<a name="l00238"></a>00238   {
<a name="l00239"></a>00239     fact = 0x01;
<a name="l00240"></a>00240     fsc  = 0x00;
<a name="l00241"></a>00241     fmhl = 0x30;
<a name="l00242"></a>00242     
<a name="l00243"></a>00243     can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a99f23c951f8c4082db027baf80c612ef">CAN_Page_Filter23</a>;
<a name="l00244"></a>00244   }
<a name="l00245"></a>00245   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterNumber == <a class="code" href="group__can__exported__types.html#ggad3f6284ca30f9ba34f508219760776cda7d975093e98b9df917d426533270a926">CAN_FilterNumber_3</a>)
<a name="l00246"></a>00246   {
<a name="l00247"></a>00247     fact = 0x10;
<a name="l00248"></a>00248     fsc  = 0x04;
<a name="l00249"></a>00249     fmhl = 0xC0;
<a name="l00250"></a>00250     
<a name="l00251"></a>00251     can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a99f23c951f8c4082db027baf80c612ef">CAN_Page_Filter23</a>;
<a name="l00252"></a>00252   }
<a name="l00253"></a>00253   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterNumber == <a class="code" href="group__can__exported__types.html#ggad3f6284ca30f9ba34f508219760776cda8786630f8f2f5fcc6ebd66fdb727294a">CAN_FilterNumber_4</a>)
<a name="l00254"></a>00254   {
<a name="l00255"></a>00255     fact = 0x01;
<a name="l00256"></a>00256     fsc  = 0x00;
<a name="l00257"></a>00257     fmhl = 0x03;
<a name="l00258"></a>00258     
<a name="l00259"></a>00259     can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a6da278137707500412a8572b293d9fdd">CAN_Page_Filter45</a>;
<a name="l00260"></a>00260   }
<a name="l00261"></a>00261   <span class="keywordflow">else</span> <span class="comment">/*if (CAN_FilterNumber == CAN_FilterNumber_5)*/</span>
<a name="l00262"></a>00262   {
<a name="l00263"></a>00263     fact = 0x10;
<a name="l00264"></a>00264     fsc  = 0x04;
<a name="l00265"></a>00265     fmhl = 0x0C;
<a name="l00266"></a>00266     
<a name="l00267"></a>00267     can_page_filter = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a6da278137707500412a8572b293d9fdd">CAN_Page_Filter45</a>;
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269   
<a name="l00270"></a>00270   
<a name="l00271"></a>00271   <a class="code" href="group__can__exported__functions.html#gad7427e016eb442c7e0928beea3c51e75" title="Select the CAN Operation mode.">CAN_OperatingModeRequest</a>(<a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a8d927b965a6e91789c6f47e09a691a3f">CAN_OperatingMode_Initialization</a>);
<a name="l00272"></a>00272   
<a name="l00273"></a>00273   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l00274"></a>00274   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00275"></a>00275   <span class="comment">/*Configuration of Filter Scale                            */</span>
<a name="l00276"></a>00276   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00277"></a>00277   
<a name="l00278"></a>00278   <span class="keywordflow">if</span> (can_page_filter == <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0aa2aba18d3c5cada22dde401a7576dec4">CAN_Page_Filter01</a>) <span class="comment">/* FCR1 */</span>
<a name="l00279"></a>00279   {
<a name="l00280"></a>00280     <span class="comment">/* Filter Deactivation  &amp; Reset the Filter Scale */</span>
<a name="l00281"></a>00281     CAN-&gt;Page.Config.FCR1 &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fact | (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(<a class="code" href="group__can__registers__bits__definition.html#ga11b7e0f4395a2a5384036f3ebf89ba30">CAN_FCR1_FSC00</a>|<a class="code" href="group__can__registers__bits__definition.html#ga24f397d9a74478ef7ab32ad8654f373a">CAN_FCR1_FSC01</a>) &lt;&lt; fsc )));
<a name="l00282"></a>00282     <span class="comment">/* Set the new Filter Scale */</span>
<a name="l00283"></a>00283     CAN-&gt;Page.Config.FCR1 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_FilterScale &lt;&lt; fsc);
<a name="l00284"></a>00284   }
<a name="l00285"></a>00285   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (can_page_filter == <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a99f23c951f8c4082db027baf80c612ef">CAN_Page_Filter23</a>) <span class="comment">/* FCR2*/</span>
<a name="l00286"></a>00286   {
<a name="l00287"></a>00287     <span class="comment">/* Filter Deactivation  &amp; Reset the Filter Scale */</span>
<a name="l00288"></a>00288     CAN-&gt;Page.Config.FCR2 &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)( fact | (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(<a class="code" href="group__can__registers__bits__definition.html#ga11b7e0f4395a2a5384036f3ebf89ba30">CAN_FCR1_FSC00</a>|<a class="code" href="group__can__registers__bits__definition.html#ga24f397d9a74478ef7ab32ad8654f373a">CAN_FCR1_FSC01</a>) &lt;&lt; fsc ));
<a name="l00289"></a>00289     
<a name="l00290"></a>00290     <span class="comment">/* Set the new Filter Scale */</span>
<a name="l00291"></a>00291     CAN-&gt;Page.Config.FCR2 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_FilterScale &lt;&lt; fsc);
<a name="l00292"></a>00292     
<a name="l00293"></a>00293   }
<a name="l00294"></a>00294   <span class="keywordflow">else</span> <span class="comment">/*if(can_page_filter == CAN_Page_Filter45)*/</span> <span class="comment">/* FCR3*/</span>
<a name="l00295"></a>00295   {
<a name="l00296"></a>00296     <span class="comment">/* Filter Deactivation  &amp; Reset the Filter Scale */</span>
<a name="l00297"></a>00297     CAN-&gt;Page.Config.FCR3 &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)( fact | (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(<a class="code" href="group__can__registers__bits__definition.html#ga11b7e0f4395a2a5384036f3ebf89ba30">CAN_FCR1_FSC00</a>|<a class="code" href="group__can__registers__bits__definition.html#ga24f397d9a74478ef7ab32ad8654f373a">CAN_FCR1_FSC01</a>) &lt;&lt; fsc ));
<a name="l00298"></a>00298     
<a name="l00299"></a>00299     <span class="comment">/* Set the new Filter Scale */</span>
<a name="l00300"></a>00300     CAN-&gt;Page.Config.FCR3 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_FilterScale &lt;&lt; fsc);
<a name="l00301"></a>00301   }
<a name="l00302"></a>00302   
<a name="l00303"></a>00303   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00304"></a>00304   <span class="comment">/*Configuration of Filter Mode                             */</span>
<a name="l00305"></a>00305   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00306"></a>00306   <span class="keywordflow">if</span> (can_page_filter != <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a6da278137707500412a8572b293d9fdd">CAN_Page_Filter45</a>) <span class="comment">/* FMR1*/</span>
<a name="l00307"></a>00307   {
<a name="l00308"></a>00308     <span class="comment">/* Filter Mode */</span>
<a name="l00309"></a>00309     <span class="keywordflow">if</span> (CAN_FilterMode == <a class="code" href="group__can__exported__types.html#ggae39595ebaa5b1db3d0822add537192c1a321b8562f23ebf8b4a1e962270b779f5">CAN_FilterMode_IdMask</a>)
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311       <span class="comment">/*Id/Mask mode for the filter*/</span>
<a name="l00312"></a>00312       CAN-&gt;Page.Config.FMR1 &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~(fmhl);
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( CAN_FilterMode == <a class="code" href="group__can__exported__types.html#ggae39595ebaa5b1db3d0822add537192c1a7931aa1d74c3fcf399940e092d0e5444">CAN_FilterMode_IdList</a>)
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316       <span class="comment">/*Identifier list mode for the filter*/</span>
<a name="l00317"></a>00317       CAN-&gt;Page.Config.FMR1 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fmhl);
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( CAN_FilterMode == <a class="code" href="group__can__exported__types.html#ggae39595ebaa5b1db3d0822add537192c1a532b38b3938e7ad742aac571001eb5ef">CAN_FilterMode_IdList_IdMask</a>)
<a name="l00320"></a>00320     {
<a name="l00321"></a>00321       <span class="comment">/*Identifier list mode is first  for the filter*/</span>
<a name="l00322"></a>00322       CAN-&gt;Page.Config.FMR1 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fmhl &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga90491137dce0f238cb8da31155bec48f">CAN_IDLIST_IDMASK_MASK</a>);
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324     <span class="keywordflow">else</span> <span class="comment">/* ( CAN_FilterMode == CAN_FilterMode_IdMask_IdList)*/</span>
<a name="l00325"></a>00325     {
<a name="l00326"></a>00326       <span class="comment">/*Id Mask mode is first  for the filter*/</span>
<a name="l00327"></a>00327       CAN-&gt;Page.Config.FMR1 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fmhl &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#gae1db739637ef34f63c30e866151def0e">CAN_IDMASK_IDLIST_MASK</a>);
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329     
<a name="l00330"></a>00330     
<a name="l00331"></a>00331   }
<a name="l00332"></a>00332   <span class="keywordflow">else</span> <span class="comment">/* FMR2 */</span>
<a name="l00333"></a>00333   {
<a name="l00334"></a>00334     
<a name="l00335"></a>00335     <span class="comment">/* Filter Mode */</span>
<a name="l00336"></a>00336     <span class="keywordflow">if</span> (CAN_FilterMode == <a class="code" href="group__can__exported__types.html#ggae39595ebaa5b1db3d0822add537192c1a321b8562f23ebf8b4a1e962270b779f5">CAN_FilterMode_IdMask</a>)
<a name="l00337"></a>00337     {
<a name="l00338"></a>00338       <span class="comment">/*Id/Mask mode for the filter*/</span>
<a name="l00339"></a>00339       CAN-&gt;Page.Config.FMR2 &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~(fmhl);
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( CAN_FilterMode == <a class="code" href="group__can__exported__types.html#ggae39595ebaa5b1db3d0822add537192c1a7931aa1d74c3fcf399940e092d0e5444">CAN_FilterMode_IdList</a>)
<a name="l00342"></a>00342     {
<a name="l00343"></a>00343       <span class="comment">/*Identifier list mode for the filter*/</span>
<a name="l00344"></a>00344       CAN-&gt;Page.Config.FMR2 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fmhl);
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( CAN_FilterMode == <a class="code" href="group__can__exported__types.html#ggae39595ebaa5b1db3d0822add537192c1a532b38b3938e7ad742aac571001eb5ef">CAN_FilterMode_IdList_IdMask</a>)
<a name="l00347"></a>00347     {
<a name="l00348"></a>00348       <span class="comment">/*Identifier list mode is first  for the filter*/</span>
<a name="l00349"></a>00349       CAN-&gt;Page.Config.FMR2 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fmhl &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga90491137dce0f238cb8da31155bec48f">CAN_IDLIST_IDMASK_MASK</a>);
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351     <span class="keywordflow">else</span> <span class="comment">/* ( CAN_FilterMode == CAN_FilterMode_IdMask_IdList)*/</span>
<a name="l00352"></a>00352     {
<a name="l00353"></a>00353       <span class="comment">/*Id Mask mode is first  for the filter*/</span>
<a name="l00354"></a>00354       CAN-&gt;Page.Config.FMR2 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(fmhl &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#gae1db739637ef34f63c30e866151def0e">CAN_IDMASK_IDLIST_MASK</a>);
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356   }
<a name="l00357"></a>00357   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00358"></a>00358   <span class="comment">/*Configuration of Filter IDs                              */</span>
<a name="l00359"></a>00359   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00360"></a>00360   CAN-&gt;PSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)can_page_filter;
<a name="l00361"></a>00361   <span class="keywordflow">if</span> (fsc != 0)
<a name="l00362"></a>00362   {
<a name="l00363"></a>00363     <span class="comment">/* Filter Scale */</span>
<a name="l00364"></a>00364     <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54a4d5ae8126b1766c31a6043a301607aea">CAN_FilterScale_8Bit</a>)
<a name="l00365"></a>00365     {
<a name="l00366"></a>00366       CAN-&gt;Page.Filter.FR09 = CAN_FilterID1;
<a name="l00367"></a>00367       CAN-&gt;Page.Filter.FR10 = CAN_FilterIDMask1;
<a name="l00368"></a>00368       CAN-&gt;Page.Filter.FR11 = CAN_FilterID2;
<a name="l00369"></a>00369       CAN-&gt;Page.Filter.FR12 = CAN_FilterIDMask2;
<a name="l00370"></a>00370       CAN-&gt;Page.Filter.FR13 = CAN_FilterID3;
<a name="l00371"></a>00371       CAN-&gt;Page.Filter.FR14 = CAN_FilterIDMask3;
<a name="l00372"></a>00372       CAN-&gt;Page.Filter.FR15 = CAN_FilterID4;
<a name="l00373"></a>00373       CAN-&gt;Page.Filter.FR16 = CAN_FilterIDMask4;
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54ab3bda95c46a59d84c4809c61cb74055a">CAN_FilterScale_16_8Bit</a>)
<a name="l00376"></a>00376     {
<a name="l00377"></a>00377       CAN-&gt;Page.Filter.FR09 = CAN_FilterID1;
<a name="l00378"></a>00378       CAN-&gt;Page.Filter.FR10 = CAN_FilterID2;
<a name="l00379"></a>00379       CAN-&gt;Page.Filter.FR11 = CAN_FilterIDMask1;
<a name="l00380"></a>00380       CAN-&gt;Page.Filter.FR12 = CAN_FilterIDMask2;
<a name="l00381"></a>00381       CAN-&gt;Page.Filter.FR13 = CAN_FilterID3;
<a name="l00382"></a>00382       CAN-&gt;Page.Filter.FR14 = CAN_FilterIDMask3;
<a name="l00383"></a>00383       CAN-&gt;Page.Filter.FR15 = CAN_FilterID4;
<a name="l00384"></a>00384       CAN-&gt;Page.Filter.FR16 = CAN_FilterIDMask4;
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54acfd8e511a7498a574012b4c33f0c2d58">CAN_FilterScale_16Bit</a>)
<a name="l00387"></a>00387     {
<a name="l00388"></a>00388       CAN-&gt;Page.Filter.FR09 = CAN_FilterID1;
<a name="l00389"></a>00389       CAN-&gt;Page.Filter.FR10 = CAN_FilterID2;
<a name="l00390"></a>00390       CAN-&gt;Page.Filter.FR11 = CAN_FilterIDMask1;
<a name="l00391"></a>00391       CAN-&gt;Page.Filter.FR12 = CAN_FilterIDMask2;
<a name="l00392"></a>00392       CAN-&gt;Page.Filter.FR13 = CAN_FilterID3;
<a name="l00393"></a>00393       CAN-&gt;Page.Filter.FR14 = CAN_FilterID4;
<a name="l00394"></a>00394       CAN-&gt;Page.Filter.FR15 = CAN_FilterIDMask3;
<a name="l00395"></a>00395       CAN-&gt;Page.Filter.FR16 = CAN_FilterIDMask4;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54ac1b4256329e0d65fa76c287d681f97f9">CAN_FilterScale_32Bit</a>)
<a name="l00398"></a>00398     {
<a name="l00399"></a>00399       CAN-&gt;Page.Filter.FR09 = CAN_FilterID1;
<a name="l00400"></a>00400       CAN-&gt;Page.Filter.FR10 = CAN_FilterID2;
<a name="l00401"></a>00401       CAN-&gt;Page.Filter.FR11 = CAN_FilterID3;
<a name="l00402"></a>00402       CAN-&gt;Page.Filter.FR12 = CAN_FilterID4;
<a name="l00403"></a>00403       CAN-&gt;Page.Filter.FR13 = CAN_FilterIDMask1;
<a name="l00404"></a>00404       CAN-&gt;Page.Filter.FR14 = CAN_FilterIDMask2;
<a name="l00405"></a>00405       CAN-&gt;Page.Filter.FR15 = CAN_FilterIDMask3;
<a name="l00406"></a>00406       CAN-&gt;Page.Filter.FR16 = CAN_FilterIDMask4;
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408   }
<a name="l00409"></a>00409   <span class="keywordflow">else</span>
<a name="l00410"></a>00410   {
<a name="l00411"></a>00411     <span class="comment">/* Filter Scale */</span>
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54a4d5ae8126b1766c31a6043a301607aea">CAN_FilterScale_8Bit</a>)
<a name="l00413"></a>00413     {
<a name="l00414"></a>00414       CAN-&gt;Page.Filter.FR01 = CAN_FilterID1;
<a name="l00415"></a>00415       CAN-&gt;Page.Filter.FR02 = CAN_FilterIDMask1;
<a name="l00416"></a>00416       CAN-&gt;Page.Filter.FR03 = CAN_FilterID2;
<a name="l00417"></a>00417       CAN-&gt;Page.Filter.FR04 = CAN_FilterIDMask2;
<a name="l00418"></a>00418       CAN-&gt;Page.Filter.FR05 = CAN_FilterID3;
<a name="l00419"></a>00419       CAN-&gt;Page.Filter.FR06 = CAN_FilterIDMask3;
<a name="l00420"></a>00420       CAN-&gt;Page.Filter.FR07 = CAN_FilterID4;
<a name="l00421"></a>00421       CAN-&gt;Page.Filter.FR08 = CAN_FilterIDMask4;
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54ab3bda95c46a59d84c4809c61cb74055a">CAN_FilterScale_16_8Bit</a>)
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425       CAN-&gt;Page.Filter.FR01 = CAN_FilterID1;
<a name="l00426"></a>00426       CAN-&gt;Page.Filter.FR02 = CAN_FilterID2;
<a name="l00427"></a>00427       CAN-&gt;Page.Filter.FR03 = CAN_FilterIDMask1;
<a name="l00428"></a>00428       CAN-&gt;Page.Filter.FR04 = CAN_FilterIDMask2;
<a name="l00429"></a>00429       CAN-&gt;Page.Filter.FR05 = CAN_FilterID3;
<a name="l00430"></a>00430       CAN-&gt;Page.Filter.FR06 = CAN_FilterIDMask3;
<a name="l00431"></a>00431       CAN-&gt;Page.Filter.FR07 = CAN_FilterID4;
<a name="l00432"></a>00432       CAN-&gt;Page.Filter.FR08 = CAN_FilterIDMask4;
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54acfd8e511a7498a574012b4c33f0c2d58">CAN_FilterScale_16Bit</a>)
<a name="l00435"></a>00435     {
<a name="l00436"></a>00436       CAN-&gt;Page.Filter.FR01 = CAN_FilterID1;
<a name="l00437"></a>00437       CAN-&gt;Page.Filter.FR02 = CAN_FilterID2;
<a name="l00438"></a>00438       CAN-&gt;Page.Filter.FR03 = CAN_FilterIDMask1;
<a name="l00439"></a>00439       CAN-&gt;Page.Filter.FR04 = CAN_FilterIDMask2;
<a name="l00440"></a>00440       CAN-&gt;Page.Filter.FR05 = CAN_FilterID3;
<a name="l00441"></a>00441       CAN-&gt;Page.Filter.FR06 = CAN_FilterID4;
<a name="l00442"></a>00442       CAN-&gt;Page.Filter.FR07 = CAN_FilterIDMask3;
<a name="l00443"></a>00443       CAN-&gt;Page.Filter.FR08 = CAN_FilterIDMask4;
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CAN_FilterScale == <a class="code" href="group__can__exported__types.html#gga0517d929bbd43d97675d0941936a5a54ac1b4256329e0d65fa76c287d681f97f9">CAN_FilterScale_32Bit</a>)
<a name="l00446"></a>00446     {
<a name="l00447"></a>00447       CAN-&gt;Page.Filter.FR01 = CAN_FilterID1;
<a name="l00448"></a>00448       CAN-&gt;Page.Filter.FR02 = CAN_FilterID2;
<a name="l00449"></a>00449       CAN-&gt;Page.Filter.FR03 = CAN_FilterID3;
<a name="l00450"></a>00450       CAN-&gt;Page.Filter.FR04 = CAN_FilterID4;
<a name="l00451"></a>00451       CAN-&gt;Page.Filter.FR05 = CAN_FilterIDMask1;
<a name="l00452"></a>00452       CAN-&gt;Page.Filter.FR06 = CAN_FilterIDMask2;
<a name="l00453"></a>00453       CAN-&gt;Page.Filter.FR07 = CAN_FilterIDMask3;
<a name="l00454"></a>00454       CAN-&gt;Page.Filter.FR08 = CAN_FilterIDMask4;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456   }
<a name="l00457"></a>00457   
<a name="l00458"></a>00458   
<a name="l00459"></a>00459   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00460"></a>00460   <span class="comment">/*Configuration of Filter Activation                       */</span>
<a name="l00461"></a>00461   <span class="comment">/*---------------------------------------------------------*/</span>
<a name="l00462"></a>00462   <span class="comment">/* Filter activation */</span>
<a name="l00463"></a>00463   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l00464"></a>00464   <span class="keywordflow">if</span> (CAN_FilterActivation != <a class="code" href="group__exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a>)
<a name="l00465"></a>00465   {
<a name="l00466"></a>00466     <span class="keywordflow">if</span> ((CAN_FilterNumber &amp; 0x06) == 0x00) <span class="comment">/* FCR1*/</span>
<a name="l00467"></a>00467     {   CAN-&gt;Page.Config.FCR1 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)fact;
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((CAN_FilterNumber &amp; 0x06) == 0x02) <span class="comment">/*FCR2*/</span>
<a name="l00470"></a>00470     { CAN-&gt;Page.Config.FCR2 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)fact;
<a name="l00471"></a>00471     }
<a name="l00472"></a>00472     <span class="keywordflow">else</span> <span class="comment">/*if((CAN_FilterNumber &amp; 0x06) == 0x04)*/</span> <span class="comment">/*FCR3*/</span>
<a name="l00473"></a>00473     { CAN-&gt;Page.Config.FCR3 |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)fact;
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475   }
<a name="l00476"></a>00476   <a class="code" href="group__can__exported__functions.html#gad7427e016eb442c7e0928beea3c51e75" title="Select the CAN Operation mode.">CAN_OperatingModeRequest</a>(<a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a7f31500b42d688709d322111bb8fc9e8">CAN_OperatingMode_Normal</a>);
<a name="l00477"></a>00477   <span class="comment">/*Restore Last Page*/</span>
<a name="l00478"></a>00478   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00479"></a>00479 }
<a name="l00480"></a>00480 <span class="comment"></span>
<a name="l00481"></a>00481 <span class="comment">/**</span>
<a name="l00482"></a>00482 <span class="comment">  * @brief   Enables or disables the specified CAN interrupts.</span>
<a name="l00483"></a>00483 <span class="comment">  * @param    CAN_IT: specifies the CAN interrupt sources to be enabled or disabled.</span>
<a name="l00484"></a>00484 <span class="comment">  * @param   NewState : CAN_IT new state , can be one of @ref FunctionalState</span>
<a name="l00485"></a>00485 <span class="comment">  * @retval None</span>
<a name="l00486"></a>00486 <span class="comment">  */</span>
<a name="l00487"></a><a class="code" href="group__can__public__functions.html#ga92fbb3672d8f93094eb9f3c8fdc01aaf">00487</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga92fbb3672d8f93094eb9f3c8fdc01aaf" title="Enables or disables the specified CAN interrupts.">CAN_ITConfig</a>(<a class="code" href="group__can__exported__types.html#gaf46d91198e45ab5f412826762098afa5" title="CAN interrupts.">CAN_IT_TypeDef</a> CAN_IT, <a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState)
<a name="l00488"></a>00488 {
<a name="l00489"></a>00489   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> tmperrorinterrupt = 0;
<a name="l00490"></a>00490   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00491"></a>00491   
<a name="l00492"></a>00492   
<a name="l00493"></a>00493   <span class="comment">/* Check the parameters */</span>
<a name="l00494"></a>00494   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gae087bf74f4d66df5f23270096afb6148">IS_CAN_IT_CONFIG_OK</a>(CAN_IT));
<a name="l00495"></a>00495   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__exported__types.html#gafda1b4aabfd993b1e9e0945008fe00a8">IS_FUNCTIONALSTATE_OK</a>(NewState));
<a name="l00496"></a>00496   
<a name="l00497"></a>00497   tmperrorinterrupt = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_IT) &gt;&gt;7);
<a name="l00498"></a>00498   tmperrorinterrupt = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)tmperrorinterrupt &amp; 0xF0) | 
<a name="l00499"></a>00499                                 (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)tmperrorinterrupt &amp; 0x0F) &gt;&gt;1));
<a name="l00500"></a>00500   
<a name="l00501"></a>00501   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l00502"></a>00502   <span class="keywordflow">if</span> (NewState != <a class="code" href="group__exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a>)
<a name="l00503"></a>00503   {
<a name="l00504"></a>00504     <span class="comment">/* Enable the selected CAN interrupt */</span>
<a name="l00505"></a>00505     CAN-&gt;IER |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_IT);
<a name="l00506"></a>00506     CAN-&gt;Page.Config.EIER |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(tmperrorinterrupt);
<a name="l00507"></a>00507   }
<a name="l00508"></a>00508   <span class="keywordflow">else</span>
<a name="l00509"></a>00509   {
<a name="l00510"></a>00510     <span class="comment">/* Disable the selected CAN interrupt */</span>
<a name="l00511"></a>00511     CAN-&gt;IER &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_IT);
<a name="l00512"></a>00512     CAN-&gt;Page.Config.EIER &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~(tmperrorinterrupt);
<a name="l00513"></a>00513   }
<a name="l00514"></a>00514   <span class="comment">/*Restore Last Page*/</span>
<a name="l00515"></a>00515   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00516"></a>00516 }
<a name="l00517"></a>00517 <span class="comment"></span>
<a name="l00518"></a>00518 <span class="comment">/**</span>
<a name="l00519"></a>00519 <span class="comment">  * @brief   Enables or Disables the ST7 CAN Compatibility.</span>
<a name="l00520"></a>00520 <span class="comment">  * if the ST7 compatibility is Enabled, CAN provides only 2 mailboxes.</span>
<a name="l00521"></a>00521 <span class="comment">  * if the ST7 compatibility is Disabled, CAN provides 3 mailboxes.</span>
<a name="l00522"></a>00522 <span class="comment">  * @param   CAN_ST7Compatibility : CAN ST7 Compatibility , this parameter can be one of @ref CAN_ST7Compatibility_TypeDef enumeration.</span>
<a name="l00523"></a>00523 <span class="comment">  * @retval None</span>
<a name="l00524"></a>00524 <span class="comment">  */</span>
<a name="l00525"></a><a class="code" href="group__can__public__functions.html#gac25462ff9fd7bf52e1e45329ac0db616">00525</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#gac25462ff9fd7bf52e1e45329ac0db616" title="Enables or Disables the ST7 CAN Compatibility.">CAN_ST7CompatibilityCmd</a>(<a class="code" href="group__can__exported__types.html#ga79729194875190ab34be303d69a245c5" title="CAN ST7 Compatibility.">CAN_ST7Compatibility_TypeDef</a> CAN_ST7Compatibility)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527   <span class="comment">/* Check the parameters */</span>
<a name="l00528"></a>00528   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga21cb00daf29dac226ea8aca33f97462d" title="Macro used by the assert function in order to check the CAN ST7 Compatibility parameters.">IS_CAN_ST7_COMPATIBILITY_OK</a>(CAN_ST7Compatibility));
<a name="l00529"></a>00529   <span class="comment">/*Reset the old configuration of TXM2E */</span>
<a name="l00530"></a>00530   CAN-&gt;DGR &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__bits__definition.html#ga0ab42a07f279cc691f915e5483095c36">CAN_DGR_TXM2E</a>);
<a name="l00531"></a>00531   
<a name="l00532"></a>00532   <span class="comment">/*Set the old configuration of TXM2E */</span>
<a name="l00533"></a>00533   CAN-&gt;DGR |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_ST7Compatibility;
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 <span class="comment"></span>
<a name="l00536"></a>00536 <span class="comment">/**</span>
<a name="l00537"></a>00537 <span class="comment">  * @brief  Enables or disables the CAN Time TriggerOperation communication mode.</span>
<a name="l00538"></a>00538 <span class="comment">  * @param   NewState : Mode new state , can be one of @ref FunctionalState</span>
<a name="l00539"></a>00539 <span class="comment">  * @retval None</span>
<a name="l00540"></a>00540 <span class="comment">  */</span>
<a name="l00541"></a><a class="code" href="group__can__public__functions.html#gabd1d5f49dda44c855d40fd862bb4c811">00541</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#gabd1d5f49dda44c855d40fd862bb4c811" title="Enables or disables the CAN Time TriggerOperation communication mode.">CAN_TTComModeCmd</a>(<a class="code" href="group__exported__types.html#gac9a7e9a35d2513ec15c3b537aaa4fba1">FunctionalState</a> NewState)
<a name="l00542"></a>00542 {
<a name="l00543"></a>00543   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00544"></a>00544   <span class="comment">/* Check the parameters */</span>
<a name="l00545"></a>00545   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__exported__types.html#gafda1b4aabfd993b1e9e0945008fe00a8">IS_FUNCTIONALSTATE_OK</a>(NewState));
<a name="l00546"></a>00546   <span class="keywordflow">if</span> (NewState != <a class="code" href="group__exported__types.html#ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d">DISABLE</a>)
<a name="l00547"></a>00547   {
<a name="l00548"></a>00548     <span class="comment">/*Enable the TTCM mode */</span>
<a name="l00549"></a>00549     CAN-&gt;MCR |= <a class="code" href="group__can__registers__bits__definition.html#ga32b2eda9cad8a969c5d2349bd1d853bb">CAN_MCR_TTCM</a>;
<a name="l00550"></a>00550     <span class="comment">/*Set TGT bits setting in Tx and FIFO pages*/</span>
<a name="l00551"></a>00551     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0ac672f22c9d420d6dc31c790820884eeb">CAN_Page_TxMailBox0</a>;
<a name="l00552"></a>00552     CAN-&gt;Page.TxMailbox.MDLCR |= <a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>;
<a name="l00553"></a>00553     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a5eec4aaf58ce44db52977a18d3b11c3d">CAN_Page_TxMailBox1</a>;
<a name="l00554"></a>00554     CAN-&gt;Page.TxMailbox.MDLCR |= <a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>;
<a name="l00555"></a>00555     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0ac7424fe12037e3c9b30c5f46be9c6979">CAN_Page_TxMailBox2</a>;
<a name="l00556"></a>00556     CAN-&gt;Page.TxMailbox.MDLCR |= <a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>;
<a name="l00557"></a>00557     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a219943e70408a8829e5c17ec8b56a2b5">CAN_Page_RxFifo</a>;
<a name="l00558"></a>00558     CAN-&gt;Page.RxFIFO.MDLCR |= <a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>;
<a name="l00559"></a>00559   }
<a name="l00560"></a>00560   <span class="keywordflow">else</span>
<a name="l00561"></a>00561   {
<a name="l00562"></a>00562     <span class="comment">/*Disable the TTCM mode */</span>
<a name="l00563"></a>00563     CAN-&gt;MCR &amp;= ((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~<a class="code" href="group__can__registers__bits__definition.html#ga32b2eda9cad8a969c5d2349bd1d853bb">CAN_MCR_TTCM</a>);
<a name="l00564"></a>00564     <span class="comment">/*Reset TGT bits setting in Tx and FIFO pages*/</span>
<a name="l00565"></a>00565     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0ac672f22c9d420d6dc31c790820884eeb">CAN_Page_TxMailBox0</a>;
<a name="l00566"></a>00566     CAN-&gt;Page.TxMailbox.MDLCR &amp;= ((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~<a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>);
<a name="l00567"></a>00567     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a5eec4aaf58ce44db52977a18d3b11c3d">CAN_Page_TxMailBox1</a>;
<a name="l00568"></a>00568     CAN-&gt;Page.TxMailbox.MDLCR &amp;= ((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~<a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>);
<a name="l00569"></a>00569     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0ac7424fe12037e3c9b30c5f46be9c6979">CAN_Page_TxMailBox2</a>;
<a name="l00570"></a>00570     CAN-&gt;Page.TxMailbox.MDLCR &amp;= ((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~<a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>);
<a name="l00571"></a>00571     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a219943e70408a8829e5c17ec8b56a2b5">CAN_Page_RxFifo</a>;
<a name="l00572"></a>00572     CAN-&gt;Page.RxFIFO.MDLCR &amp;= ((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)~<a class="code" href="group__can__registers__bits__definition.html#ga43afc6fa47797a8d05fa201ad0b6957f">CAN_MDLCR_TGT</a>);
<a name="l00573"></a>00573   }
<a name="l00574"></a>00574   <span class="comment">/*Restore Last Page*/</span>
<a name="l00575"></a>00575   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00576"></a>00576 }
<a name="l00577"></a>00577 <span class="comment"></span>
<a name="l00578"></a>00578 <span class="comment">/**</span>
<a name="l00579"></a>00579 <span class="comment">  * @brief  Initiates the transmission of a message.</span>
<a name="l00580"></a>00580 <span class="comment">  * @param  CAN_Id the ID number of the message, its size depends on CAN_IDE value.</span>
<a name="l00581"></a>00581 <span class="comment">  * @param[in] CAN_IDE the ID type of the message, this parameter can be one of the @ref CAN_Id_TypeDef enumeration.</span>
<a name="l00582"></a>00582 <span class="comment">  * @param[in] CAN_RTR the message type, this parameter can be one of the @ref CAN_RTR_TypeDef enumeration.</span>
<a name="l00583"></a>00583 <span class="comment">  * @param[in] CAN_DLC the number of data in the message type, this parameter can be a value between 0 to 7.</span>
<a name="l00584"></a>00584 <span class="comment">  * @param[in] CAN_Data pointer to a the @ref uint8_t table which contains data to sent.</span>
<a name="l00585"></a>00585 <span class="comment">  * @retval Transmit Status, this returned value can be one of the @ref CAN_TxStatus_TypeDef enumeration.</span>
<a name="l00586"></a>00586 <span class="comment">  */</span>
<a name="l00587"></a><a class="code" href="group__can__public__functions.html#gaed073d862a4ff59b440a07f69ddd63a5">00587</a> <a class="code" href="group__can__exported__types.html#ga68cdab6cce01d58de8ecc7300d9756d0" title="CAN transmit Status.">CAN_TxStatus_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gaed073d862a4ff59b440a07f69ddd63a5" title="Initiates the transmission of a message.">CAN_Transmit</a>(<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> CAN_Id,
<a name="l00588"></a>00588                                   <a class="code" href="group__can__exported__types.html#ga2f98bfdce9fabdf1ef1f880a9c035ae9" title="CAN identifier type.">CAN_Id_TypeDef</a> CAN_IDE,
<a name="l00589"></a>00589                                   <a class="code" href="group__can__exported__types.html#ga9fcd586962b424e172b74e2ba0d8b321" title="CAN remote transmission request.">CAN_RTR_TypeDef</a> CAN_RTR,
<a name="l00590"></a>00590                                   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_DLC,
<a name="l00591"></a>00591                                   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *CAN_Data)
<a name="l00592"></a>00592 {
<a name="l00593"></a>00593   <a class="code" href="group__can__exported__types.html#ga68cdab6cce01d58de8ecc7300d9756d0" title="CAN transmit Status.">CAN_TxStatus_TypeDef</a> CAN_TxStatus = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ae11b9a299696544b0581b3aeeb985b4f">CAN_TxStatus_NoMailBox</a>;
<a name="l00594"></a>00594   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00595"></a>00595   <span class="comment">/* Check the parameters */</span>
<a name="l00596"></a>00596   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gadab8ef1b80fe3c15c2cc498fa753d17f" title="Macro used by the assert function in order to check the type of the ID to be sent.">IS_CAN_IDTYPE_OK</a>(CAN_IDE));
<a name="l00597"></a>00597   <span class="keywordflow">if</span> (CAN_IDE != <a class="code" href="group__can__exported__types.html#gga2f98bfdce9fabdf1ef1f880a9c035ae9ad78b6c04a3709305ed3e34181c5a8a20">CAN_Id_Standard</a>)
<a name="l00598"></a>00598   {
<a name="l00599"></a>00599     <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gacf92472dd8cfff95d79935754a69ceb1" title="Macro used by the assert function in order to check the Extended ID to be sent.">IS_CAN_EXTID_OK</a>(CAN_Id));
<a name="l00600"></a>00600   }
<a name="l00601"></a>00601   <span class="keywordflow">else</span>
<a name="l00602"></a>00602   {
<a name="l00603"></a>00603     <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga748046d84ee4ce6d72ed4f50b48abbac" title="Macro used by the assert function in order to check the Standard ID to be sent.">IS_CAN_STDID_OK</a>(CAN_Id));
<a name="l00604"></a>00604   }
<a name="l00605"></a>00605   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga7cc16c9c87fe9937328314303de3412b" title="Macro used by the assert function in order to check CAN transmission Frame Type.">IS_CAN_RTR_OK</a>(CAN_RTR));
<a name="l00606"></a>00606   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gade8b277dfd3983c2872c0a77f9753bfd" title="Macro used by the assert function in order to check the DLC to be sent.">IS_CAN_DLC_OK</a>(CAN_DLC));
<a name="l00607"></a>00607   <span class="comment">/* Select one empty transmit mailbox */</span>
<a name="l00608"></a>00608   <span class="keywordflow">if</span> ((CAN-&gt;TPR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga7a382d95087b22c9b2fd9fb298a469c6">CAN_TPR_TME0</a>) == <a class="code" href="group__can__registers__bits__definition.html#ga7a382d95087b22c9b2fd9fb298a469c6">CAN_TPR_TME0</a>)
<a name="l00609"></a>00609   {
<a name="l00610"></a>00610     CAN_TxStatus = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0a3c2034fedd3809f7c2e4dba3e4bc0d48">CAN_TxStatus_MailBox0Ok</a>;
<a name="l00611"></a>00611   }
<a name="l00612"></a>00612   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((CAN-&gt;TPR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga6566fc5cfba915a3730e6b43e00b2aca">CAN_TPR_TME1</a>) == <a class="code" href="group__can__registers__bits__definition.html#ga6566fc5cfba915a3730e6b43e00b2aca">CAN_TPR_TME1</a>)
<a name="l00613"></a>00613   {
<a name="l00614"></a>00614     CAN_TxStatus = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0aebd050a72422b06f02b0f8340b3e68f1">CAN_TxStatus_MailBox1Ok</a>;
<a name="l00615"></a>00615   }
<a name="l00616"></a>00616   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((CAN-&gt;TPR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga25f5c0cdc98c3438eec2da1e40b1226d">CAN_TPR_TME2</a>) == <a class="code" href="group__can__registers__bits__definition.html#ga25f5c0cdc98c3438eec2da1e40b1226d">CAN_TPR_TME2</a>)
<a name="l00617"></a>00617   {
<a name="l00618"></a>00618     CAN_TxStatus = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0a373635c2546ae359703ef9b36a602c84">CAN_TxStatus_MailBox2Ok</a>;
<a name="l00619"></a>00619   }
<a name="l00620"></a>00620   <span class="keywordflow">else</span>
<a name="l00621"></a>00621   {
<a name="l00622"></a>00622     CAN_TxStatus = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ae11b9a299696544b0581b3aeeb985b4f">CAN_TxStatus_NoMailBox</a>;
<a name="l00623"></a>00623   }
<a name="l00624"></a>00624   <span class="keywordflow">if</span> (CAN_TxStatus != <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ae11b9a299696544b0581b3aeeb985b4f">CAN_TxStatus_NoMailBox</a>)
<a name="l00625"></a>00625   {
<a name="l00626"></a>00626     CAN-&gt;PSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_TxStatus;
<a name="l00627"></a>00627     <span class="comment">/* Set up the Id */</span>
<a name="l00628"></a>00628     <span class="keywordflow">if</span> (CAN_IDE != <a class="code" href="group__can__exported__types.html#gga2f98bfdce9fabdf1ef1f880a9c035ae9ad78b6c04a3709305ed3e34181c5a8a20">CAN_Id_Standard</a>)
<a name="l00629"></a>00629     {
<a name="l00630"></a>00630       CAN_Id &amp;= (<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)<a class="code" href="stm8s__can_8h.html#a996fd7f7751efc26f03cde436a801719">CAN_EXTID_SIZE</a>;
<a name="l00631"></a>00631       CAN-&gt;Page.TxMailbox.MIDR4 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Id);
<a name="l00632"></a>00632       CAN_Id = CAN_Id&gt;&gt;8;
<a name="l00633"></a>00633       CAN-&gt;Page.TxMailbox.MIDR3 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Id);
<a name="l00634"></a>00634       CAN_Id = CAN_Id&gt;&gt;8;
<a name="l00635"></a>00635       CAN-&gt;Page.TxMailbox.MIDR2 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Id);
<a name="l00636"></a>00636       CAN_Id = CAN_Id&gt;&gt;8;
<a name="l00637"></a>00637       CAN-&gt;Page.TxMailbox.MIDR1 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Id |CAN_IDE | CAN_RTR);
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639     <span class="keywordflow">else</span>
<a name="l00640"></a>00640     {
<a name="l00641"></a>00641       CAN_Id &amp;= (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)<a class="code" href="stm8s__can_8h.html#a39909e9867ac6b456c9f82b98c9dc8fd">CAN_STDID_SIZE</a>;
<a name="l00642"></a>00642       CAN-&gt;Page.TxMailbox.MIDR1 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((CAN_Id&gt;&gt;6) | (CAN_RTR)) ;
<a name="l00643"></a>00643       CAN-&gt;Page.TxMailbox.MIDR2 = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Id&lt;&lt;2);
<a name="l00644"></a>00644     }
<a name="l00645"></a>00645     <span class="comment">/* Set up the DLC                 */</span>
<a name="l00646"></a>00646     <span class="comment">/*clear old DLC value*/</span>
<a name="l00647"></a>00647     CAN-&gt;Page.TxMailbox.MDLCR &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0xF0;
<a name="l00648"></a>00648     <span class="comment">/*set the new value of DLC*/</span>
<a name="l00649"></a>00649     CAN-&gt;Page.TxMailbox.MDLCR |= CAN_DLC;
<a name="l00650"></a>00650     <span class="comment">/* Set up the data field */</span>
<a name="l00651"></a>00651     CAN-&gt;Page.TxMailbox.MDAR1 = CAN_Data[0];
<a name="l00652"></a>00652     CAN-&gt;Page.TxMailbox.MDAR2 = CAN_Data[1];
<a name="l00653"></a>00653     CAN-&gt;Page.TxMailbox.MDAR3 = CAN_Data[2];
<a name="l00654"></a>00654     CAN-&gt;Page.TxMailbox.MDAR4 = CAN_Data[3];
<a name="l00655"></a>00655     CAN-&gt;Page.TxMailbox.MDAR5 = CAN_Data[4];
<a name="l00656"></a>00656     CAN-&gt;Page.TxMailbox.MDAR6 = CAN_Data[5];
<a name="l00657"></a>00657     CAN-&gt;Page.TxMailbox.MDAR7 = CAN_Data[6];
<a name="l00658"></a>00658     CAN-&gt;Page.TxMailbox.MDAR8 = CAN_Data[7];
<a name="l00659"></a>00659     <span class="comment">/* Request transmission */</span>
<a name="l00660"></a>00660     CAN-&gt;Page.TxMailbox.MCSR |= <a class="code" href="group__can__registers__bits__definition.html#ga9ddf6abfe3b7cd9b6816ba211dc17d39">CAN_MCSR_TXRQ</a>;
<a name="l00661"></a>00661   }
<a name="l00662"></a>00662   <span class="comment">/*Restore Last Page*/</span>
<a name="l00663"></a>00663   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00664"></a>00664   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga68cdab6cce01d58de8ecc7300d9756d0" title="CAN transmit Status.">CAN_TxStatus_TypeDef</a>)CAN_TxStatus;
<a name="l00665"></a>00665 }
<a name="l00666"></a>00666 <span class="comment"></span>
<a name="l00667"></a>00667 <span class="comment">/**</span>
<a name="l00668"></a>00668 <span class="comment">  * @brief  Checks the transmission of a message.</span>
<a name="l00669"></a>00669 <span class="comment">  * @param  CAN_TransmitMailbox : the number of the mailbox that is used for transmission, can be on of  @ref CAN_TransmitMailBox_TypeDef.</span>
<a name="l00670"></a>00670 <span class="comment">  * @retval CAN_TxStatus_Ok if the CAN driver transmits the message, CAN_TxStatus_Failed in an other case.</span>
<a name="l00671"></a>00671 <span class="comment">  */</span>
<a name="l00672"></a><a class="code" href="group__can__public__functions.html#ga4532379d5ab6d3fc0f109b5778458cdf">00672</a> <a class="code" href="group__can__exported__types.html#ga68cdab6cce01d58de8ecc7300d9756d0" title="CAN transmit Status.">CAN_TxStatus_TypeDef</a> <a class="code" href="group__can__exported__functions.html#ga4532379d5ab6d3fc0f109b5778458cdf" title="Checks the transmission of a message.">CAN_TransmitStatus</a>(<a class="code" href="group__can__exported__types.html#gaa0658d6bf99f4d9ad883bd1ad975ae28" title="CAN Tx mailboxes.">CAN_TransmitMailBox_TypeDef</a> CAN_TransmitMailbox)
<a name="l00673"></a>00673 {
<a name="l00674"></a>00674   <span class="comment">/* RQCP, TXOK and TME bits */</span>
<a name="l00675"></a>00675   <a class="code" href="group__can__exported__types.html#ga68cdab6cce01d58de8ecc7300d9756d0" title="CAN transmit Status.">CAN_TxStatus_TypeDef</a> tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ab04365e53b11940bc4b9734bece78d36">CAN_TxStatus_Failed</a>;
<a name="l00676"></a>00676   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> tmpstate=0;
<a name="l00677"></a>00677   
<a name="l00678"></a>00678   <span class="comment">/* Check the parameters */</span>
<a name="l00679"></a>00679   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga18fab14af2470630e1a71d72863cec3b" title="Macro used by the assert function in order to check CAN Tx mailboxes.">IS_CAN_TRANSMITMAILBOX_OK</a>(CAN_TransmitMailbox));
<a name="l00680"></a>00680   
<a name="l00681"></a>00681   <span class="keywordflow">switch</span> (CAN_TransmitMailbox)
<a name="l00682"></a>00682   {
<a name="l00683"></a>00683   <span class="keywordflow">case</span> (<a class="code" href="group__can__exported__types.html#ggaa0658d6bf99f4d9ad883bd1ad975ae28a1b8b89c4243badbd6c821662d1f708f8">CAN_TransmitMailBox_0</a>): tmpstate = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((CAN-&gt;TSR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(<a class="code" href="group__can__registers__bits__definition.html#ga4a4809b8908618df57e6393cc7fe0f52">CAN_TSR_RQCP0</a>|<a class="code" href="group__can__registers__bits__definition.html#gaacedb237b31d29aef7f38475e9a6b297">CAN_TSR_TXOK0</a>)));
<a name="l00684"></a>00684   tmpstate |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((CAN-&gt;TPR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga7a382d95087b22c9b2fd9fb298a469c6">CAN_TPR_TME0</a>));
<a name="l00685"></a>00685   <span class="keywordflow">break</span>;
<a name="l00686"></a>00686   <span class="keywordflow">case</span> (<a class="code" href="group__can__exported__types.html#ggaa0658d6bf99f4d9ad883bd1ad975ae28a8ffda1dd2914b7c9cb99644f7f2c3fad">CAN_TransmitMailBox_1</a>): tmpstate = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;TSR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(<a class="code" href="group__can__registers__bits__definition.html#gabd3118dec59c3a45d2f262b090699538">CAN_TSR_RQCP1</a>|<a class="code" href="group__can__registers__bits__definition.html#gaea918e510c5471b1ac797350b7950151">CAN_TSR_TXOK1</a>))&gt;&gt;1);
<a name="l00687"></a>00687   tmpstate |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;TPR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga6566fc5cfba915a3730e6b43e00b2aca">CAN_TPR_TME1</a>) &gt;&gt; 1);
<a name="l00688"></a>00688   <span class="keywordflow">break</span>;
<a name="l00689"></a>00689   <span class="keywordflow">case</span> (<a class="code" href="group__can__exported__types.html#ggaa0658d6bf99f4d9ad883bd1ad975ae28af266c69661bb3131f0aa02387d1a1695">CAN_TransmitMailBox_2</a>): tmpstate = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;TSR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(<a class="code" href="group__can__registers__bits__definition.html#ga3cf9e83cec96164f1dadf4e43411ebf0">CAN_TSR_RQCP2</a>|<a class="code" href="group__can__registers__bits__definition.html#ga782c591bb204d751b470dd53a37d240e">CAN_TSR_TXOK2</a>))&gt;&gt;2);
<a name="l00690"></a>00690   tmpstate |= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;TPR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga25f5c0cdc98c3438eec2da1e40b1226d">CAN_TPR_TME2</a>) &gt;&gt; 2);
<a name="l00691"></a>00691   <span class="keywordflow">break</span>;
<a name="l00692"></a>00692   <span class="keywordflow">default</span>:
<a name="l00693"></a>00693     tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ab04365e53b11940bc4b9734bece78d36">CAN_TxStatus_Failed</a>;
<a name="l00694"></a>00694     <span class="keywordflow">break</span>;
<a name="l00695"></a>00695   }
<a name="l00696"></a>00696   
<a name="l00697"></a>00697   <span class="keywordflow">switch</span> (tmpstate)
<a name="l00698"></a>00698   {
<a name="l00699"></a>00699     <span class="comment">/*transmit pending  */</span>
<a name="l00700"></a>00700   <span class="keywordflow">case</span> (0x00): tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0a720cc411d79f2e8f71fbb677a6b1b4ff">CAN_TxStatus_Pending</a>;
<a name="l00701"></a>00701   <span class="keywordflow">break</span>;
<a name="l00702"></a>00702   <span class="comment">/* transmit failed  */</span>
<a name="l00703"></a>00703   <span class="keywordflow">case</span> (0x05): tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ab04365e53b11940bc4b9734bece78d36">CAN_TxStatus_Failed</a>;
<a name="l00704"></a>00704   <span class="keywordflow">break</span>;
<a name="l00705"></a>00705   <span class="comment">/* transmit succeeded */</span>
<a name="l00706"></a>00706   <span class="keywordflow">case</span> (0x15): tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0a2c6f458737bd6bff81625f4c705f5fac">CAN_TxStatus_Ok</a>;
<a name="l00707"></a>00707   <span class="keywordflow">break</span>;
<a name="l00708"></a>00708   <span class="comment">/* transmit mailbox is empty : no activity on this TX mail box */</span>
<a name="l00709"></a>00709   <span class="keywordflow">case</span> (0x04): tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0a017ce1990e3375ecef3563a1fd341cdf">CAN_TxStatus_MailBoxEmpty</a>;
<a name="l00710"></a>00710   <span class="keywordflow">break</span>;
<a name="l00711"></a>00711   <span class="keywordflow">default</span>:
<a name="l00712"></a>00712     tstate = <a class="code" href="group__can__exported__types.html#gga68cdab6cce01d58de8ecc7300d9756d0ab04365e53b11940bc4b9734bece78d36">CAN_TxStatus_Failed</a>;
<a name="l00713"></a>00713     <span class="keywordflow">break</span>;
<a name="l00714"></a>00714   }
<a name="l00715"></a>00715   
<a name="l00716"></a>00716   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga68cdab6cce01d58de8ecc7300d9756d0" title="CAN transmit Status.">CAN_TxStatus_TypeDef</a>)tstate;
<a name="l00717"></a>00717 }
<a name="l00718"></a>00718 <span class="comment"></span>
<a name="l00719"></a>00719 <span class="comment">/**</span>
<a name="l00720"></a>00720 <span class="comment">  * @brief  Cancels a transmit request.</span>
<a name="l00721"></a>00721 <span class="comment">  * @param  CAN_TransmitMailbox : the Transmission mailbox, can be one of CAN_TransmitMailBox_TypeDef</span>
<a name="l00722"></a>00722 <span class="comment">  * @retval None</span>
<a name="l00723"></a>00723 <span class="comment">  */</span>
<a name="l00724"></a><a class="code" href="group__can__public__functions.html#ga1ddfd96e83cb23129ff9abb526ea233b">00724</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga1ddfd96e83cb23129ff9abb526ea233b" title="Cancels a transmit request.">CAN_CancelTransmit</a>(<a class="code" href="group__can__exported__types.html#gaa0658d6bf99f4d9ad883bd1ad975ae28" title="CAN Tx mailboxes.">CAN_TransmitMailBox_TypeDef</a> CAN_TransmitMailbox)
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00727"></a>00727   <span class="comment">/* Check the parameters */</span>
<a name="l00728"></a>00728   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga18fab14af2470630e1a71d72863cec3b" title="Macro used by the assert function in order to check CAN Tx mailboxes.">IS_CAN_TRANSMITMAILBOX_OK</a>(CAN_TransmitMailbox));
<a name="l00729"></a>00729   <span class="comment">/*switch to the specific page */</span>
<a name="l00730"></a>00730   CAN-&gt;PSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_TransmitMailbox;
<a name="l00731"></a>00731   <span class="comment">/* abort transmission */</span>
<a name="l00732"></a>00732   CAN-&gt;Page.TxMailbox.MCSR |= <a class="code" href="group__can__registers__bits__definition.html#ga9014308af774c583abf1d3858a4f2a3f">CAN_MCSR_ABRQ</a>;
<a name="l00733"></a>00733   <span class="comment">/*Restore Last Page*/</span>
<a name="l00734"></a>00734   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00735"></a>00735 }
<a name="l00736"></a>00736 <span class="comment"></span>
<a name="l00737"></a>00737 <span class="comment">/**</span>
<a name="l00738"></a>00738 <span class="comment">  * @brief   Releases the CAN FIFO.</span>
<a name="l00739"></a>00739 <span class="comment">  * @param  None</span>
<a name="l00740"></a>00740 <span class="comment">  * @retval None</span>
<a name="l00741"></a>00741 <span class="comment">  */</span>
<a name="l00742"></a><a class="code" href="group__can__public__functions.html#ga9aff2b516a039bfe020155e204e6059e">00742</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga9aff2b516a039bfe020155e204e6059e" title="Releases the CAN FIFO.">CAN_FIFORelease</a>(<span class="keywordtype">void</span>)
<a name="l00743"></a>00743 {
<a name="l00744"></a>00744   <span class="comment">/* Release FIFO*/</span>
<a name="l00745"></a>00745   CAN-&gt;RFR = <a class="code" href="group__can__registers__bits__definition.html#gaa1a5c7a96b96f5b5916412b9761b3b60">CAN_RFR_RFOM</a>; <span class="comment">/*rc-w1*/</span>
<a name="l00746"></a>00746 }
<a name="l00747"></a>00747 <span class="comment"></span>
<a name="l00748"></a>00748 <span class="comment">/**</span>
<a name="l00749"></a>00749 <span class="comment">  * @brief  Returns the number of pending messages.</span>
<a name="l00750"></a>00750 <span class="comment">  * @retval Number of pending messages.</span>
<a name="l00751"></a>00751 <span class="comment">  */</span>
<a name="l00752"></a><a class="code" href="group__can__public__functions.html#gae1d2a1c048b05f134b877ab9400dbd38">00752</a> <a class="code" href="group__can__exported__types.html#gad7281a320562d9f3aa7d51b433160462" title="CAN Pending Messages number.">CAN_NbrPendingMessage_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gae1d2a1c048b05f134b877ab9400dbd38" title="Returns the number of pending messages.">CAN_MessagePending</a>(<span class="keywordtype">void</span>)
<a name="l00753"></a>00753 {
<a name="l00754"></a>00754   <a class="code" href="group__can__exported__types.html#gad7281a320562d9f3aa7d51b433160462" title="CAN Pending Messages number.">CAN_NbrPendingMessage_TypeDef</a> msgpending = <a class="code" href="group__can__exported__types.html#ggad7281a320562d9f3aa7d51b433160462aa9bf06a1eb65143746940c574b306a4a">CAN_NbrPendingMessage_0</a>;
<a name="l00755"></a>00755   msgpending = (<a class="code" href="group__can__exported__types.html#gad7281a320562d9f3aa7d51b433160462" title="CAN Pending Messages number.">CAN_NbrPendingMessage_TypeDef</a>)(CAN-&gt;RFR &amp; <a class="code" href="group__can__registers__bits__definition.html#ga60daa774ca757ede2fc74943fd3d97a9">CAN_RFR_FMP01</a>);
<a name="l00756"></a>00756   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#gad7281a320562d9f3aa7d51b433160462" title="CAN Pending Messages number.">CAN_NbrPendingMessage_TypeDef</a>)msgpending;
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 <span class="comment"></span>
<a name="l00759"></a>00759 <span class="comment">/**</span>
<a name="l00760"></a>00760 <span class="comment">  * @brief   Receives a message which contains CAN Id, IDE, RTR</span>
<a name="l00761"></a>00761 <span class="comment">  * DLC, data and FMI number.</span>
<a name="l00762"></a>00762 <span class="comment">  * In order to get these data, use CAN_GetReceivedId(), CAN_GetReceivedIDE(), CAN_GetReceivedRTR(),</span>
<a name="l00763"></a>00763 <span class="comment">  * CAN_GetReceivedDLC(), CAN_GetReceivedFMI() and CAN_GetReceivedData() functions.</span>
<a name="l00764"></a>00764 <span class="comment">  * @param  None</span>
<a name="l00765"></a>00765 <span class="comment">  * @retval None</span>
<a name="l00766"></a>00766 <span class="comment">  */</span>
<a name="l00767"></a><a class="code" href="group__can__public__functions.html#ga1d3a862b3645803f12037fd54ee712ff">00767</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga1d3a862b3645803f12037fd54ee712ff" title="Receives a message which contains CAN Id, IDE, RTR DLC, data and FMI number.">CAN_Receive</a>(<span class="keywordtype">void</span>)
<a name="l00768"></a>00768 {
<a name="l00769"></a>00769   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00770"></a>00770   <a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> temp1 = 0, temp2 = 0, temp3 = 0;
<a name="l00771"></a>00771   
<a name="l00772"></a>00772   <span class="comment">/* select Fifo page*/</span>
<a name="l00773"></a>00773   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a219943e70408a8829e5c17ec8b56a2b5">CAN_Page_RxFifo</a>;
<a name="l00774"></a>00774   
<a name="l00775"></a>00775   <span class="comment">/* Get the Id */</span>
<a name="l00776"></a>00776   <a class="code" href="group__stm8s__stdperiph__driver.html#ga2d67c20de104a009b9b376c6eba7717d">_IDE</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;Page.RxFIFO.MIDR1 &amp; <a class="code" href="group__can__exported__types.html#gga2f98bfdce9fabdf1ef1f880a9c035ae9a9b781fc6d5f926c40ae1e83194b490b5">CAN_Id_Extended</a>);
<a name="l00777"></a>00777   <span class="keywordflow">if</span> (<a class="code" href="group__stm8s__stdperiph__driver.html#ga2d67c20de104a009b9b376c6eba7717d">_IDE</a> != <a class="code" href="group__can__exported__types.html#gga2f98bfdce9fabdf1ef1f880a9c035ae9ad78b6c04a3709305ed3e34181c5a8a20">CAN_Id_Standard</a>)
<a name="l00778"></a>00778   {
<a name="l00779"></a>00779     temp1 = ((<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)((<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)CAN-&gt;Page.RxFIFO.MIDR3) &lt;&lt; 8);
<a name="l00780"></a>00780     temp2 = ((<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)((<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)CAN-&gt;Page.RxFIFO.MIDR2) &lt;&lt; 16);  
<a name="l00781"></a>00781     temp3 = ((<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)((<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)CAN-&gt;Page.RxFIFO.MIDR1 &amp; 0x1F) &lt;&lt; 24);
<a name="l00782"></a>00782     
<a name="l00783"></a>00783     <a class="code" href="group__stm8s__stdperiph__driver.html#gaa6522d6f17d349c579954e43d7320cfd">_Id</a> = (<a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>)<a class="code" href="stm8s__can_8h.html#a996fd7f7751efc26f03cde436a801719">CAN_EXTID_SIZE</a> &amp; ((CAN-&gt;Page.RxFIFO.MIDR4) | temp1 | temp2 | temp3 );
<a name="l00784"></a>00784   }
<a name="l00785"></a>00785   <span class="keywordflow">else</span>
<a name="l00786"></a>00786   {
<a name="l00787"></a>00787     temp1 = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN-&gt;Page.RxFIFO.MIDR1 &amp; 0x1F) &lt;&lt; 6));
<a name="l00788"></a>00788     temp2 = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN-&gt;Page.RxFIFO.MIDR2 &gt;&gt; 2)&amp;0x3F);
<a name="l00789"></a>00789     
<a name="l00790"></a>00790     <a class="code" href="group__stm8s__stdperiph__driver.html#gaa6522d6f17d349c579954e43d7320cfd">_Id</a> = (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)<a class="code" href="stm8s__can_8h.html#a39909e9867ac6b456c9f82b98c9dc8fd">CAN_STDID_SIZE</a> &amp; (temp1 | temp2 );
<a name="l00791"></a>00791   }
<a name="l00792"></a>00792   
<a name="l00793"></a>00793   <a class="code" href="group__stm8s__stdperiph__driver.html#ga19a64cb4d9b1dd7e7c98dfc64354aefb">_RTR</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x20 &amp; CAN-&gt;Page.RxFIFO.MIDR1);
<a name="l00794"></a>00794   
<a name="l00795"></a>00795   <span class="comment">/* Get the DLC */</span>
<a name="l00796"></a>00796   <a class="code" href="group__stm8s__stdperiph__driver.html#ga18191580405b03f1ce5cf5e0654134c8">_DLC</a> = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;Page.RxFIFO.MDLCR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)0x0F);
<a name="l00797"></a>00797   
<a name="l00798"></a>00798   <span class="comment">/* Get the FMI */</span>
<a name="l00799"></a>00799   <a class="code" href="group__stm8s__stdperiph__driver.html#gae12766577cd9e9d6fb7244d12e77eaa8">_FMI</a> = CAN-&gt;Page.RxFIFO.MFMI;
<a name="l00800"></a>00800   
<a name="l00801"></a>00801   <span class="comment">/* Get the data field */</span>
<a name="l00802"></a>00802   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[0] = CAN-&gt;Page.RxFIFO.MDAR1;
<a name="l00803"></a>00803   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[1] = CAN-&gt;Page.RxFIFO.MDAR2;
<a name="l00804"></a>00804   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[2] = CAN-&gt;Page.RxFIFO.MDAR3;
<a name="l00805"></a>00805   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[3] = CAN-&gt;Page.RxFIFO.MDAR4;
<a name="l00806"></a>00806   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[4] = CAN-&gt;Page.RxFIFO.MDAR5;
<a name="l00807"></a>00807   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[5] = CAN-&gt;Page.RxFIFO.MDAR6;
<a name="l00808"></a>00808   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[6] = CAN-&gt;Page.RxFIFO.MDAR7;
<a name="l00809"></a>00809   <a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[7] = CAN-&gt;Page.RxFIFO.MDAR8;
<a name="l00810"></a>00810   
<a name="l00811"></a>00811   <span class="comment">/* Release the FIFO */</span>
<a name="l00812"></a>00812   <a class="code" href="group__can__exported__functions.html#ga9aff2b516a039bfe020155e204e6059e" title="Releases the CAN FIFO.">CAN_FIFORelease</a>();
<a name="l00813"></a>00813   <span class="comment">/*Restore Last Page*/</span>
<a name="l00814"></a>00814   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00815"></a>00815 }
<a name="l00816"></a>00816 <span class="comment"></span>
<a name="l00817"></a>00817 <span class="comment">/**</span>
<a name="l00818"></a>00818 <span class="comment">  * @brief  Gets the  CAN Id of the received message.</span>
<a name="l00819"></a>00819 <span class="comment">  * @param  None</span>
<a name="l00820"></a>00820 <span class="comment">  * @retval the received CAN message Id.</span>
<a name="l00821"></a>00821 <span class="comment">  * @par Required preconditions:</span>
<a name="l00822"></a>00822 <span class="comment">  * This function is used to get data loaded by CAN_Receive function.</span>
<a name="l00823"></a>00823 <span class="comment">  * Before using this function, CAN_Receive function must be called.</span>
<a name="l00824"></a>00824 <span class="comment">  */</span>
<a name="l00825"></a><a class="code" href="group__can__public__functions.html#ga3b0d9367ab5ae7e2532fc915c92880a0">00825</a> <a class="code" href="group__exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> <a class="code" href="group__can__exported__functions.html#ga3b0d9367ab5ae7e2532fc915c92880a0" title="Gets the CAN Id of the received message.">CAN_GetReceivedId</a>(<span class="keywordtype">void</span>)
<a name="l00826"></a>00826 {
<a name="l00827"></a>00827   <span class="keywordflow">return</span> (<a class="code" href="group__stm8s__stdperiph__driver.html#gaa6522d6f17d349c579954e43d7320cfd">_Id</a>);
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 <span class="comment"></span>
<a name="l00830"></a>00830 <span class="comment">/**</span>
<a name="l00831"></a>00831 <span class="comment">  * @brief  Gets the  CAN IDE of the received message.</span>
<a name="l00832"></a>00832 <span class="comment">  * @param  None</span>
<a name="l00833"></a>00833 <span class="comment">  * @retval the received CAN message IDE.</span>
<a name="l00834"></a>00834 <span class="comment">  * @par Required preconditions:</span>
<a name="l00835"></a>00835 <span class="comment">  * This function is used to get data loaded by CAN_Receive function.</span>
<a name="l00836"></a>00836 <span class="comment">  * Before using this function, CAN_Receive function must be called.</span>
<a name="l00837"></a>00837 <span class="comment">  */</span>
<a name="l00838"></a><a class="code" href="group__can__public__functions.html#gaf3445791e1f17ef234b02e08f7a3208e">00838</a> <a class="code" href="group__can__exported__types.html#ga2f98bfdce9fabdf1ef1f880a9c035ae9" title="CAN identifier type.">CAN_Id_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gaf3445791e1f17ef234b02e08f7a3208e" title="Gets the CAN IDE of the received message.">CAN_GetReceivedIDE</a>(<span class="keywordtype">void</span>)
<a name="l00839"></a>00839 {
<a name="l00840"></a>00840   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga2f98bfdce9fabdf1ef1f880a9c035ae9" title="CAN identifier type.">CAN_Id_TypeDef</a>)(<a class="code" href="group__stm8s__stdperiph__driver.html#ga2d67c20de104a009b9b376c6eba7717d">_IDE</a>);
<a name="l00841"></a>00841 }
<a name="l00842"></a>00842 <span class="comment"></span>
<a name="l00843"></a>00843 <span class="comment">/**</span>
<a name="l00844"></a>00844 <span class="comment">  * @brief  Gets the  CAN RTR of the received message.</span>
<a name="l00845"></a>00845 <span class="comment">  * @param  None</span>
<a name="l00846"></a>00846 <span class="comment">  * @retval the received CAN message RTR.</span>
<a name="l00847"></a>00847 <span class="comment">  * @par Required preconditions:</span>
<a name="l00848"></a>00848 <span class="comment">  * This function is used to get data loaded by CAN_Receive function.</span>
<a name="l00849"></a>00849 <span class="comment">  * Before using this function, CAN_Receive function must be called.</span>
<a name="l00850"></a>00850 <span class="comment">  */</span>
<a name="l00851"></a><a class="code" href="group__can__public__functions.html#ga95bfa4d1dc25d89443fb9f4c2978ede5">00851</a> <a class="code" href="group__can__exported__types.html#ga9fcd586962b424e172b74e2ba0d8b321" title="CAN remote transmission request.">CAN_RTR_TypeDef</a> <a class="code" href="group__can__exported__functions.html#ga95bfa4d1dc25d89443fb9f4c2978ede5" title="Gets the CAN RTR of the received message.">CAN_GetReceivedRTR</a>(<span class="keywordtype">void</span>)
<a name="l00852"></a>00852 {
<a name="l00853"></a>00853   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga9fcd586962b424e172b74e2ba0d8b321" title="CAN remote transmission request.">CAN_RTR_TypeDef</a>)(<a class="code" href="group__stm8s__stdperiph__driver.html#ga19a64cb4d9b1dd7e7c98dfc64354aefb">_RTR</a>);
<a name="l00854"></a>00854 }
<a name="l00855"></a>00855 <span class="comment"></span>
<a name="l00856"></a>00856 <span class="comment">/**</span>
<a name="l00857"></a>00857 <span class="comment">  * @brief  Gets the  CAN DLC of the received message.</span>
<a name="l00858"></a>00858 <span class="comment">  * @param  None</span>
<a name="l00859"></a>00859 <span class="comment">  * @retval the received CAN message DLC.</span>
<a name="l00860"></a>00860 <span class="comment">  * @par Required preconditions:</span>
<a name="l00861"></a>00861 <span class="comment">  * This function is used to get data loaded by CAN_Receive function.</span>
<a name="l00862"></a>00862 <span class="comment">  * Before using this function, CAN_Receive function must be called.</span>
<a name="l00863"></a>00863 <span class="comment">  */</span>
<a name="l00864"></a><a class="code" href="group__can__public__functions.html#ga8e50285e1468bd1cd9dadacfcc342a46">00864</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__can__exported__functions.html#ga8e50285e1468bd1cd9dadacfcc342a46" title="Gets the CAN DLC of the received message.">CAN_GetReceivedDLC</a>(<span class="keywordtype">void</span>)
<a name="l00865"></a>00865 {
<a name="l00866"></a>00866   <span class="keywordflow">return</span> (<a class="code" href="group__stm8s__stdperiph__driver.html#ga18191580405b03f1ce5cf5e0654134c8">_DLC</a>);
<a name="l00867"></a>00867 }
<a name="l00868"></a>00868 <span class="comment"></span>
<a name="l00869"></a>00869 <span class="comment">/**</span>
<a name="l00870"></a>00870 <span class="comment">  * @brief  Gets the  CAN Data of the received message.</span>
<a name="l00871"></a>00871 <span class="comment">  * @param  CAN_DataIndex : number of the received Data, it can</span>
<a name="l00872"></a>00872 <span class="comment">  *  be an integer between 0 to 7.</span>
<a name="l00873"></a>00873 <span class="comment">  * @retval the received CAN message ith Data.</span>
<a name="l00874"></a>00874 <span class="comment">  * @par Required preconditions:</span>
<a name="l00875"></a>00875 <span class="comment">  * This function is used to get data loaded by CAN_Receive function.</span>
<a name="l00876"></a>00876 <span class="comment">  * Before using this function, CAN_Receive function must be called.</span>
<a name="l00877"></a>00877 <span class="comment">  */</span>
<a name="l00878"></a><a class="code" href="group__can__public__functions.html#ga11815d8388fe4592aedd7ab1c153e866">00878</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__can__exported__functions.html#ga11815d8388fe4592aedd7ab1c153e866" title="Gets the CAN Data of the received message.">CAN_GetReceivedData</a>(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_DataIndex)
<a name="l00879"></a>00879 {
<a name="l00880"></a>00880   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gade8b277dfd3983c2872c0a77f9753bfd" title="Macro used by the assert function in order to check the DLC to be sent.">IS_CAN_DLC_OK</a>(CAN_DataIndex));
<a name="l00881"></a>00881   <span class="keywordflow">return</span> (<a class="code" href="group__stm8s__stdperiph__driver.html#ga1a359849f40dfdd50ec80f9ad03509c8">_Data</a>[CAN_DataIndex]);
<a name="l00882"></a>00882 }
<a name="l00883"></a>00883 <span class="comment"></span>
<a name="l00884"></a>00884 <span class="comment">/**</span>
<a name="l00885"></a>00885 <span class="comment">  * @brief  Gets the  CAN FMI of the received message.</span>
<a name="l00886"></a>00886 <span class="comment">  * @param  None</span>
<a name="l00887"></a>00887 <span class="comment">  * @retval the received CAN message FMI.</span>
<a name="l00888"></a>00888 <span class="comment">  * @par Required preconditions:</span>
<a name="l00889"></a>00889 <span class="comment">  * This function is used to get data loaded by CAN_Receive function.</span>
<a name="l00890"></a>00890 <span class="comment">  * Before using this function, CAN_Receive function must be called.</span>
<a name="l00891"></a>00891 <span class="comment">  */</span>
<a name="l00892"></a><a class="code" href="group__can__public__functions.html#gaf3d74d4273a8e307dd932a3186d55318">00892</a> <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="group__can__exported__functions.html#gaf3d74d4273a8e307dd932a3186d55318" title="Gets the CAN FMI of the received message.">CAN_GetReceivedFMI</a>(<span class="keywordtype">void</span>)
<a name="l00893"></a>00893 {
<a name="l00894"></a>00894   <span class="keywordflow">return</span> (<a class="code" href="group__stm8s__stdperiph__driver.html#gae12766577cd9e9d6fb7244d12e77eaa8">_FMI</a>);
<a name="l00895"></a>00895 }
<a name="l00896"></a>00896 <span class="comment"></span>
<a name="l00897"></a>00897 <span class="comment">/**</span>
<a name="l00898"></a>00898 <span class="comment">  * @brief  Returns the Received time stamp.</span>
<a name="l00899"></a>00899 <span class="comment">  * @param  None</span>
<a name="l00900"></a>00900 <span class="comment">  * @retval uint16_t the received  time stamp.</span>
<a name="l00901"></a>00901 <span class="comment">  */</span>
<a name="l00902"></a><a class="code" href="group__can__public__functions.html#ga3f3aca91fadcb06dec6647b3d90744f4">00902</a> <a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a> <a class="code" href="group__can__exported__functions.html#ga3f3aca91fadcb06dec6647b3d90744f4" title="Returns the Received time stamp.">CAN_GetMessageTimeStamp</a>(<span class="keywordtype">void</span>)
<a name="l00903"></a>00903 {
<a name="l00904"></a>00904   <a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a> timestamp = 0;
<a name="l00905"></a>00905   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l00906"></a>00906   
<a name="l00907"></a>00907   <span class="comment">/*switch to the specific page */</span>
<a name="l00908"></a>00908   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a219943e70408a8829e5c17ec8b56a2b5">CAN_Page_RxFifo</a>;
<a name="l00909"></a>00909   <span class="comment">/* Get the Received Time stamp */</span>
<a name="l00910"></a>00910   timestamp = CAN-&gt;Page.RxFIFO.MTSRL;
<a name="l00911"></a>00911   timestamp |= (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)(((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN-&gt;Page.RxFIFO.MTSRH)&lt;&lt;8);
<a name="l00912"></a>00912   
<a name="l00913"></a>00913   <span class="comment">/*Restore Last Page*/</span>
<a name="l00914"></a>00914   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l00915"></a>00915   
<a name="l00916"></a>00916   <span class="keywordflow">return</span> (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)(timestamp);
<a name="l00917"></a>00917 }
<a name="l00918"></a>00918 <span class="comment"></span>
<a name="l00919"></a>00919 <span class="comment">/**</span>
<a name="l00920"></a>00920 <span class="comment">  * @brief  Enters the Sleep low power mode.</span>
<a name="l00921"></a>00921 <span class="comment">  * @param  None</span>
<a name="l00922"></a>00922 <span class="comment">  * @retval  CAN_Sleep_Ok if sleep entered, CAN_Sleep_Failed in an other case.</span>
<a name="l00923"></a>00923 <span class="comment">  */</span>
<a name="l00924"></a><a class="code" href="group__can__public__functions.html#gaa0650a7b886a561d2f2c698c4786f1ea">00924</a> <a class="code" href="group__can__exported__types.html#ga4676ef44ca532acb4a0d2ca287a1385f" title="CAN sleep Status.">CAN_Sleep_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gaa0650a7b886a561d2f2c698c4786f1ea" title="Enters the Sleep low power mode.">CAN_Sleep</a>(<span class="keywordtype">void</span>)
<a name="l00925"></a>00925 {
<a name="l00926"></a>00926   <a class="code" href="group__can__exported__types.html#ga4676ef44ca532acb4a0d2ca287a1385f" title="CAN sleep Status.">CAN_Sleep_TypeDef</a> sleepstatus = <a class="code" href="group__can__exported__types.html#gga4676ef44ca532acb4a0d2ca287a1385fa0a59f8c39590a40e9aae59969a0d6e5a">CAN_Sleep_Failed</a>;
<a name="l00927"></a>00927   
<a name="l00928"></a>00928   <span class="comment">/* Request Sleep mode */</span>
<a name="l00929"></a>00929   CAN-&gt;MCR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;MCR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>)) | <a class="code" href="group__can__registers__bits__definition.html#gadf9602dfb2f95b481b6e642b95991176">CAN_MCR_SLEEP</a>);
<a name="l00930"></a>00930   
<a name="l00931"></a>00931   <span class="comment">/* Sleep mode status */</span>
<a name="l00932"></a>00932   <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; (<a class="code" href="group__can__registers__bits__definition.html#gaf1611badb362f0fd9047af965509f074">CAN_MSR_SLAK</a>|<a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>)) == <a class="code" href="group__can__registers__bits__definition.html#gaf1611badb362f0fd9047af965509f074">CAN_MSR_SLAK</a>)
<a name="l00933"></a>00933   {
<a name="l00934"></a>00934     <span class="comment">/* Sleep mode not entered */</span>
<a name="l00935"></a>00935     sleepstatus =  <a class="code" href="group__can__exported__types.html#gga4676ef44ca532acb4a0d2ca287a1385fae51f6a228b3ae25a76287f5b45353b49">CAN_Sleep_Ok</a>;
<a name="l00936"></a>00936   }
<a name="l00937"></a>00937   
<a name="l00938"></a>00938   <span class="comment">/* At this step, sleep mode status */</span>
<a name="l00939"></a>00939   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga4676ef44ca532acb4a0d2ca287a1385f" title="CAN sleep Status.">CAN_Sleep_TypeDef</a>) sleepstatus;
<a name="l00940"></a>00940 }
<a name="l00941"></a>00941 <span class="comment"></span>
<a name="l00942"></a>00942 <span class="comment">/**</span>
<a name="l00943"></a>00943 <span class="comment">  * @brief  Wakes the CAN up.</span>
<a name="l00944"></a>00944 <span class="comment">  * @param  None</span>
<a name="l00945"></a>00945 <span class="comment">  * @retval CAN_WakeUp_Ok if sleep mode left, CAN_WakeUp_Failed in an other  case.</span>
<a name="l00946"></a>00946 <span class="comment">  */</span>
<a name="l00947"></a><a class="code" href="group__can__public__functions.html#ga6cf8f328575ea322216a893a0b8d9e60">00947</a> <a class="code" href="group__can__exported__types.html#ga5cefb02e7e801d0ce9a0096615702dbd" title="CAN wake up status.">CAN_WakeUp_TypeDef</a> <a class="code" href="group__can__exported__functions.html#ga6cf8f328575ea322216a893a0b8d9e60" title="Wakes the CAN up.">CAN_WakeUp</a>(<span class="keywordtype">void</span>)
<a name="l00948"></a>00948 {
<a name="l00949"></a>00949   <a class="code" href="group__can__exported__types.html#ga5cefb02e7e801d0ce9a0096615702dbd" title="CAN wake up status.">CAN_WakeUp_TypeDef</a> wakeupstatus = <a class="code" href="group__can__exported__types.html#gga5cefb02e7e801d0ce9a0096615702dbda1aa53249a30ff9f55b4bc4e91eb315e8">CAN_WakeUp_Failed</a>;
<a name="l00950"></a>00950   
<a name="l00951"></a>00951   <span class="comment">/* Wake up request */</span>
<a name="l00952"></a>00952   CAN-&gt;MCR &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__bits__definition.html#gadf9602dfb2f95b481b6e642b95991176">CAN_MCR_SLEEP</a>);
<a name="l00953"></a>00953   
<a name="l00954"></a>00954   <span class="comment">/* Sleep mode status */</span>
<a name="l00955"></a>00955   <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; <a class="code" href="group__can__registers__bits__definition.html#gaf1611badb362f0fd9047af965509f074">CAN_MSR_SLAK</a>) != <a class="code" href="group__can__registers__bits__definition.html#gaf1611badb362f0fd9047af965509f074">CAN_MSR_SLAK</a>)
<a name="l00956"></a>00956   {
<a name="l00957"></a>00957     <span class="comment">/* Sleep mode exited */</span>
<a name="l00958"></a>00958     wakeupstatus = <a class="code" href="group__can__exported__types.html#gga5cefb02e7e801d0ce9a0096615702dbdacddf340ad70593f755fb7598c0139340">CAN_WakeUp_Ok</a>;
<a name="l00959"></a>00959   }
<a name="l00960"></a>00960   
<a name="l00961"></a>00961   <span class="comment">/* At this step, sleep mode status */</span>
<a name="l00962"></a>00962   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga5cefb02e7e801d0ce9a0096615702dbd" title="CAN wake up status.">CAN_WakeUp_TypeDef</a>)wakeupstatus;
<a name="l00963"></a>00963 }
<a name="l00964"></a>00964 <span class="comment"></span>
<a name="l00965"></a>00965 <span class="comment">/**</span>
<a name="l00966"></a>00966 <span class="comment">  * @brief  Select the CAN Operation mode.</span>
<a name="l00967"></a>00967 <span class="comment">  * @param  CAN_OperatingMode CAN Operating Mode ,</span>
<a name="l00968"></a>00968 <span class="comment">  *         this parameter can be one of @ref CAN_OperatingMode_TypeDef enumeration.</span>
<a name="l00969"></a>00969 <span class="comment">  * @retval the status of the requested mode which can be </span>
<a name="l00970"></a>00970 <span class="comment">  *         - CAN_ModeStatus_Failed    CAN failed entering the specific mode</span>
<a name="l00971"></a>00971 <span class="comment">  *         - CAN_ModeStatus_Success  CAN Succeed entering the specific mode </span>
<a name="l00972"></a>00972 <span class="comment"></span>
<a name="l00973"></a>00973 <span class="comment">  */</span>
<a name="l00974"></a><a class="code" href="group__can__public__functions.html#gad7427e016eb442c7e0928beea3c51e75">00974</a> <a class="code" href="group__can__exported__types.html#ga4c124ed7318118295095483d70dea62e" title="CAN operating mode status.">CAN_ModeStatus_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gad7427e016eb442c7e0928beea3c51e75" title="Select the CAN Operation mode.">CAN_OperatingModeRequest</a>(<a class="code" href="group__can__exported__types.html#ga3b0ebccb7a5c4c45202f42039bb72119" title="CAN operating mode.">CAN_OperatingMode_TypeDef</a> CAN_OperatingMode)
<a name="l00975"></a>00975 {
<a name="l00976"></a>00976   <a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a> timeout = <a class="code" href="group__stm8s__stdperiph__driver.html#ga3cd75aafae9c820856f43a33838cee8d">CAN_ACKNOWLEDGE_TIMEOUT</a>;
<a name="l00977"></a>00977   <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> modestatus = 0;
<a name="l00978"></a>00978   
<a name="l00979"></a>00979   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga5806c65929160cc492ae65e50fdacacb" title="Macro used by the assert function in order to check CAN operating mode.">IS_CAN_OPERATINGMODE_OK</a>(CAN_OperatingMode));
<a name="l00980"></a>00980   
<a name="l00981"></a>00981   <span class="keywordflow">if</span> (CAN_OperatingMode == <a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a8d927b965a6e91789c6f47e09a691a3f">CAN_OperatingMode_Initialization</a>)
<a name="l00982"></a>00982   {
<a name="l00983"></a>00983     <span class="comment">/* Request initialisation */</span>
<a name="l00984"></a>00984     CAN-&gt;MCR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;MCR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__bits__definition.html#gadf9602dfb2f95b481b6e642b95991176">CAN_MCR_SLEEP</a>)) | <a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>);
<a name="l00985"></a>00985     
<a name="l00986"></a>00986     <span class="comment">/* Wait the acknowledge */</span>
<a name="l00987"></a>00987     <span class="keywordflow">while</span> (((CAN-&gt;MSR &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">CAN_MODE_MASK</a>) != <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>) &amp;&amp; (timeout != 0))
<a name="l00988"></a>00988     {
<a name="l00989"></a>00989       timeout--;
<a name="l00990"></a>00990     }
<a name="l00991"></a>00991     <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">CAN_MODE_MASK</a>) != <a class="code" href="group__can__registers__bits__definition.html#ga2871cee90ebecb760bab16e9c039b682">CAN_MSR_INAK</a>)
<a name="l00992"></a>00992     {
<a name="l00993"></a>00993       modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62eab04e53e92bb28aebe8c831b8000a0574">CAN_ModeStatus_Failed</a>;
<a name="l00994"></a>00994     }
<a name="l00995"></a>00995     <span class="keywordflow">else</span>
<a name="l00996"></a>00996     {
<a name="l00997"></a>00997       modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62ea113ca153effe4014d215c78a43fcf6fa">CAN_ModeStatus_Success</a>;  
<a name="l00998"></a>00998     }
<a name="l00999"></a>00999     
<a name="l01000"></a>01000   }
<a name="l01001"></a>01001   <span class="keywordflow">else</span>  <span class="keywordflow">if</span> (CAN_OperatingMode == <a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a7f31500b42d688709d322111bb8fc9e8">CAN_OperatingMode_Normal</a>)
<a name="l01002"></a>01002   {
<a name="l01003"></a>01003     <span class="comment">/* Request leave initialisation and sleep mode  and enter Normal mode */</span>
<a name="l01004"></a>01004     CAN-&gt;MCR &amp;= (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~(<a class="code" href="group__can__registers__bits__definition.html#gadf9602dfb2f95b481b6e642b95991176">CAN_MCR_SLEEP</a>|<a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>));
<a name="l01005"></a>01005     
<a name="l01006"></a>01006     <span class="comment">/* Wait the acknowledge */</span>
<a name="l01007"></a>01007     <span class="keywordflow">while</span> (((CAN-&gt;MSR &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">CAN_MODE_MASK</a>) != 0) &amp;&amp; (timeout!=0))
<a name="l01008"></a>01008     {
<a name="l01009"></a>01009       timeout--;
<a name="l01010"></a>01010     }
<a name="l01011"></a>01011     <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">CAN_MODE_MASK</a>) != 0)
<a name="l01012"></a>01012     {
<a name="l01013"></a>01013       modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62eab04e53e92bb28aebe8c831b8000a0574">CAN_ModeStatus_Failed</a>;
<a name="l01014"></a>01014     }
<a name="l01015"></a>01015     <span class="keywordflow">else</span>
<a name="l01016"></a>01016     {
<a name="l01017"></a>01017       modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62ea113ca153effe4014d215c78a43fcf6fa">CAN_ModeStatus_Success</a>;  
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019   }
<a name="l01020"></a>01020   <span class="keywordflow">else</span>  <span class="keywordflow">if</span> (CAN_OperatingMode == <a class="code" href="group__can__exported__types.html#gga3b0ebccb7a5c4c45202f42039bb72119a9ca97aa9bb00833344d7b170b26c5f62">CAN_OperatingMode_Sleep</a>)
<a name="l01021"></a>01021   {
<a name="l01022"></a>01022     <span class="comment">/* Request Sleep mode */</span>
<a name="l01023"></a>01023     CAN-&gt;MCR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)((<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN-&gt;MCR &amp; (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(~<a class="code" href="group__can__registers__bits__definition.html#ga0cf12be5661908dbe38aa14cd4c3a356">CAN_MCR_INRQ</a>)) | <a class="code" href="group__can__registers__bits__definition.html#gadf9602dfb2f95b481b6e642b95991176">CAN_MCR_SLEEP</a>);
<a name="l01024"></a>01024     
<a name="l01025"></a>01025     <span class="comment">/* Wait the acknowledge */</span>
<a name="l01026"></a>01026     <span class="keywordflow">while</span> (((CAN-&gt;MSR &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">CAN_MODE_MASK</a>) != <a class="code" href="group__can__registers__bits__definition.html#gaf1611badb362f0fd9047af965509f074">CAN_MSR_SLAK</a>) &amp;&amp; (timeout!=0))
<a name="l01027"></a>01027     {
<a name="l01028"></a>01028       timeout--;
<a name="l01029"></a>01029     }
<a name="l01030"></a>01030     <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; <a class="code" href="group__stm8s__stdperiph__driver.html#ga79094ce5a3a2f717140e8cc9b7c161b6">CAN_MODE_MASK</a>) != <a class="code" href="group__can__registers__bits__definition.html#gaf1611badb362f0fd9047af965509f074">CAN_MSR_SLAK</a>)
<a name="l01031"></a>01031     {
<a name="l01032"></a>01032       modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62eab04e53e92bb28aebe8c831b8000a0574">CAN_ModeStatus_Failed</a>;  
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034     <span class="keywordflow">else</span>
<a name="l01035"></a>01035     {
<a name="l01036"></a>01036       modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62ea113ca153effe4014d215c78a43fcf6fa">CAN_ModeStatus_Success</a>;  
<a name="l01037"></a>01037     }
<a name="l01038"></a>01038   }
<a name="l01039"></a>01039   <span class="keywordflow">else</span>
<a name="l01040"></a>01040   {
<a name="l01041"></a>01041     modestatus = <a class="code" href="group__can__exported__types.html#gga4c124ed7318118295095483d70dea62eab04e53e92bb28aebe8c831b8000a0574">CAN_ModeStatus_Failed</a>;
<a name="l01042"></a>01042   }
<a name="l01043"></a>01043   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga4c124ed7318118295095483d70dea62e" title="CAN operating mode status.">CAN_ModeStatus_TypeDef</a>)(modestatus);
<a name="l01044"></a>01044 }
<a name="l01045"></a>01045 <span class="comment"></span>
<a name="l01046"></a>01046 <span class="comment">/**</span>
<a name="l01047"></a>01047 <span class="comment">  * @brief  Gets the  Last Error Code.</span>
<a name="l01048"></a>01048 <span class="comment">  * @param  None</span>
<a name="l01049"></a>01049 <span class="comment">  * @retval Error Code.</span>
<a name="l01050"></a>01050 <span class="comment">  */</span>
<a name="l01051"></a><a class="code" href="group__can__public__functions.html#ga0858da649e79480dc5728e10f0a20864">01051</a> <a class="code" href="group__can__exported__types.html#ga8da3c679d51e2fadda60deee2615cf1c" title="CAN Error Code description.">CAN_ErrorCode_TypeDef</a> <a class="code" href="group__can__exported__functions.html#ga0858da649e79480dc5728e10f0a20864" title="Gets the Last Error Code.">CAN_GetLastErrorCode</a>(<span class="keywordtype">void</span>)
<a name="l01052"></a>01052 {
<a name="l01053"></a>01053   <a class="code" href="group__can__exported__types.html#ga8da3c679d51e2fadda60deee2615cf1c" title="CAN Error Code description.">CAN_ErrorCode_TypeDef</a> errcode = <a class="code" href="group__can__exported__types.html#gga8da3c679d51e2fadda60deee2615cf1ca991221003a00227a6a62b6c8e26899b8">CAN_ErrorCode_NoErr</a>;
<a name="l01054"></a>01054   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l01055"></a>01055   
<a name="l01056"></a>01056   CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01057"></a>01057   errcode = (<a class="code" href="group__can__exported__types.html#ga8da3c679d51e2fadda60deee2615cf1c" title="CAN Error Code description.">CAN_ErrorCode_TypeDef</a>)((CAN-&gt;Page.Config.ESR) &amp; (<a class="code" href="group__can__registers__bits__definition.html#gab9f86741dd89034900e300499ae2272e">CAN_ESR_LEC</a>));
<a name="l01058"></a>01058   
<a name="l01059"></a>01059   <span class="comment">/*Restore Last Page*/</span>
<a name="l01060"></a>01060   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l01061"></a>01061   
<a name="l01062"></a>01062   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#ga8da3c679d51e2fadda60deee2615cf1c" title="CAN Error Code description.">CAN_ErrorCode_TypeDef</a>)(errcode);
<a name="l01063"></a>01063 }
<a name="l01064"></a>01064 <span class="comment"></span>
<a name="l01065"></a>01065 <span class="comment">/**</span>
<a name="l01066"></a>01066 <span class="comment">  * @brief  Clears the CAN&#39;s pending flags.</span>
<a name="l01067"></a>01067 <span class="comment">  * @param   CAN_Flag : Flag to be cleared, can be one of the following parameters:</span>
<a name="l01068"></a>01068 <span class="comment">  *          CAN_FLAG_RQCP0            Request MailBox0  Flag</span>
<a name="l01069"></a>01069 <span class="comment">  *          CAN_FLAG_RQCP1            Request MailBox1  Flag</span>
<a name="l01070"></a>01070 <span class="comment">  *          CAN_FLAG_RQCP2            Request MailBox2  Flag</span>
<a name="l01071"></a>01071 <span class="comment">  *          CAN_FLAG_FF               FIFO Full  Flag</span>
<a name="l01072"></a>01072 <span class="comment">  *          CAN_FLAG_FOV              FIFO Overrun  Flag</span>
<a name="l01073"></a>01073 <span class="comment">  *          CAN_FLAG_WKU              wake up  Flag</span>
<a name="l01074"></a>01074 <span class="comment">  *          CAN_FLAG_LEC              Last error code Flag</span>
<a name="l01075"></a>01075 <span class="comment">  * @retval None</span>
<a name="l01076"></a>01076 <span class="comment">  */</span>
<a name="l01077"></a><a class="code" href="group__can__public__functions.html#gac2b3b07f2a4e57553b168365279f7fbf">01077</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#gac2b3b07f2a4e57553b168365279f7fbf" title="Clears the CAN&#39;s pending flags.">CAN_ClearFlag</a>(<a class="code" href="group__can__exported__types.html#gae2704b2cb2176e08484393d1f54ccf4d" title="CAN flags.">CAN_FLAG_TypeDef</a> CAN_Flag)
<a name="l01078"></a>01078 {
<a name="l01079"></a>01079   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = (<a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a>)0;
<a name="l01080"></a>01080   <span class="comment">/* Check the parameters */</span>
<a name="l01081"></a>01081   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga23ff3e14814274da52b3723f6df9d85b" title="Macro used by the assert function in order to check CAN flags which can be cleared by CAN_ClearFlag...">IS_CAN_FLAG_CLEAR_OK</a>(CAN_Flag));
<a name="l01082"></a>01082   <span class="keywordflow">if</span> (((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag &amp; 0x0700)!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01083"></a>01083   {
<a name="l01084"></a>01084     <span class="keywordflow">if</span> (((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag &amp; 0x020B)!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01085"></a>01085     {
<a name="l01086"></a>01086       <span class="comment">/*Receive Flags*/</span>
<a name="l01087"></a>01087       CAN-&gt;RFR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Flag);
<a name="l01088"></a>01088     }
<a name="l01089"></a>01089     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag &amp; 0x0403)!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01090"></a>01090     {
<a name="l01091"></a>01091       <span class="comment">/*Transmit Flags*/</span>
<a name="l01092"></a>01092       CAN-&gt;TSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Flag);
<a name="l01093"></a>01093     }
<a name="l01094"></a>01094     <span class="keywordflow">else</span> <span class="comment">/*if((CAN_Flag &amp; 0x0108)!=(uint16_t)RESET)*/</span>
<a name="l01095"></a>01095     {
<a name="l01096"></a>01096       <span class="comment">/*wake up Flags*/</span>
<a name="l01097"></a>01097       CAN-&gt;MSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)(CAN_Flag);
<a name="l01098"></a>01098     }
<a name="l01099"></a>01099   }
<a name="l01100"></a>01100   <span class="keywordflow">else</span>
<a name="l01101"></a>01101   {
<a name="l01102"></a>01102     <span class="comment">/*Error Flags*/</span>
<a name="l01103"></a>01103     can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l01104"></a>01104     
<a name="l01105"></a>01105     <span class="comment">/* Clear the selected CAN flags */</span>
<a name="l01106"></a>01106     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01107"></a>01107     CAN-&gt;Page.Config.ESR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01108"></a>01108     
<a name="l01109"></a>01109     <span class="comment">/*Restore Last Page*/</span>
<a name="l01110"></a>01110     <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l01111"></a>01111   }
<a name="l01112"></a>01112 }
<a name="l01113"></a>01113 <span class="comment"></span>
<a name="l01114"></a>01114 <span class="comment">/**</span>
<a name="l01115"></a>01115 <span class="comment">  * @brief  Checks whether the specified CAN flag is set or not.</span>
<a name="l01116"></a>01116 <span class="comment">  * @param  CAN_Flag : specifies the flag to check, can be one of @ref CAN_FLAG_TypeDef enumeration.</span>
<a name="l01117"></a>01117 <span class="comment">  * @retval The new state of CAN_FLAG which can be one of @ref FlagStatus.</span>
<a name="l01118"></a>01118 <span class="comment">  */</span>
<a name="l01119"></a><a class="code" href="group__can__public__functions.html#gaa9034ad7c66acdc9782d6fd5fca4cc3e">01119</a> <a class="code" href="group__exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a> <a class="code" href="group__can__exported__functions.html#gaa9034ad7c66acdc9782d6fd5fca4cc3e" title="Checks whether the specified CAN flag is set or not.">CAN_GetFlagStatus</a>(<a class="code" href="group__can__exported__types.html#gae2704b2cb2176e08484393d1f54ccf4d" title="CAN flags.">CAN_FLAG_TypeDef</a> CAN_Flag)
<a name="l01120"></a>01120 {
<a name="l01121"></a>01121   <a class="code" href="group__exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a> bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01122"></a>01122   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = (<a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a>)0;
<a name="l01123"></a>01123   
<a name="l01124"></a>01124   <span class="comment">/* Check the parameters */</span>
<a name="l01125"></a>01125   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gae2b68c0959540f18cbc941a7d2529673" title="Macro used by the assert function in order to check CAN flags which can be got by CAN_GetFlagStatus...">IS_CAN_FLAG_STATUS_OK</a>(CAN_Flag));
<a name="l01126"></a>01126   
<a name="l01127"></a>01127   <span class="keywordflow">if</span> (((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag &amp; 0x0700)!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01128"></a>01128   {
<a name="l01129"></a>01129     <span class="keywordflow">if</span> (((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag &amp; 0x020B)!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01130"></a>01130     {
<a name="l01131"></a>01131       <span class="comment">/*Receive Flags*/</span>
<a name="l01132"></a>01132       <span class="keywordflow">if</span> ((CAN-&gt;RFR &amp; (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag )!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01133"></a>01133       {
<a name="l01134"></a>01134         <span class="comment">/* CAN_FLAG is set */</span>
<a name="l01135"></a>01135         bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;
<a name="l01136"></a>01136       }
<a name="l01137"></a>01137       <span class="keywordflow">else</span>
<a name="l01138"></a>01138       {
<a name="l01139"></a>01139         <span class="comment">/* CAN_FLAG is reset */</span>
<a name="l01140"></a>01140         bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01141"></a>01141       }
<a name="l01142"></a>01142       
<a name="l01143"></a>01143     }
<a name="l01144"></a>01144     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag &amp; 0x0403)!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01145"></a>01145     {
<a name="l01146"></a>01146       <span class="comment">/*Transmit Flags*/</span>
<a name="l01147"></a>01147       <span class="keywordflow">if</span> ((CAN-&gt;TSR &amp; (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag )!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01148"></a>01148       {
<a name="l01149"></a>01149         <span class="comment">/* CAN_FLAG is set */</span>
<a name="l01150"></a>01150         bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;
<a name="l01151"></a>01151       }
<a name="l01152"></a>01152       <span class="keywordflow">else</span>
<a name="l01153"></a>01153       {
<a name="l01154"></a>01154         <span class="comment">/* CAN_FLAG is reset */</span>
<a name="l01155"></a>01155         bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01156"></a>01156       }
<a name="l01157"></a>01157     }
<a name="l01158"></a>01158     <span class="keywordflow">else</span> <span class="comment">/*if((CAN_Flag &amp; 0x0108)!=(uint16_t)RESET)*/</span>
<a name="l01159"></a>01159     {
<a name="l01160"></a>01160       <span class="comment">/*wake up Flags*/</span>
<a name="l01161"></a>01161       <span class="keywordflow">if</span> ((CAN-&gt;MSR &amp; (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag )!= <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01162"></a>01162       {
<a name="l01163"></a>01163         <span class="comment">/* CAN_FLAG is set */</span>
<a name="l01164"></a>01164         bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;
<a name="l01165"></a>01165       }
<a name="l01166"></a>01166       <span class="keywordflow">else</span>
<a name="l01167"></a>01167       {
<a name="l01168"></a>01168         <span class="comment">/* CAN_FLAG is reset */</span>
<a name="l01169"></a>01169         bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01170"></a>01170       }
<a name="l01171"></a>01171     }
<a name="l01172"></a>01172   }
<a name="l01173"></a>01173   <span class="keywordflow">else</span>
<a name="l01174"></a>01174   {
<a name="l01175"></a>01175     <span class="comment">/*Error Flags*/</span>
<a name="l01176"></a>01176     can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l01177"></a>01177     
<a name="l01178"></a>01178     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01179"></a>01179     <span class="keywordflow">if</span> ((CAN-&gt;Page.Config.ESR &amp; (<a class="code" href="group__exported__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>)CAN_Flag) != <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01180"></a>01180     {
<a name="l01181"></a>01181       <span class="comment">/* CAN_FLAG is set */</span>
<a name="l01182"></a>01182       bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;
<a name="l01183"></a>01183     }
<a name="l01184"></a>01184     <span class="keywordflow">else</span>
<a name="l01185"></a>01185     {
<a name="l01186"></a>01186       <span class="comment">/* CAN_FLAG is reset */</span>
<a name="l01187"></a>01187       bitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01188"></a>01188     }
<a name="l01189"></a>01189     <span class="comment">/*Restore Last Page*/</span>
<a name="l01190"></a>01190     <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l01191"></a>01191   }
<a name="l01192"></a>01192   
<a name="l01193"></a>01193   
<a name="l01194"></a>01194   <span class="comment">/* Return the CAN_FLAG status */</span>
<a name="l01195"></a>01195   <span class="keywordflow">return</span>  (<a class="code" href="group__exported__types.html#ga89136caac2e14c55151f527ac02daaff">FlagStatus</a>)bitstatus;
<a name="l01196"></a>01196 }
<a name="l01197"></a>01197 <span class="comment"></span>
<a name="l01198"></a>01198 <span class="comment">/**</span>
<a name="l01199"></a>01199 <span class="comment">  * @brief  Checks whether the specified CAN interrupt has occurred or not.</span>
<a name="l01200"></a>01200 <span class="comment">  * @param   CAN_IT: specifies the CAN interrupt source to check, can be one of @ref CAN_IT_TypeDef.</span>
<a name="l01201"></a>01201 <span class="comment">  * @retval The new state of CAN_IT, which can be one of @ref ITStatus.</span>
<a name="l01202"></a>01202 <span class="comment">  */</span>
<a name="l01203"></a><a class="code" href="group__can__public__functions.html#ga8c2d802e151a0d6371a75cc0efec6787">01203</a> <a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> <a class="code" href="group__can__exported__functions.html#ga8c2d802e151a0d6371a75cc0efec6787" title="Checks whether the specified CAN interrupt has occurred or not.">CAN_GetITStatus</a>(<a class="code" href="group__can__exported__types.html#gaf46d91198e45ab5f412826762098afa5" title="CAN interrupts.">CAN_IT_TypeDef</a> CAN_IT)
<a name="l01204"></a>01204 {
<a name="l01205"></a>01205   <a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01206"></a>01206   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l01207"></a>01207   
<a name="l01208"></a>01208   <span class="comment">/* Check the parameters */</span>
<a name="l01209"></a>01209   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#ga79fdf4c1b1f0c07000e01d6ab80fa590" title="Macro used by the assert function in order to check the CAN status interrupts.">IS_CAN_IT_STATUS_OK</a>(CAN_IT));
<a name="l01210"></a>01210   
<a name="l01211"></a>01211   
<a name="l01212"></a>01212   <span class="keywordflow">switch</span> (CAN_IT)
<a name="l01213"></a>01213   {
<a name="l01214"></a>01214   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a2517d05151accb4d04d57f1d48e17cfc">CAN_IT_TME</a>:
<a name="l01215"></a>01215     <span class="keywordflow">if</span> ((CAN-&gt;IER &amp; <a class="code" href="group__can__registers__bits__definition.html#gafe027af7acd051f5a52db78608a36e26">CAN_IER_TMEIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01216"></a>01216     {
<a name="l01217"></a>01217       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;TSR, <a class="code" href="group__can__registers__bits__definition.html#ga3b44cddd1e7f60831671206c6ee757e0">CAN_TSR_RQCP012</a>);
<a name="l01218"></a>01218     }
<a name="l01219"></a>01219     <span class="keywordflow">else</span>
<a name="l01220"></a>01220     {
<a name="l01221"></a>01221       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01222"></a>01222     }
<a name="l01223"></a>01223     <span class="keywordflow">break</span>;
<a name="l01224"></a>01224     
<a name="l01225"></a>01225   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ac68543ec6c5ec4636f615421dd222ff7">CAN_IT_FMP</a>:
<a name="l01226"></a>01226     <span class="keywordflow">if</span> ((CAN-&gt;IER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga80d1851070736713733a994404792e42">CAN_IER_FMPIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01227"></a>01227     {
<a name="l01228"></a>01228       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;RFR, <a class="code" href="group__can__registers__bits__definition.html#ga60daa774ca757ede2fc74943fd3d97a9">CAN_RFR_FMP01</a>);
<a name="l01229"></a>01229     }
<a name="l01230"></a>01230     <span class="keywordflow">else</span>
<a name="l01231"></a>01231     {
<a name="l01232"></a>01232       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01233"></a>01233     }
<a name="l01234"></a>01234     <span class="keywordflow">break</span>;
<a name="l01235"></a>01235   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a99ae8adb702151fe33c233bd0cc42691">CAN_IT_FF</a>:
<a name="l01236"></a>01236     <span class="keywordflow">if</span> ((CAN-&gt;IER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga8e8ac3caa17b8a056a5a089af01a8870">CAN_IER_FFIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01237"></a>01237     {
<a name="l01238"></a>01238       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;RFR, <a class="code" href="group__can__registers__bits__definition.html#ga5e44acdcf8723c1a39de00d0e1594411">CAN_RFR_FULL</a>);
<a name="l01239"></a>01239     }
<a name="l01240"></a>01240     <span class="keywordflow">else</span>
<a name="l01241"></a>01241     {
<a name="l01242"></a>01242       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01243"></a>01243     }
<a name="l01244"></a>01244     <span class="keywordflow">break</span>;
<a name="l01245"></a>01245   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a9483d8cf98c2e2e229023009e18a5174">CAN_IT_FOV</a>:
<a name="l01246"></a>01246     <span class="keywordflow">if</span> ((CAN-&gt;IER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga1d841cf395d74b222cecefaa07a3c452">CAN_IER_FOVIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01247"></a>01247     {
<a name="l01248"></a>01248       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;RFR, <a class="code" href="group__can__registers__bits__definition.html#ga770d1c11ed49baa7866c34d49ecaf24c">CAN_RFR_FOVR</a>);
<a name="l01249"></a>01249     }
<a name="l01250"></a>01250     <span class="keywordflow">else</span>
<a name="l01251"></a>01251     {
<a name="l01252"></a>01252       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01253"></a>01253     }
<a name="l01254"></a>01254     <span class="keywordflow">break</span>;
<a name="l01255"></a>01255   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5acc56c1041dff4e00476b24b992b73018">CAN_IT_WKU</a>:
<a name="l01256"></a>01256     <span class="keywordflow">if</span> ((CAN-&gt;IER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga37f3438e80288c1791de27042df9838e">CAN_IER_WKUIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01257"></a>01257     {
<a name="l01258"></a>01258       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;MSR, <a class="code" href="group__can__registers__bits__definition.html#ga0f4c753b96d21c5001b39ad5b08519fc">CAN_MSR_WKUI</a>);
<a name="l01259"></a>01259     }
<a name="l01260"></a>01260     <span class="keywordflow">else</span>
<a name="l01261"></a>01261     {
<a name="l01262"></a>01262       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01263"></a>01263     }
<a name="l01264"></a>01264     <span class="keywordflow">break</span>;
<a name="l01265"></a>01265     
<a name="l01266"></a>01266   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a952732500c992b32b98d069ac5b9760c">CAN_IT_ERR</a>:
<a name="l01267"></a>01267     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01268"></a>01268     <span class="keywordflow">if</span> ((CAN-&gt;Page.Config.EIER &amp; <a class="code" href="group__can__registers__bits__definition.html#gaf657a0610929463a8b92f1a7db8e96d9">CAN_EIER_ERRIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01269"></a>01269     {
<a name="l01270"></a>01270       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;Page.Config.ESR, <a class="code" href="group__can__registers__bits__definition.html#ga2c0c02829fb41ac2a1b1852c19931de8">CAN_ESR_EWGF</a>|<a class="code" href="group__can__registers__bits__definition.html#ga633c961d528cbf8093b0e05e92225ff0">CAN_ESR_EPVF</a>|<a class="code" href="group__can__registers__bits__definition.html#ga619d49f67f1835a7efc457205fea1225">CAN_ESR_BOFF</a>|<a class="code" href="group__can__registers__bits__definition.html#gab9f86741dd89034900e300499ae2272e">CAN_ESR_LEC</a>);
<a name="l01271"></a>01271     }
<a name="l01272"></a>01272     <span class="keywordflow">else</span>
<a name="l01273"></a>01273     {
<a name="l01274"></a>01274       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01275"></a>01275     }
<a name="l01276"></a>01276     <span class="keywordflow">break</span>;
<a name="l01277"></a>01277     
<a name="l01278"></a>01278   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ab3466da99b9782a5f6873fd6cef736cb">CAN_IT_EWG</a>:
<a name="l01279"></a>01279     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01280"></a>01280     <span class="keywordflow">if</span> ((CAN-&gt;Page.Config.EIER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga7ca9f808906af20e80581b536622d99a">CAN_EIER_EWGIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01281"></a>01281     {
<a name="l01282"></a>01282       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;Page.Config.ESR, <a class="code" href="group__can__registers__bits__definition.html#ga2c0c02829fb41ac2a1b1852c19931de8">CAN_ESR_EWGF</a>);
<a name="l01283"></a>01283     }
<a name="l01284"></a>01284     <span class="keywordflow">else</span>
<a name="l01285"></a>01285     {
<a name="l01286"></a>01286       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01287"></a>01287     }
<a name="l01288"></a>01288     <span class="keywordflow">break</span>;
<a name="l01289"></a>01289     
<a name="l01290"></a>01290   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ac0395220530542e3d7db47304d311bf1">CAN_IT_EPV</a>:
<a name="l01291"></a>01291     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01292"></a>01292     <span class="keywordflow">if</span> ((CAN-&gt;Page.Config.EIER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga0a3cda64747c63670e806a0d8ed0d1fa">CAN_EIER_EPVIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01293"></a>01293     {
<a name="l01294"></a>01294       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;Page.Config.ESR, <a class="code" href="group__can__registers__bits__definition.html#ga633c961d528cbf8093b0e05e92225ff0">CAN_ESR_EPVF</a>);
<a name="l01295"></a>01295     }
<a name="l01296"></a>01296     <span class="keywordflow">else</span>
<a name="l01297"></a>01297     {
<a name="l01298"></a>01298       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01299"></a>01299     }
<a name="l01300"></a>01300     <span class="keywordflow">break</span>;
<a name="l01301"></a>01301   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a61dee9273f683eeeada848528fb17121">CAN_IT_BOF</a>:
<a name="l01302"></a>01302     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01303"></a>01303     <span class="keywordflow">if</span> ((CAN-&gt;Page.Config.EIER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga6723e7095734bc27bf47bd79b99ba15b">CAN_EIER_BOFIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01304"></a>01304     {
<a name="l01305"></a>01305       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;Page.Config.ESR, <a class="code" href="group__can__registers__bits__definition.html#ga619d49f67f1835a7efc457205fea1225">CAN_ESR_BOFF</a>);
<a name="l01306"></a>01306     }
<a name="l01307"></a>01307     <span class="keywordflow">else</span>
<a name="l01308"></a>01308     {
<a name="l01309"></a>01309       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01310"></a>01310     }
<a name="l01311"></a>01311     <span class="keywordflow">break</span>;
<a name="l01312"></a>01312   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ad093fad868f8467ff5d55a0a3828eacb">CAN_IT_LEC</a>:
<a name="l01313"></a>01313     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01314"></a>01314     <span class="keywordflow">if</span> ((CAN-&gt;Page.Config.EIER &amp; <a class="code" href="group__can__registers__bits__definition.html#ga838486e954723a9a5726a09226d2a714">CAN_EIER_LECIE</a>) !=<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01315"></a>01315     {
<a name="l01316"></a>01316       pendingbitstatus = <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(CAN-&gt;Page.Config.ESR, <a class="code" href="group__can__registers__bits__definition.html#gab9f86741dd89034900e300499ae2272e">CAN_ESR_LEC</a>);
<a name="l01317"></a>01317     }
<a name="l01318"></a>01318     <span class="keywordflow">else</span>
<a name="l01319"></a>01319     {
<a name="l01320"></a>01320       pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01321"></a>01321     }
<a name="l01322"></a>01322     <span class="keywordflow">break</span>;
<a name="l01323"></a>01323   <span class="keywordflow">default</span> :
<a name="l01324"></a>01324     pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01325"></a>01325     <span class="keywordflow">break</span>;
<a name="l01326"></a>01326   }
<a name="l01327"></a>01327   <span class="comment">/*Restore Last Page*/</span>
<a name="l01328"></a>01328   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l01329"></a>01329   <span class="comment">/* Return the CAN_IT status */</span>
<a name="l01330"></a>01330   <span class="keywordflow">return</span>  (<a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a>)pendingbitstatus;
<a name="l01331"></a>01331 }
<a name="l01332"></a>01332 <span class="comment"></span>
<a name="l01333"></a>01333 <span class="comment">/**</span>
<a name="l01334"></a>01334 <span class="comment">  * @brief   Clears the CANs interrupt pending bits.</span>
<a name="l01335"></a>01335 <span class="comment">  * @param   CAN_IT: specifies the interrupt pending bit to clear,</span>
<a name="l01336"></a>01336 <span class="comment">  *  can be one of the following parameters:</span>
<a name="l01337"></a>01337 <span class="comment">  *                            CAN_IT_TME = Transmit mailbox empty interrupt</span>
<a name="l01338"></a>01338 <span class="comment">  *                             CAN_IT_FF =FIFO  full    interrupt</span>
<a name="l01339"></a>01339 <span class="comment">  *                            CAN_IT_FOV =FIFO  overrun  interrupt</span>
<a name="l01340"></a>01340 <span class="comment">  *                             CAN_IT_WKU =Wake-up interrupt</span>
<a name="l01341"></a>01341 <span class="comment">  *                             CAN_IT_ERR =General Error interrupt</span>
<a name="l01342"></a>01342 <span class="comment">  *                             CAN_IT_EWG =Error warning interrupt</span>
<a name="l01343"></a>01343 <span class="comment">  *                             CAN_IT_EPV  =Error passive  interrupt</span>
<a name="l01344"></a>01344 <span class="comment">  *                             CAN_IT_BOF = Bus-off   interrupt</span>
<a name="l01345"></a>01345 <span class="comment">  *                             CAN_IT_LEC  =Last error code interrupt</span>
<a name="l01346"></a>01346 <span class="comment">  * @retval None</span>
<a name="l01347"></a>01347 <span class="comment">  */</span>
<a name="l01348"></a><a class="code" href="group__can__public__functions.html#ga80b9aa6193207bd8762532667c1e0483">01348</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga80b9aa6193207bd8762532667c1e0483" title="Clears the CANs interrupt pending bits.">CAN_ClearITPendingBit</a>(<a class="code" href="group__can__exported__types.html#gaf46d91198e45ab5f412826762098afa5" title="CAN interrupts.">CAN_IT_TypeDef</a> CAN_IT)
<a name="l01349"></a>01349 {
<a name="l01350"></a>01350   <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> can_page = <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>();
<a name="l01351"></a>01351   <span class="comment">/* Check the parameters */</span>
<a name="l01352"></a>01352   <a class="code" href="stm8s__stdperiph__examples_2adc2_2adc2__continuousconversion_2stm8s__conf_8h.html#a631dea7b230e600555f979c62af1de21" title="The assert_param macro is used for function&#39;s parameters check.">assert_param</a>(<a class="code" href="group__can__private__macros.html#gaa21767c1d436cc8411dd802922931043" title="Macro used by the assert function in order to check the CAN Pending bit interrupts.">IS_CAN_IT_PENDING_BIT_OK</a>(CAN_IT));
<a name="l01353"></a>01353   
<a name="l01354"></a>01354   <span class="keywordflow">switch</span> (CAN_IT)
<a name="l01355"></a>01355   {
<a name="l01356"></a>01356   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a2517d05151accb4d04d57f1d48e17cfc">CAN_IT_TME</a>:
<a name="l01357"></a>01357     CAN-&gt;TSR = <a class="code" href="group__can__registers__bits__definition.html#ga3b44cddd1e7f60831671206c6ee757e0">CAN_TSR_RQCP012</a>;<span class="comment">/* rc_w1*/</span>
<a name="l01358"></a>01358     <span class="keywordflow">break</span>;
<a name="l01359"></a>01359     
<a name="l01360"></a>01360   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a99ae8adb702151fe33c233bd0cc42691">CAN_IT_FF</a>:
<a name="l01361"></a>01361     CAN-&gt;RFR = <a class="code" href="group__can__registers__bits__definition.html#ga5e44acdcf8723c1a39de00d0e1594411">CAN_RFR_FULL</a>; <span class="comment">/* rc_w1*/</span>
<a name="l01362"></a>01362     <span class="keywordflow">break</span>;
<a name="l01363"></a>01363     
<a name="l01364"></a>01364   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a9483d8cf98c2e2e229023009e18a5174">CAN_IT_FOV</a>:
<a name="l01365"></a>01365     CAN-&gt;RFR = <a class="code" href="group__can__registers__bits__definition.html#ga770d1c11ed49baa7866c34d49ecaf24c">CAN_RFR_FOVR</a>; <span class="comment">/* rc_w1*/</span>
<a name="l01366"></a>01366     <span class="keywordflow">break</span>;
<a name="l01367"></a>01367     
<a name="l01368"></a>01368   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5acc56c1041dff4e00476b24b992b73018">CAN_IT_WKU</a>:
<a name="l01369"></a>01369     CAN-&gt;MSR = <a class="code" href="group__can__registers__bits__definition.html#ga0f4c753b96d21c5001b39ad5b08519fc">CAN_MSR_WKUI</a>;  <span class="comment">/* rc_w1*/</span>
<a name="l01370"></a>01370     <span class="keywordflow">break</span>;
<a name="l01371"></a>01371     
<a name="l01372"></a>01372   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a952732500c992b32b98d069ac5b9760c">CAN_IT_ERR</a>:
<a name="l01373"></a>01373     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01374"></a>01374     CAN-&gt;Page.Config.ESR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)<a class="code" href="group__can__registers__reset__value.html#ga5da62d42802e1ad35eb8ae4e950dc91e">CAN_ESR_RESET_VALUE</a>;
<a name="l01375"></a>01375     CAN-&gt;MSR = <a class="code" href="group__can__registers__bits__definition.html#ga9c424768e9e963402f37cb95ae87a1ae">CAN_MSR_ERRI</a>;
<a name="l01376"></a>01376     <span class="keywordflow">break</span>;
<a name="l01377"></a>01377     
<a name="l01378"></a>01378   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ab3466da99b9782a5f6873fd6cef736cb">CAN_IT_EWG</a>:
<a name="l01379"></a>01379     CAN-&gt;MSR = <a class="code" href="group__can__registers__bits__definition.html#ga9c424768e9e963402f37cb95ae87a1ae">CAN_MSR_ERRI</a>;
<a name="l01380"></a>01380     <span class="keywordflow">break</span>;
<a name="l01381"></a>01381     
<a name="l01382"></a>01382   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ac0395220530542e3d7db47304d311bf1">CAN_IT_EPV</a>:
<a name="l01383"></a>01383     CAN-&gt;MSR = <a class="code" href="group__can__registers__bits__definition.html#ga9c424768e9e963402f37cb95ae87a1ae">CAN_MSR_ERRI</a>;
<a name="l01384"></a>01384     <span class="keywordflow">break</span>;
<a name="l01385"></a>01385     
<a name="l01386"></a>01386   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5a61dee9273f683eeeada848528fb17121">CAN_IT_BOF</a>:
<a name="l01387"></a>01387     CAN-&gt;MSR = <a class="code" href="group__can__registers__bits__definition.html#ga9c424768e9e963402f37cb95ae87a1ae">CAN_MSR_ERRI</a>;
<a name="l01388"></a>01388     <span class="keywordflow">break</span>;
<a name="l01389"></a>01389     
<a name="l01390"></a>01390   <span class="keywordflow">case</span> <a class="code" href="group__can__exported__types.html#ggaf46d91198e45ab5f412826762098afa5ad093fad868f8467ff5d55a0a3828eacb">CAN_IT_LEC</a>:
<a name="l01391"></a>01391     CAN-&gt;PSR = <a class="code" href="group__can__exported__types.html#ggacc42ebf7795d06be5404833be27916a0a4f7ba88d4cf38945bab8b5e9dea811c7">CAN_Page_Config</a>;
<a name="l01392"></a>01392     CAN-&gt;Page.Config.ESR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)<a class="code" href="group__can__registers__reset__value.html#ga5da62d42802e1ad35eb8ae4e950dc91e">CAN_ESR_RESET_VALUE</a>;
<a name="l01393"></a>01393     <span class="keywordflow">break</span>;
<a name="l01394"></a>01394 
<a name="l01395"></a>01395   <span class="keywordflow">default</span> :
<a name="l01396"></a>01396     <span class="keywordflow">break</span>;
<a name="l01397"></a>01397   }
<a name="l01398"></a>01398   <span class="comment">/*Restore Last Page*/</span>
<a name="l01399"></a>01399   <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(can_page);
<a name="l01400"></a>01400 }
<a name="l01401"></a>01401 <span class="comment"></span>
<a name="l01402"></a>01402 <span class="comment">/**</span>
<a name="l01403"></a>01403 <span class="comment">  * @brief  Gets the selected registers page.</span>
<a name="l01404"></a>01404 <span class="comment">  * @param  None</span>
<a name="l01405"></a>01405 <span class="comment">  * @retval the selected page which can be one of the @ref CAN_Page_TypeDef.</span>
<a name="l01406"></a>01406 <span class="comment">  */</span>
<a name="l01407"></a><a class="code" href="group__can__public__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7">01407</a> <a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> <a class="code" href="group__can__exported__functions.html#gadb6bf0511cadc3b5fdde2056536f60c7" title="Gets the selected registers page.">CAN_GetSelectedPage</a>(<span class="keywordtype">void</span>)
<a name="l01408"></a>01408 {
<a name="l01409"></a>01409   <span class="keywordflow">return</span> (<a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a>)(CAN-&gt;PSR);
<a name="l01410"></a>01410 }
<a name="l01411"></a>01411 <span class="comment"></span>
<a name="l01412"></a>01412 <span class="comment">/**</span>
<a name="l01413"></a>01413 <span class="comment">  * @brief  Sets the registers page to be selected.</span>
<a name="l01414"></a>01414 <span class="comment">  * @param  CAN_Page: the selected page which can be one of the @ref CAN_Page_TypeDef.</span>
<a name="l01415"></a>01415 <span class="comment">  * @retval None</span>
<a name="l01416"></a>01416 <span class="comment">  */</span>
<a name="l01417"></a><a class="code" href="group__can__public__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60">01417</a> <span class="keywordtype">void</span> <a class="code" href="group__can__exported__functions.html#ga7e3d0b987e679fcf72d7c27402cf4a60" title="Sets the registers page to be selected.">CAN_SelectPage</a>(<a class="code" href="group__can__exported__types.html#gacc42ebf7795d06be5404833be27916a0" title="CAN Page Mapping.">CAN_Page_TypeDef</a> CAN_Page)
<a name="l01418"></a>01418 {
<a name="l01419"></a>01419   CAN-&gt;PSR = (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)CAN_Page;
<a name="l01420"></a>01420 }
<a name="l01421"></a>01421 <span class="comment"></span>
<a name="l01422"></a>01422 <span class="comment">/**</span>
<a name="l01423"></a>01423 <span class="comment">  * @brief  Checks whether the CAN interrupt has occurred or not.</span>
<a name="l01424"></a>01424 <span class="comment">  * @param   CAN_Reg: specifies the CAN interrupt register to check.</span>
<a name="l01425"></a>01425 <span class="comment">  * @param   It_Bit: specifies the interrupt source bit to check.</span>
<a name="l01426"></a>01426 <span class="comment">  * @retval The new state of the CAN Interrupt, which can be one of ITStatus.</span>
<a name="l01427"></a>01427 <span class="comment">  */</span>
<a name="l01428"></a><a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020">01428</a> <span class="keyword">static</span> <a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> <a class="code" href="group__can__public__functions.html#ga3105c10dcb4a209a5caa019b9829b020" title="Checks whether the CAN interrupt has occurred or not.">CheckITStatus</a>(<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> CAN_Reg, <a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> It_Bit)
<a name="l01429"></a>01429 {
<a name="l01430"></a>01430   <a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a> pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01431"></a>01431   <span class="keywordflow">if</span> ((CAN_Reg &amp; It_Bit) != (<a class="code" href="group__exported__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>)<a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>)
<a name="l01432"></a>01432   {
<a name="l01433"></a>01433     <span class="comment">/* CAN_IT is set */</span>
<a name="l01434"></a>01434     pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffab44c8101cc294c074709ec1b14211792">SET</a>;
<a name="l01435"></a>01435   }
<a name="l01436"></a>01436   <span class="keywordflow">else</span>
<a name="l01437"></a>01437   {
<a name="l01438"></a>01438     <span class="comment">/* CAN_IT is reset */</span>
<a name="l01439"></a>01439     pendingbitstatus = <a class="code" href="group__exported__types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l01440"></a>01440   }
<a name="l01441"></a>01441   <span class="keywordflow">return</span> (<a class="code" href="group__exported__types.html#gaacbd7ed539db0aacd973a0f6eca34074">ITStatus</a>)pendingbitstatus;
<a name="l01442"></a>01442 }
<a name="l01443"></a>01443 <span class="comment"></span>
<a name="l01444"></a>01444 <span class="comment">/**</span>
<a name="l01445"></a>01445 <span class="comment">  * @}</span>
<a name="l01446"></a>01446 <span class="comment">  */</span>
<a name="l01447"></a>01447   <span class="comment"></span>
<a name="l01448"></a>01448 <span class="comment">/**</span>
<a name="l01449"></a>01449 <span class="comment">  * @}</span>
<a name="l01450"></a>01450 <span class="comment">  */</span>
<a name="l01451"></a>01451 <span class="comment"></span>
<a name="l01452"></a>01452 <span class="comment">/**</span>
<a name="l01453"></a>01453 <span class="comment">  * @}</span>
<a name="l01454"></a>01454 <span class="comment">  */</span>
<a name="l01455"></a>01455 
<a name="l01456"></a>01456 <span class="comment">/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/</span>
</pre></div></div>
</div>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="File-List" href="footer_files/filelist.xml"><title>STM8 Standard Peripherals Library: Footer</title><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>STMicroelectronics</o:Author>
  <o:LastAuthor>STMicroelectronics</o:LastAuthor>
  <o:Revision>96</o:Revision>
  <o:TotalTime>61</o:TotalTime>
  <o:Created>2009-02-27T18:59:00Z</o:Created>
  <o:LastSaved>2009-03-01T17:58:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>25</o:Words>
  <o:Characters>149</o:Characters>
  <o:Company>STMicroelectronics</o:Company>
  <o:Lines>1</o:Lines>
  <o:Paragraphs>1</o:Paragraphs>
  <o:CharactersWithSpaces>173</o:CharactersWithSpaces>
  <o:Version>11.6568</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>110</w:Zoom>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->


<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-weight:bold;
	font-style:italic;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{mso-style-noshow:yes;
	mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:#606420;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.StyleHeading1Arial135ptItalicBlack, li.StyleHeading1Arial135ptItalicBlack, div.StyleHeading1Arial135ptItalicBlack
	{mso-style-name:"Style Heading 1 + Arial 13\.5 pt Italic Black";
	mso-style-parent:"Heading 1";
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:16.0pt;
	mso-bidi-font-size:24.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-font-kerning:18.0pt;
	font-weight:bold;
	font-style:italic;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="23554"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]--></head>
<body style="" link="blue" vlink="#606420">

<div class="Section1">

<p style="margin-top: 13px; height: 7px;" class="MsoNormal"><o:p>&nbsp;</o:p></p>

<div align="center">

<table class="MsoNormalTable" style="width: 903px; height: 120px;" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr style="">
  <td style="padding: 0in;" valign="top">
  <p style="height: 13px;" class="MsoNormal"><span style="display: none;"><o:p>&nbsp;</o:p></span></p>
  <table class="MsoNormalTable" style="width: 675pt;" border="0" cellpadding="0" width="900">
   <tbody><tr style="">
    <td style="padding: 0in;" valign="top">
    <table class="MsoNormalTable" style="width: 864px; height: 53px;" border="0" cellpadding="0" cellspacing="5">
     <tbody><tr style="">
      <td style="border-style: solid none none; border-color: windowtext -moz-use-text-color -moz-use-text-color; border-width: 1pt medium medium; padding: 0in; width: 98.86%; height: 61px;" width="98%">
      
      <p class="MsoNormal" style="text-align: center; height: 10px;" align="center"><span style="font-size: 10pt; font-family: Arial;"><o:p>&nbsp;</o:p></span></p>
<span style="font-size: 10pt; font-family: Arial;">&nbsp; &nbsp; &nbsp; For complete
documentation on STM8 8-bit Microcontrollers platform visit&nbsp;<span style="color: blue;"><a href="http://www.st.com/internet/mcu/family/141.jsp" target="_blank">www.st.com</a></span></span><p class="MsoNormal" style="text-align: center; margin-top: 0px; height: 5px;" align="center"></p>
      </td>
     </tr>
    </tbody></table>
    <p style="height: 12px;" class="MsoNormal"><span style="font-size: 10pt;"><o:p></o:p></span></p>
    </td>
   </tr>
  </tbody></table>
  <p class="MsoNormal"><span style="font-size: 10pt;"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table>

</div>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

</div>

</body></html>
