<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM8S Standard Peripheral Libary: STM8S_EVAL_I2C_EE_Private_Functions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.bmp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM8S Standard Peripheral Libary
   &#160;<span id="projectnumber">2.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">STM8S_EVAL_I2C_EE_Private_Functions<div class="ingroups"><a class="el" href="../../db/deb/group___utilities.html">Utilities</a> &raquo; <a class="el" href="../../de/d73/group___s_t_m8_s___e_v_a_l.html">STM8S_EVAL</a><a class="el" href="../../db/deb/group___utilities.html">Utilities</a> &raquo;  &#124; <a class="el" href="../../d4/d33/group___s_t_m8___e_v_a_l.html">STM8_EVAL</a> &raquo; <a class="el" href="../../d9/dfb/group___common.html">Common</a> &raquo; <a class="el" href="../../d9/dd9/group___s_t_m8_s___e_v_a_l___i2_c___e_e.html">STM8S_EVAL_I2C_EE</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6a2ccec15f9e2bf870f90885d7fdd33e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6a2ccec15f9e2bf870f90885d7fdd33e">sEE_DeInit</a> (void)</td></tr>
<tr class="memdesc:ga6a2ccec15f9e2bf870f90885d7fdd33e"><td class="mdescLeft">&#160;</td><td class="mdescRight">DeInitializes peripherals used by the I2C EEPROM driver.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6a2ccec15f9e2bf870f90885d7fdd33e">More...</a><br /></td></tr>
<tr class="separator:ga6a2ccec15f9e2bf870f90885d7fdd33e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga520dad3a57f45da2ee9d2086dba2419d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga520dad3a57f45da2ee9d2086dba2419d">sEE_Init</a> (void)</td></tr>
<tr class="memdesc:ga520dad3a57f45da2ee9d2086dba2419d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes peripherals used by the I2C EEPROM driver.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga520dad3a57f45da2ee9d2086dba2419d">More...</a><br /></td></tr>
<tr class="separator:ga520dad3a57f45da2ee9d2086dba2419d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0989702b880ffa75a0a1d572507db66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gaa0989702b880ffa75a0a1d572507db66">sEE_ReadBuffer</a> (uint8_t *pBuffer, uint16_t ReadAddr, uint16_t *NumByteToRead)</td></tr>
<tr class="memdesc:gaa0989702b880ffa75a0a1d572507db66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a block of data from the EEPROM.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gaa0989702b880ffa75a0a1d572507db66">More...</a><br /></td></tr>
<tr class="separator:gaa0989702b880ffa75a0a1d572507db66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0df5a7015cf85b27aa0dbaf87be48f8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga0df5a7015cf85b27aa0dbaf87be48f8c">sEE_WriteBuffer</a> (uint8_t *pBuffer, uint16_t WriteAddr, uint16_t NumByteToWrite)</td></tr>
<tr class="memdesc:ga0df5a7015cf85b27aa0dbaf87be48f8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes buffer of data to the I2C EEPROM.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga0df5a7015cf85b27aa0dbaf87be48f8c">More...</a><br /></td></tr>
<tr class="separator:ga0df5a7015cf85b27aa0dbaf87be48f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ea3ae17366f226916dc40fcb7f90e3c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a> (uint8_t *pBuffer, uint16_t WriteAddr, uint8_t *NumByteToWrite)</td></tr>
<tr class="memdesc:ga1ea3ae17366f226916dc40fcb7f90e3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes more than one byte to the EEPROM.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">More...</a><br /></td></tr>
<tr class="separator:ga1ea3ae17366f226916dc40fcb7f90e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafaf33128d9c6a01c809115c1ade76331"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a> (void)</td></tr>
<tr class="memdesc:gafaf33128d9c6a01c809115c1ade76331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for EEPROM Standby state.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">More...</a><br /></td></tr>
<tr class="separator:gafaf33128d9c6a01c809115c1ade76331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fb1b6987139f3c48e0632dd786d2a35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6fb1b6987139f3c48e0632dd786d2a35">sEE_EnterCriticalSection_UserCallback</a> (void)</td></tr>
<tr class="memdesc:ga6fb1b6987139f3c48e0632dd786d2a35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start critical section: this callbacks should be typically used to disable interrupts when entering a critical section of I2C communication You may use default callbacks provided into this driver by uncommenting the define USE_DEFAULT_CRITICAL_CALLBACK. Or you can comment that line and implement these callbacks into your application.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6fb1b6987139f3c48e0632dd786d2a35">More...</a><br /></td></tr>
<tr class="separator:ga6fb1b6987139f3c48e0632dd786d2a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f4bc20c25e053a5f9b68ba6d5cfd5ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">sEE_ExitCriticalSection_UserCallback</a> (void)</td></tr>
<tr class="memdesc:ga9f4bc20c25e053a5f9b68ba6d5cfd5ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">End of critical section: this callbacks should be typically used to re-enable interrupts when exiting a critical section of I2C communication You may use default callbacks provided into this driver by uncommenting the define USE_DEFAULT_CRITICAL_CALLBACK. Or you can comment that line and implement these callbacks into your application.  <a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">More...</a><br /></td></tr>
<tr class="separator:ga9f4bc20c25e053a5f9b68ba6d5cfd5ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6a2ccec15f9e2bf870f90885d7fdd33e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a2ccec15f9e2bf870f90885d7fdd33e">&#9670;&nbsp;</a></span>sEE_DeInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sEE_DeInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DeInitializes peripherals used by the I2C EEPROM driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00115">115</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="../../d9/d5e/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___private___functions.html#ga626085dc91759e8a63780da5a273c09a">sEE_LowLevel_DeInit</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6fb1b6987139f3c48e0632dd786d2a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fb1b6987139f3c48e0632dd786d2a35">&#9670;&nbsp;</a></span>sEE_EnterCriticalSection_UserCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sEE_EnterCriticalSection_UserCallback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start critical section: this callbacks should be typically used to disable interrupts when entering a critical section of I2C communication You may use default callbacks provided into this driver by uncommenting the define USE_DEFAULT_CRITICAL_CALLBACK. Or you can comment that line and implement these callbacks into your application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00806">806</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;{</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  disableInterrupts();</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9f4bc20c25e053a5f9b68ba6d5cfd5ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">&#9670;&nbsp;</a></span>sEE_ExitCriticalSection_UserCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sEE_ExitCriticalSection_UserCallback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>End of critical section: this callbacks should be typically used to re-enable interrupts when exiting a critical section of I2C communication You may use default callbacks provided into this driver by uncommenting the define USE_DEFAULT_CRITICAL_CALLBACK. Or you can comment that line and implement these callbacks into your application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00821">821</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  enableInterrupts();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga520dad3a57f45da2ee9d2086dba2419d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga520dad3a57f45da2ee9d2086dba2419d">&#9670;&nbsp;</a></span>sEE_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sEE_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes peripherals used by the I2C EEPROM driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00125">125</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <a class="code" href="../../d9/d5e/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___private___functions.html#gafad0bee8df29ae0ea9035b7896a7790f">sEE_LowLevel_Init</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">/* I2C configuration */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">/* sEE_I2C Peripheral Enable */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gae696416c6624783e6f3240742a1a474f">I2C_Cmd</a>( ENABLE);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">/* sEE_I2C configuration after enabling it */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga1b854d035a3bb4b30350c57022d94f4d">I2C_Init</a>(I2C_SPEED, I2C_SLAVE_ADDRESS7, <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggac0fae3e51f48b185d7413e529ef5dd1da7863251159588f24be3dc095ad768d7a">I2C_DUTYCYCLE_2</a>, <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a336be6f5676342e3bf059cba6321ab91">I2C_ACK_CURR</a>,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;           <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#gga183d9b2cf41469e7f6b7c00750e5a7eaa025fb1ad8637e49129bef567f087e4e6">I2C_ADDMODE_7BIT</a>, 16);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#if defined (sEE_M24C64_32)</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">/* Select the EEPROM address according to the state of E0, E1, E2 pins */</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  sEEAddress = sEE_HW_ADDRESS;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* sEE_M24C64_32 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa0989702b880ffa75a0a1d572507db66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0989702b880ffa75a0a1d572507db66">&#9670;&nbsp;</a></span>sEE_ReadBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> sEE_ReadBuffer </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ReadAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>NumByteToRead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a block of data from the EEPROM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuffer</td><td>: pointer to the buffer that receives the data read from the EEPROM. </td></tr>
    <tr><td class="paramname">ReadAddr</td><td>: EEPROM's internal address to start reading from. </td></tr>
    <tr><td class="paramname">NumByteToRead</td><td>: pointer to the variable holding number of bytes to be read from the EEPROM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The variable pointed by NumByteToRead is reset to 0 when all the data are read from the EEPROM. Application should monitor this variable in order to know when the transfer is complete.</dd>
<dd>
This function ensures data reading from EEPROM, it assumes that I2C is used with polling or its interrupt priority is not the highest in the application. Method 2 transfer sequence is implemented in this function(refer to RM0016 for more details). 3 bytes, 2bytes and 1 byte reception cases are handled.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">sEE_OK</td><td>(0) if operation is correctly performed, else return value different from sEE_OK (0) or the timeout user callback. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00163">163</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">/* While the bus is busy */</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce">I2C_FLAG_BUSBUSY</a>))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">/* Send START condition */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga176b1151ef1f0735fcf2df35fe3c93f1">I2C_GenerateSTART</a>(ENABLE);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">/* Test on EV5 and clear it (cleared by reading SR1 then writing to DR) */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12">I2C_EVENT_MASTER_MODE_SELECT</a>))</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">/* Send EEPROM address for write */</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga865f03e165537185ccb1e5493bfb62ae">I2C_Send7bitAddress</a>( (uint8_t)sEEAddress, <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c">I2C_DIRECTION_TX</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">/* Test on EV6 and clear it */</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a0dd62d5fe8139fc59833ed0d22078c5a">I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</a>))</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#ifdef sEE_M24C64_32</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">/* Send the EEPROM&#39;s internal address to read from: MSB of the address first */</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a>( (uint8_t)((ReadAddr &amp; 0xFF00) &gt;&gt; 8));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">/* Test on EV8 and clear it */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59">I2C_EVENT_MASTER_BYTE_TRANSMITTED</a>))</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">/* Send the EEPROM&#39;s internal address to read from: LSB of the address */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a>( (uint8_t)(ReadAddr &amp; 0x00FF));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* sEE_M24C64_32 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">/* Test on EV8 and clear it */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a>) == RESET)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">/* Send START condition a second time */</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga176b1151ef1f0735fcf2df35fe3c93f1">I2C_GenerateSTART</a>( ENABLE);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">/* Test on EV5 and clear it (cleared by reading SR1 then writing to DR) */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12">I2C_EVENT_MASTER_MODE_SELECT</a>))</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">/* Send EEPROM address for read */</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga865f03e165537185ccb1e5493bfb62ae">I2C_Send7bitAddress</a>((uint8_t)sEEAddress, <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a6d8f33266f7e31199553d2ff352e0345">I2C_DIRECTION_RX</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">/* Read data from first byte until byte N-3 */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> ((uint16_t)(*NumByteToRead)&gt; 3)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">/* Poll on BTF */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a>) == RESET)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="comment">/* Read a byte from the EEPROM */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">/* Point to the next location where the byte read will be saved */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      *pBuffer++;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="comment">/* Decrement the read bytes counter */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      (uint16_t)(*NumByteToRead)--;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">/*  Remains three data for read: data N-2, data N-1, Data N */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">/* Three Bytes Master Reception procedure (POLLING) ------------------------*/</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">if</span> ((uint16_t)(*NumByteToRead) == 3)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">/* Data N-2 in DR and data N -1 in shift register */</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">/* Poll on BTF */</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a>) == RESET)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="comment">/* Clear ACK */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga002310a2fd258c4cb013a7e8417f153b">I2C_AcknowledgeConfig</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8">I2C_ACK_NONE</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">/* Call User callback for critical section start (should typically disable interrupts) */</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6fb1b6987139f3c48e0632dd786d2a35">sEE_EnterCriticalSection_UserCallback</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">/* Read Data N-2 */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">/* Point to the next location where the byte read will be saved */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      *pBuffer++;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="comment">/* Program the STOP */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68">I2C_GenerateSTOP</a>(ENABLE);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="comment">/* Read DataN-1 */</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;       <span class="comment">/* Call User callback for critical section end (should typically re-enable interrupts) */</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;       <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">sEE_ExitCriticalSection_UserCallback</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="comment">/* Point to the next location where the byte read will be saved */</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      *pBuffer++;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="comment">/* Poll on RxNE */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aacfb7c4058b6077ccacc53adfed35e97c">I2C_FLAG_RXNOTEMPTY</a>) == RESET)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="comment">/* Read DataN */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">/* Reset the number of bytes to be read from the EEPROM */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      NumByteToRead = 0;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">/* If number of data to be read is 2 */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">/* Tow Bytes Master Reception procedure (POLLING) ---------------------------*/</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">if</span> ((uint16_t)(*NumByteToRead) == 2)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">/* Enable acknowledgement on next byte (set POS and ACK bits)*/</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga002310a2fd258c4cb013a7e8417f153b">I2C_AcknowledgeConfig</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a0d8699c5364b97fd60b5eeb8d960d5ad">I2C_ACK_NEXT</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">/* Wait on ADDR flag to be set (ADDR is still not cleared at this level */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b">I2C_FLAG_ADDRESSSENTMATCHED</a>) == RESET)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">/* Clear ADDR register by reading SR1 then SR3 register (SR1 has already been read) */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;     (void)I2C-&gt;SR3;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">/* Disable Acknowledgement */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga002310a2fd258c4cb013a7e8417f153b">I2C_AcknowledgeConfig</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8">I2C_ACK_NONE</a>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">/* Wait for BTF flag to be set */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a>) == RESET)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">/* Call User callback for critical section start (should typically disable interrupts) */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6fb1b6987139f3c48e0632dd786d2a35">sEE_EnterCriticalSection_UserCallback</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">/* Program the STOP */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68">I2C_GenerateSTOP</a>(ENABLE);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">/* Read Data N-1 */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">/* Point to the next location where the byte read will be saved */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      *pBuffer++;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">/* Call User callback for critical section end (should typically re-enable interrupts) */</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;       <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">sEE_ExitCriticalSection_UserCallback</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">/* Read Data N */</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">/* Reset the number of bytes to be read from the EEPROM */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      NumByteToRead = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">/* If number of data to be read is 1 */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">/* One Byte Master Reception procedure (POLLING) ---------------------------*/</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> ((uint16_t)(*NumByteToRead) &lt; 2)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">/* Wait on ADDR flag to be set (ADDR is still not cleared at this level */</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b">I2C_FLAG_ADDRESSSENTMATCHED</a>) == RESET)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">/* Disable Acknowledgement */</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga002310a2fd258c4cb013a7e8417f153b">I2C_AcknowledgeConfig</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8">I2C_ACK_NONE</a>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">/* Call User callback for critical section start (should typically disable interrupts) */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6fb1b6987139f3c48e0632dd786d2a35">sEE_EnterCriticalSection_UserCallback</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">/* Clear ADDR register by reading SR1 then SR3 register (SR1 has already been read) */</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    (void)<a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;SR3;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">/* Send STOP Condition */</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68">I2C_GenerateSTOP</a>( ENABLE);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">/* Call User callback for critical section end (should typically re-enable interrupts) */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">sEE_ExitCriticalSection_UserCallback</a>();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">/* Wait for the byte to be received */</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aacfb7c4058b6077ccacc53adfed35e97c">I2C_FLAG_RXNOTEMPTY</a>) == RESET)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">/* Read the byte received from the EEPROM */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    *pBuffer = <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a>();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">/* Decrement the read bytes counter */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    (uint16_t)(*NumByteToRead)--;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">/* Wait to make sure that STOP control bit has been cleared */</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;CR2 &amp; <a class="code" href="../../d3/de1/group___i2_c___registers___bits___definition.html#ga37007be453dd8a637be2d793d3b5f2a2">I2C_CR2_STOP</a>)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">/* Re-Enable Acknowledgement to be ready for another reception */</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga002310a2fd258c4cb013a7e8417f153b">I2C_AcknowledgeConfig</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a336be6f5676342e3bf059cba6321ab91">I2C_ACK_CURR</a>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">/* If all operations OK, return sEE_OK (0) */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">return</span> sEE_OK;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gafaf33128d9c6a01c809115c1ade76331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafaf33128d9c6a01c809115c1ade76331">&#9670;&nbsp;</a></span>sEE_WaitEepromStandbyState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> sEE_WaitEepromStandbyState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for EEPROM Standby state. </p>
<dl class="section note"><dt>Note</dt><dd>This function allows to wait and check that EEPROM has finished the last Write operation. It is mostly used after a Write operation: after receiving the buffer to be written, the EEPROM may need additional time to actually perform the write operation. During this time, it doesn't answer to I2C packets addressed to it. Once the write operation is complete the EEPROM responds to its address.</dd>
<dd>
It is not necessary to call this function after <a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga0df5a7015cf85b27aa0dbaf87be48f8c" title="Writes buffer of data to the I2C EEPROM.">sEE_WriteBuffer()</a> function (<a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga0df5a7015cf85b27aa0dbaf87be48f8c" title="Writes buffer of data to the I2C EEPROM.">sEE_WriteBuffer()</a> already calls this function after each write page operation).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">sEE_OK</td><td>(0) if operation is correctly performed, else return value different from sEE_OK (0) or the timeout user callback. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00707">707</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <a class="code" href="../../d9/d3e/group___exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> uint8_t tmpSR1 = 0;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <a class="code" href="../../d9/d3e/group___exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a> <a class="code" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> sEETrials = 0;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; <span class="comment">/* While the bus is busy */</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce">I2C_FLAG_BUSBUSY</a>))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">/* Keep looping till the slave acknowledges his address or the maximum number</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">     of trials is reached (this number is defined by sEE_MAX_TRIALS_NUMBER define</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">     in stm8s_eval_i2c_ee.h file) */</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">/* Send START condition */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga176b1151ef1f0735fcf2df35fe3c93f1">I2C_GenerateSTART</a>(ENABLE);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">/* Test on EV5 and clear it */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12">I2C_EVENT_MASTER_MODE_SELECT</a>))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">/* Send EEPROM address for write */</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga865f03e165537185ccb1e5493bfb62ae">I2C_Send7bitAddress</a>((uint8_t)sEEAddress, <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c">I2C_DIRECTION_TX</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">/* Wait for ADDR flag to be set (Slave acknowledged his address) */</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="comment">/* Get the current value of the SR1 register */</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      tmpSR1 = <a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;SR1;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="comment">/* Update the timeout value and exit if it reach 0 */</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">/* Keep looping till the Address is acknowledged or the AF flag is</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">       set (address not acknowledged at time) */</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">while</span>((<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b">I2C_FLAG_ADDRESSSENTMATCHED</a>)== RESET) &amp;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;          (<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aaeead3c199206f20f3a57ad1191f45c38">I2C_FLAG_ACKNOWLEDGEFAILURE</a>)== RESET));</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  tmpSR1 = <a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;SR1;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">/* Check if the ADDR flag has been set */</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (tmpSR1 &amp; <a class="code" href="../../d3/de1/group___i2_c___registers___bits___definition.html#ga3db361a4d9dd84b187085a11d933b45d">I2C_SR1_ADDR</a>)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="comment">/* Clear ADDR Flag by reading SR1 then SR3 registers (SR1 have already</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">         been read) */</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      (void)<a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;SR3;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="comment">/* STOP condition */</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68">I2C_GenerateSTOP</a>(ENABLE);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="comment">/* Exit the function */</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">return</span> sEE_OK;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="comment">/* Clear AF flag */</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gab68d22553dbe25b1e6a7f4ed003c7279">I2C_ClearFlag</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aaeead3c199206f20f3a57ad1191f45c38">I2C_FLAG_ACKNOWLEDGEFAILURE</a>);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">/* Check if the maximum allowed number of trials has bee reached */</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (sEETrials++ == sEE_MAX_TRIALS_NUMBER)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="comment">/* If the maximum number of trials has been reached, exit the function */</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0df5a7015cf85b27aa0dbaf87be48f8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0df5a7015cf85b27aa0dbaf87be48f8c">&#9670;&nbsp;</a></span>sEE_WriteBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sEE_WriteBuffer </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>WriteAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>NumByteToWrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes buffer of data to the I2C EEPROM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuffer</td><td>: pointer to the buffer containing the data to be written to the EEPROM. </td></tr>
    <tr><td class="paramname">WriteAddr</td><td>: EEPROM's internal address to write to. </td></tr>
    <tr><td class="paramname">NumByteToWrite</td><td>: number of bytes to write to the EEPROM. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00410">410</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  uint8_t NumOfPage = 0, NumOfSingle = 0, count = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  uint16_t Addr = 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  Addr = WriteAddr % sEE_PAGESIZE;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  count = (uint8_t)(sEE_PAGESIZE - (uint16_t)Addr);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  NumOfPage =  (uint8_t)(NumByteToWrite / sEE_PAGESIZE);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  NumOfSingle = (uint8_t)(NumByteToWrite % sEE_PAGESIZE);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">/* If WriteAddr is sEE_PAGESIZE aligned  */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (Addr == 0)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">/* If NumByteToWrite &lt; sEE_PAGESIZE */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (NumOfPage == 0)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      sEEDataNum = NumOfSingle;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="comment">/* Start writing data */</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">/* If NumByteToWrite &gt; sEE_PAGESIZE */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">while</span> (NumOfPage--)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        sEEDataNum = sEE_PAGESIZE;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        WriteAddr +=  sEE_PAGESIZE;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        pBuffer += sEE_PAGESIZE;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span> (NumOfSingle != 0)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        sEEDataNum = NumOfSingle;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">/* If WriteAddr is not sEE_PAGESIZE aligned  */</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">/* If NumByteToWrite &lt; sEE_PAGESIZE */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (NumOfPage == 0)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="comment">/* If the number of data to be written is more than the remaining space</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">      in the current page: */</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">if</span> (NumByteToWrite &gt; count)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        sEEDataNum = count;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">/* Write the data contained in the same page */</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        sEEDataNum = (uint8_t)(NumByteToWrite - count);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">/* Write the remaining data in the following page */</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>((uint8_t*)(pBuffer + count), (WriteAddr + count), (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        sEEDataNum = NumOfSingle;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">/* If NumByteToWrite &gt; sEE_PAGESIZE */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      NumByteToWrite -= count;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      NumOfPage = (uint8_t)(NumByteToWrite / sEE_PAGESIZE);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      NumOfSingle = (uint8_t)(NumByteToWrite % sEE_PAGESIZE);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">if</span> (count != 0)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        sEEDataNum = count;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        WriteAddr += count;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        pBuffer += count;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">while</span> (NumOfPage--)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        sEEDataNum = sEE_PAGESIZE;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        WriteAddr +=  sEE_PAGESIZE;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        pBuffer += sEE_PAGESIZE;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">if</span> (NumOfSingle != 0)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">/* Store the number of data to be written */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        sEEDataNum = NumOfSingle;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a>(pBuffer, WriteAddr, (uint8_t*)(&amp;sEEDataNum));</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">/* Wait data transfer to be complete */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">while</span> (sEEDataNum &gt; 0)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <span class="keywordflow">if</span>((sEETimeout--) == 0) {sEE_TIMEOUT_UserCallback(); <span class="keywordflow">return</span>;};</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a>();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1ea3ae17366f226916dc40fcb7f90e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ea3ae17366f226916dc40fcb7f90e3c">&#9670;&nbsp;</a></span>sEE_WritePage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a> sEE_WritePage </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>WriteAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>NumByteToWrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes more than one byte to the EEPROM. </p>
<dl class="section note"><dt>Note</dt><dd>The number of bytes (combined to write start address) must not cross the EEPROM page boundary. This function can only write into the boundaries of an EEPROM page. This function doesn't check on boundaries condition (in this driver the function <a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga0df5a7015cf85b27aa0dbaf87be48f8c" title="Writes buffer of data to the I2C EEPROM.">sEE_WriteBuffer()</a> which calls <a class="el" href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c" title="Writes more than one byte to the EEPROM.">sEE_WritePage()</a> is responsible of checking on Page boundaries).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuffer</td><td>: pointer to the buffer containing the data to be written to the EEPROM. </td></tr>
    <tr><td class="paramname">WriteAddr</td><td>: EEPROM's internal address to write to. </td></tr>
    <tr><td class="paramname">NumByteToWrite</td><td>: pointer to the variable holding number of bytes to be written into the EEPROM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The variable pointed by NumByteToWrite is reset to 0 when all the data are written to the EEPROM. Application should monitor this variable in order know when the transfer is complete.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">sEE_OK</td><td>(0) if operation is correctly performed, else return value different from sEE_OK (0) or the timeout user callback. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00598">598</a> of file <a class="el" href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html">stm8s_eval_i2c_ee.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">/* Set the pointer to the Number of data to be written.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">     User should check on this variable in order to know if the</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">      data transfer has been completed or not. */</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  sEEDataWritePointer = NumByteToWrite;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">/* While the bus is busy */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce">I2C_FLAG_BUSBUSY</a>))</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">/* Send START condition */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga176b1151ef1f0735fcf2df35fe3c93f1">I2C_GenerateSTART</a>( ENABLE);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">/* Test on EV5 and clear it */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>(<a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12">I2C_EVENT_MASTER_MODE_SELECT</a>))</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">/* Send EEPROM address for write */</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga865f03e165537185ccb1e5493bfb62ae">I2C_Send7bitAddress</a>((uint8_t)sEEAddress, <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c">I2C_DIRECTION_TX</a>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">/* Test on EV6 and clear it */</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a0dd62d5fe8139fc59833ed0d22078c5a">I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</a>))</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#ifdef sEE_M24C08</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">/* Send the EEPROM&#39;s internal address to write to : only one byte Address */</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a>( WriteAddr);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="preprocessor">#elif defined(sEE_M24C64_32)</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">/* Send the EEPROM&#39;s internal address to write to : MSB of the address first */</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a>( (uint8_t)((WriteAddr &amp; 0xFF00) &gt;&gt; 8));</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">/* Test on EV8 and clear it */</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59">I2C_EVENT_MASTER_BYTE_TRANSMITTED</a>))</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">/* Send the EEPROM&#39;s internal address to write to : LSB of the address */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a>( (uint8_t)(WriteAddr &amp; 0x00FF));</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* sEE_M24C08 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">/* Test on EV8 and clear it */</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  sEETimeout = sEE_FLAG_TIMEOUT;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59">I2C_EVENT_MASTER_BYTE_TRANSMITTED</a>))</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span>((sEETimeout--) == 0) <span class="keywordflow">return</span> sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">/* While there is data to be written */</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">while</span>((uint16_t)(*sEEDataWritePointer) &gt; 0)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">/* Send the byte to be written */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a>( *pBuffer);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">/* Test on EV8 and clear it */</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">/* Wait till all data have been physically transferred on the bus */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    sEETimeout = sEE_LONG_TIMEOUT;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">while</span>(!<a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a>( <a class="code" href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a>))</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">if</span>((sEETimeout--) == 0) sEE_TIMEOUT_UserCallback();</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    (uint16_t)(*sEEDataWritePointer)--;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="comment">/* Send STOP condition */</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="../../dd/d69/group___i2_c___exported___functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68">I2C_GenerateSTOP</a>(ENABLE);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">/* Perform a read on SR1 and SR3 register to clear eventually pending flags */</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    (void)<a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;SR1;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    (<span class="keywordtype">void</span>)<a class="code" href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a>-&gt;SR3;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="comment">/* If all operations OK, return sEE_OK (0) */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">return</span> sEE_OK;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions_html_gafaf33128d9c6a01c809115c1ade76331"><div class="ttname"><a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#gafaf33128d9c6a01c809115c1ade76331">sEE_WaitEepromStandbyState</a></div><div class="ttdeci">uint32_t sEE_WaitEepromStandbyState(void)</div><div class="ttdoc">Wait for EEPROM Standby state.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00707">stm8s_eval_i2c_ee.c:707</a></div></div>
<div class="ttc" id="agroup___i2_c___registers___bits___definition_html_ga37007be453dd8a637be2d793d3b5f2a2"><div class="ttname"><a href="../../d3/de1/group___i2_c___registers___bits___definition.html#ga37007be453dd8a637be2d793d3b5f2a2">I2C_CR2_STOP</a></div><div class="ttdeci">#define I2C_CR2_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/stm8s_8h_source.html#l01418">stm8s.h:1418</a></div></div>
<div class="ttc" id="agroup___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___private___functions_html_gafad0bee8df29ae0ea9035b7896a7790f"><div class="ttname"><a href="../../d9/d5e/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___private___functions.html#gafad0bee8df29ae0ea9035b7896a7790f">sEE_LowLevel_Init</a></div><div class="ttdeci">void sEE_LowLevel_Init(void)</div><div class="ttdoc">Initializes peripherals used by the I2C EEPROM driver.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0c/stm8__128__eval_8c_source.html#l00287">stm8_128_eval.c:287</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga1b854d035a3bb4b30350c57022d94f4d"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga1b854d035a3bb4b30350c57022d94f4d">I2C_Init</a></div><div class="ttdeci">void I2C_Init(uint32_t OutputClockFrequencyHz, uint16_t OwnAddress, I2C_DutyCycle_TypeDef I2C_DutyCycle, I2C_Ack_TypeDef Ack, I2C_AddMode_TypeDef AddMode, uint8_t InputClockFrequencyMHz)</div><div class="ttdoc">Initializes the I2C according to the specified parameters in standard or fast mode.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00096">stm8s_i2c.c:96</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940ae3b657caf12f5f84760310db3c9f2c59">I2C_EVENT_MASTER_BYTE_TRANSMITTED</a></div><div class="ttdeci">@ I2C_EVENT_MASTER_BYTE_TRANSMITTED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00249">stm8s_i2c.h:249</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a3460f01a25c0617f82a8b143c8ae4b12">I2C_EVENT_MASTER_MODE_SELECT</a></div><div class="ttdeci">@ I2C_EVENT_MASTER_MODE_SELECT</div><div class="ttdoc">Communication start.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00178">stm8s_i2c.h:178</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_gab68d22553dbe25b1e6a7f4ed003c7279"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#gab68d22553dbe25b1e6a7f4ed003c7279">I2C_ClearFlag</a></div><div class="ttdeci">void I2C_ClearFlag(I2C_Flag_TypeDef I2C_FLAG)</div><div class="ttdoc">Clear flags.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00759">stm8s_i2c.c:759</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga176b1151ef1f0735fcf2df35fe3c93f1"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga176b1151ef1f0735fcf2df35fe3c93f1">I2C_GenerateSTART</a></div><div class="ttdeci">void I2C_GenerateSTART(FunctionalState NewState)</div><div class="ttdoc">Generates I2C communication START condition.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00250">stm8s_i2c.c:250</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa4e039897cc642ec3abd95a1fa1cc1b3a0d8699c5364b97fd60b5eeb8d960d5ad"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a0d8699c5364b97fd60b5eeb8d960d5ad">I2C_ACK_NEXT</a></div><div class="ttdeci">@ I2C_ACK_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00057">stm8s_i2c.h:57</a></div></div>
<div class="ttc" id="agroup___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions_html_ga6fb1b6987139f3c48e0632dd786d2a35"><div class="ttname"><a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga6fb1b6987139f3c48e0632dd786d2a35">sEE_EnterCriticalSection_UserCallback</a></div><div class="ttdeci">void sEE_EnterCriticalSection_UserCallback(void)</div><div class="ttdoc">Start critical section: this callbacks should be typically used to disable interrupts when entering a...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00806">stm8s_eval_i2c_ee.c:806</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggac0fae3e51f48b185d7413e529ef5dd1da7863251159588f24be3dc095ad768d7a"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggac0fae3e51f48b185d7413e529ef5dd1da7863251159588f24be3dc095ad768d7a">I2C_DUTYCYCLE_2</a></div><div class="ttdeci">@ I2C_DUTYCYCLE_2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00046">stm8s_i2c.h:46</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga39f1313722666a647f4246adfbb713cd"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga39f1313722666a647f4246adfbb713cd">I2C_GetFlagStatus</a></div><div class="ttdeci">FlagStatus I2C_GetFlagStatus(I2C_Flag_TypeDef I2C_Flag)</div><div class="ttdoc">Checks whether the specified I2C flag is set or not.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00679">stm8s_i2c.c:679</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggac5294e7f2dfbf66c835de2f81f9edc72a6d8f33266f7e31199553d2ff352e0345"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a6d8f33266f7e31199553d2ff352e0345">I2C_DIRECTION_RX</a></div><div class="ttdeci">@ I2C_DIRECTION_RX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00087">stm8s_i2c.h:87</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga1c1f2b51e6077fa322aa5f13d6cfba68"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga1c1f2b51e6077fa322aa5f13d6cfba68">I2C_GenerateSTOP</a></div><div class="ttdeci">void I2C_GenerateSTOP(FunctionalState NewState)</div><div class="ttdoc">Generates I2C communication STOP condition.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00273">stm8s_i2c.c:273</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa5ff1a9e0dffb49301663ae1ebeea40aacfb7c4058b6077ccacc53adfed35e97c"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aacfb7c4058b6077ccacc53adfed35e97c">I2C_FLAG_RXNOTEMPTY</a></div><div class="ttdeci">@ I2C_FLAG_RXNOTEMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00104">stm8s_i2c.h:104</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_gae696416c6624783e6f3240742a1a474f"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#gae696416c6624783e6f3240742a1a474f">I2C_Cmd</a></div><div class="ttdeci">void I2C_Cmd(FunctionalState NewState)</div><div class="ttdoc">Enables or disables the I2C peripheral.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00202">stm8s_i2c.c:202</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa6904b0ae33283a3c027ead17bab6a06b">I2C_FLAG_ADDRESSSENTMATCHED</a></div><div class="ttdeci">@ I2C_FLAG_ADDRESSSENTMATCHED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00108">stm8s_i2c.h:108</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7bbe56fe5c2a5a884a95164ed805b3ce">I2C_FLAG_BUSBUSY</a></div><div class="ttdeci">@ I2C_FLAG_BUSBUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00121">stm8s_i2c.h:121</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa4e039897cc642ec3abd95a1fa1cc1b3a336be6f5676342e3bf059cba6321ab91"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a336be6f5676342e3bf059cba6321ab91">I2C_ACK_CURR</a></div><div class="ttdeci">@ I2C_ACK_CURR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00056">stm8s_i2c.h:56</a></div></div>
<div class="ttc" id="agroup___exported__types_html_ga06896e8c53f721507066c079052171f8"><div class="ttname"><a href="../../d9/d3e/group___exported__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a></div><div class="ttdeci">unsigned long uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3b/inline_2stm8s_8h_source.html#l00227">stm8s.h:227</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_gga183d9b2cf41469e7f6b7c00750e5a7eaa025fb1ad8637e49129bef567f087e4e6"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#gga183d9b2cf41469e7f6b7c00750e5a7eaa025fb1ad8637e49129bef567f087e4e6">I2C_ADDMODE_7BIT</a></div><div class="ttdeci">@ I2C_ADDMODE_7BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00065">stm8s_i2c.h:65</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggadc952f191791c5a48a1b03dd0c0c6940a0dd62d5fe8139fc59833ed0d22078c5a"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggadc952f191791c5a48a1b03dd0c0c6940a0dd62d5fe8139fc59833ed0d22078c5a">I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</a></div><div class="ttdeci">@ I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</div><div class="ttdoc">Address Acknowledge.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00207">stm8s_i2c.h:207</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga73e8870450debd272f1bb0cea9e77d52"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga73e8870450debd272f1bb0cea9e77d52">I2C_ReceiveData</a></div><div class="ttdeci">uint8_t I2C_ReceiveData(void)</div><div class="ttdoc">Returns the most recent received data.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00427">stm8s_i2c.c:427</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga002310a2fd258c4cb013a7e8417f153b"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga002310a2fd258c4cb013a7e8417f153b">I2C_AcknowledgeConfig</a></div><div class="ttdeci">void I2C_AcknowledgeConfig(I2C_Ack_TypeDef Ack)</div><div class="ttdoc">Enable or Disable the I2C acknowledge and position acknowledge feature.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00345">stm8s_i2c.c:345</a></div></div>
<div class="ttc" id="agroup___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___private___functions_html_ga626085dc91759e8a63780da5a273c09a"><div class="ttname"><a href="../../d9/d5e/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___private___functions.html#ga626085dc91759e8a63780da5a273c09a">sEE_LowLevel_DeInit</a></div><div class="ttdeci">void sEE_LowLevel_DeInit(void)</div><div class="ttdoc">DeInitializes peripherals used by the I2C EEPROM driver.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0c/stm8__128__eval_8c_source.html#l00263">stm8_128_eval.c:263</a></div></div>
<div class="ttc" id="agroup___exported__types_html_gaec43007d9998a0a0e01faede4133d6be"><div class="ttname"><a href="../../d9/d3e/group___exported__types.html#gaec43007d9998a0a0e01faede4133d6be">__IO</a></div><div class="ttdeci">#define __IO</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/stm8s_8h_source.html#l00223">stm8s.h:223</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggac5294e7f2dfbf66c835de2f81f9edc72a49746e08cfad801c5e3e0560835ea14c">I2C_DIRECTION_TX</a></div><div class="ttdeci">@ I2C_DIRECTION_TX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00086">stm8s_i2c.h:86</a></div></div>
<div class="ttc" id="agroup___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e_html_gaa9c4c3cae7cf23f26aa29e54c30a717e"><div class="ttname"><a href="../../d8/d97/group___s_t_m8__128___e_v_a_l___l_o_w___l_e_v_e_l___i2_c___e_e.html#gaa9c4c3cae7cf23f26aa29e54c30a717e">sEE_I2C</a></div><div class="ttdeci">#define sEE_I2C</div><div class="ttdoc">I2C EEPROM Interface pins.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d17/stm8__128__eval_8h_source.html#l00156">stm8_128_eval.h:156</a></div></div>
<div class="ttc" id="agroup___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions_html_ga1ea3ae17366f226916dc40fcb7f90e3c"><div class="ttname"><a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga1ea3ae17366f226916dc40fcb7f90e3c">sEE_WritePage</a></div><div class="ttdeci">uint32_t sEE_WritePage(uint8_t *pBuffer, uint16_t WriteAddr, uint8_t *NumByteToWrite)</div><div class="ttdoc">Writes more than one byte to the EEPROM.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00598">stm8s_eval_i2c_ee.c:598</a></div></div>
<div class="ttc" id="agroup___i2_c___registers___bits___definition_html_ga3db361a4d9dd84b187085a11d933b45d"><div class="ttname"><a href="../../d3/de1/group___i2_c___registers___bits___definition.html#ga3db361a4d9dd84b187085a11d933b45d">I2C_SR1_ADDR</a></div><div class="ttdeci">#define I2C_SR1_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/stm8s_8h_source.html#l01437">stm8s.h:1437</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa4e039897cc642ec3abd95a1fa1cc1b3a48b04c46be06f4197a776455262585f8">I2C_ACK_NONE</a></div><div class="ttdeci">@ I2C_ACK_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00055">stm8s_i2c.h:55</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aa7aac255f6138eca661307a134ab3b39b">I2C_FLAG_TRANSFERFINISHED</a></div><div class="ttdeci">@ I2C_FLAG_TRANSFERFINISHED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00107">stm8s_i2c.h:107</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga865f03e165537185ccb1e5493bfb62ae"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga865f03e165537185ccb1e5493bfb62ae">I2C_Send7bitAddress</a></div><div class="ttdeci">void I2C_Send7bitAddress(uint8_t Address, I2C_Direction_TypeDef Direction)</div><div class="ttdoc">Transmits the 7-bit address (to select the) slave device.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00440">stm8s_i2c.c:440</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___types_html_ggaa5ff1a9e0dffb49301663ae1ebeea40aaeead3c199206f20f3a57ad1191f45c38"><div class="ttname"><a href="../../d8/dff/group___i2_c___exported___types.html#ggaa5ff1a9e0dffb49301663ae1ebeea40aaeead3c199206f20f3a57ad1191f45c38">I2C_FLAG_ACKNOWLEDGEFAILURE</a></div><div class="ttdeci">@ I2C_FLAG_ACKNOWLEDGEFAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d3a/stm8s__i2c_8h_source.html#l00114">stm8s_i2c.h:114</a></div></div>
<div class="ttc" id="agroup___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions_html_ga9f4bc20c25e053a5f9b68ba6d5cfd5ec"><div class="ttname"><a href="../../db/d5b/group___s_t_m8_s___e_v_a_l___i2_c___e_e___private___functions.html#ga9f4bc20c25e053a5f9b68ba6d5cfd5ec">sEE_ExitCriticalSection_UserCallback</a></div><div class="ttdeci">void sEE_ExitCriticalSection_UserCallback(void)</div><div class="ttdoc">End of critical section: this callbacks should be typically used to re-enable interrupts when exiting...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d55/stm8s__eval__i2c__ee_8c_source.html#l00821">stm8s_eval_i2c_ee.c:821</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_ga7932c7b6a5da690a32632a6f9a23d641"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#ga7932c7b6a5da690a32632a6f9a23d641">I2C_CheckEvent</a></div><div class="ttdeci">ErrorStatus I2C_CheckEvent(I2C_Event_TypeDef I2C_Event)</div><div class="ttdoc">I2C State Monitoring Functions.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00578">stm8s_i2c.c:578</a></div></div>
<div class="ttc" id="agroup___i2_c___exported___functions_html_gad9f80b2c416bdf1ac578859a11e68a40"><div class="ttname"><a href="../../dd/d69/group___i2_c___exported___functions.html#gad9f80b2c416bdf1ac578859a11e68a40">I2C_SendData</a></div><div class="ttdeci">void I2C_SendData(uint8_t Data)</div><div class="ttdoc">Send a byte by writing in the DR register.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4d/stm8s__i2c_8c_source.html#l00458">stm8s_i2c.c:458</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Nov 27 2020 12:29:31 for STM8S Standard Peripheral Libary by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
